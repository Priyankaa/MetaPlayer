/**

MetaPlayer Framework  v3.2.20130313

A standards-based, multiple player, UI and Event framework for JavaScript.

Copyright (c) 2011 RAMP Holdings, Inc.

Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.
*/
(function(){var c=window.jQuery,f=window.Popcorn,d={isTouchDevice:null,debug:"",layout:{},metadata:{},search:{},cues:{}},a=function(b,e){if(!(this instanceof a))return new a(b,e);this.config=c.extend({},d,e,a.script.query("^mp."));a.dispatcher(this);this._plugins={};this._loadQueue=[];this.target=b;this.isTouchDevice=null!=this.config.isTouchDevice?this.config.isTouchDevice:/iPad|iPhone|iPod/i.test(navigator.userAgent);if(this.config.metadata)this.metadata=new a.MetaData(this,this.config);if(this.config.search)this.search=
new a.Search(this,this.config);if(this.config.cues)this.cues=new a.Cues(this,this.config);this.video=this.adaptMedia(b);if(this.config.layout&&(this.video||"string"==typeof b))this.layout=a.layout(this.video||b,this.config.layout),this.config.maximize&&this.layout.maximize();var k=this;setTimeout(function(){k._load()},0)};a.DEBUG="error,warning";a.READY="ready";a.DESTROY="destroy";a.prototype={load:function(){this._load();return this},adaptMedia:function(b){var e,d=this;c.each(a.Players,function(a,
c){if(e=c(b,d))return!1});return e},destroy:function(){this.dispatcher.dispatch(a.DESTROY);delete this.plugins;delete this._loadQueue;delete this.layout;delete this.popcorn},_load:function(){if(!this._loaded){var b=this;this._loaded=!0;!this.video&&this.layout&&this.html5();if(null!=this.config.preload)this.video.preload=this.config.preload;if(this.video&&!this.popcorn&&null!=f)this.popcorn=f(this.video);if(this.video)this.playlist=new a.Playlist(this);this.video&&this.config.linkAdvance&&this.video.addEventListener("trackchange",
function(){var a=b.metadata.getData().link;if(a&&0<b.video.getIndex())window.top.location=a});for(var e;this._loadQueue.length;)e=this._loadQueue.shift(),e.fn.apply(this,e.args);this.ready=!0;this.dispatcher.dispatch(a.READY)}},error:function(a,e,d){var c=this.createEvent();c.initEvent("error",!1,!0);c.code=a;c.message=e;this.dispatchEvent(c);c=Array.prototype.slice.call(arguments);c.unshift("MPF");try{console.error(c.join(" :: "))}catch(f){}},warn:function(a,e){var d=this.createEvent();d.initEvent("warning",
!1,!0);d.code=a;d.message=e;this.dispatchEvent(d);d=Array.prototype.slice.call(arguments);d.unshift("MPF");try{console.warn(d.join(" :: "))}catch(c){}}};a.addPlugin=function(b,e){var d=a.prototype;if(d[b])throw"keyword unavailable: "+b;d[b]=function(){this.ready?e.apply(this,arguments):this._loadQueue.push({name:b,args:arguments,fn:e});return this}};a.addPlayer=function(b,e){var d=a.prototype;if(d[b])throw"keyword unavailable: "+b;d[b]=function(){e.apply(this,arguments);this.layout.addVideo(this.video);
return this}};a.iOS=/iPad|iPhone|iPod/i.test(navigator.userAgent);a.Core={};a.Services={};a.Players={};a.UI={};a.Util={};a.Metrics={};a.log=function(b,e){var d=Array.prototype.slice.call(arguments);if("string"==typeof a.DEBUG){var g=a.DEBUG.split(/[,\s]+/);a.DEBUG={};c.each(g,function(b,e){a.DEBUG[e]=!0})}if(a.DEBUG&&(!0==a.DEBUG||a.DEBUG[b])){d.unshift("MPF");try{console.log(d.join(" :: "))}catch(f){}}};window.MetaPlayer=a;window.MetaPlayerFramework=a;window.MPF=a})();
(function(){var c=jQuery,f={},d=function(a,b){this.config=c.extend({},f,b);MetaPlayer.dispatcher(this);this._cues={};this._rules={subtitle:{clone:"captions",enabled:!0}};this.player=a;this._addListeners()};MetaPlayer.Cues=d;d.CUES="cues";d.CLEAR="clear";d.RENDER="render";d.ENABLE="enable";d.DISABLE="disable";d.prototype={setCueLists:function(a,b){var e=this;c.each(a,function(a,d){e.setCues(a,d,b)})},getCueLists:function(a){return this._cues[a||this.player.metadata.getFocusUri()]},setCues:function(a,
b,e){var d=e||this.player.metadata.getFocusUri();this._cues[d]||(this._cues[d]={});this._cues[d][a]||(this._cues[d][a]=[]);this._cues[d][a]=b;c.each(b,function(a,b){if("string"==typeof b.start)b.start=parseFloat(b.start);if("string"==typeof b.end)b.start=parseFloat(b.end)});e==this.player.metadata.getFocusUri()&&this._renderCueType(a)},getCaptions:function(a){return this.getCues("captions",a)},getCues:function(a,b){var e=b||this.player.metadata.getFocusUri();if(!a)return this.getCueLists();if(this._rules[a]&&
this._rules[a].clone)a=this._rules[a].clone;return!this._cues[e]||!this._cues[e][a]?[]:this._cues[e][a].sort(d.cueSortFn)},enable:function(a,b,e){e=c.extend({},this._rules[a],e);if(!e.enabled)e.overrides=c.extend({},e.overrides,b),e.enabled=!0,this._rules[a]=e,b=this.createEvent(),b.initEvent(d.ENABLE,!1,!0),b.action=a,this.dispatchEvent(b),this._scheduleCues(a,this.getCues(e.clone||a))},disable:function(a){if(a){this._rules[a]||(this._rules[a]={});this._rules[a].enabled=!1;var b=this.createEvent();
b.initEvent(d.DISABLE,!1,!0);b.action=a;this.dispatchEvent(b);this._removeEvents(a)}},isEnabled:function(a){a=this._rules[a];return Boolean(a&&a.enabled)},destroy:function(){this._removeEvents();this.dispatcher.destroy();delete this.player},_renderCueType:function(a){var b=this.player.metadata.getFocusUri(),e=this.getCues(a,b);this._renderCues(a,e);this.event(d.CUES,{uri:b,plugin:a,cues:e})},_addListeners:function(){var a=this.player,b=a.metadata;a.listen(MetaPlayer.DESTROY,this.destroy,this);b.listen(MetaPlayer.MetaData.FOCUS,
this._onFocus,this);b.listen(MetaPlayer.MetaData.DATA,this._onData,this)},_onFocus:function(){this._removeEvents();var a=this.createEvent();a.initEvent(d.CLEAR,!1,!0);this.dispatchEvent(a)},_onData:function(a){var b=this;c.map(this._cues[a.uri]||[],function(a,e){b._renderCueType(e)});var e=this.createEvent();e.initEvent(d.RENDER,!1,!0);e.uri=a.uri;this.dispatchEvent(e)},_removeEvents:function(a){var b=this.player.popcorn;if(b){var e=b.getTrackEvents();c.each(e,function(e,d){(!a||a==d._natives.type)&&
b.removeTrackEvent(d._id)})}},_renderCues:function(a,b){var e=this;this._scheduleCues(a,b);c.each(this._rules,function(d,c){c.clone==a&&e._scheduleCues(d,b)})},_scheduleCues:function(a,b){var e=this._rules[a]||{},d;this._removeEvents(a);if(e.enabled){var g=c.extend(!0,[],b);e.sequence&&c.each(g,function(a,b){if(d)d.end=b.start;d=b});e.duration&&c.each(g,function(a,b){b.end=b.start+e.duration});e.overrides&&c.each(g,function(a,b){c.extend(!0,b,e.overrides)});var f=this.player.popcorn;f&&f[a]instanceof
Function&&c.each(g,function(b,e){f[a].call(f,c.extend({},e))})}}};d.cueSortFn=function(a,b){return parseFloat(a.start)-parseFloat(b.start)}})();
(function(){var c=jQuery;if(!window.MetaPlayer)window.MetaPlayer={};var f={cssPrefix:"mp",adoptVideo:!0,sizeVideo:!0,sizeMsec:250};MetaPlayer.Layout=function(d,a){this.config=c.extend({},f,a);this.target=c(d).get(0);this.panels=[];MetaPlayer.dispatcher(this);this.target=c(d)[0];this._setup();var b=this;c(document.documentElement).bind("fullscreenchange webkitfullscreenchange",function(a){b.onFullScreen(a)});c(document).bind("mozfullscreenchange",function(a){b.onFullScreen(a)});c(window).bind("resize",
function(){b.isMaximized&&b.maximize()});c(window).bind("mousewheel DOMMouseScroll touchmove",function(a){b.isMaximized&&(a.stopPropagation(),a.preventDefault())});this.isFullScreen=document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen};MetaPlayer.layout=function(d,a){return new MetaPlayer.Layout(d,a)};MetaPlayer.Layout.PANEL_OPTIONS={top:0,right:0,bottom:0,left:0,enabled:!0,video:!0};MetaPlayer.Layout.prototype={addPanel:function(d){this.panels.push(c.extend({},MetaPlayer.Layout.PANEL_OPTIONS,
d));this._renderPanels(0);return this.panels.length-1},getPanel:function(d){return this.panels[d]||null},togglePanel:function(d,a,b){if(d=this.getPanel(d))d.enabled=a,this._renderPanels(b)},updatePanel:function(d,a,b){c.extend(this.getPanel(d),a);this._renderPanels(b)},render:function(d){this._renderPanels(d);this.dispatch("resize")},_renderPanels:function(d){var a={top:0,left:0,bottom:0,right:0};c.each(this.panels,function(b,e){e.enabled&&e.video&&(a.top+=e.top||0,a.left+=e.left||0,a.bottom+=e.bottom||
0,a.right+=e.right||0)});this._sizeVideo(a,d)},maximize:function(){this._maximize();this._secondSize()},_maximize:function(){var d=c(this.base),a=c(window);if(!this._restore)this._restore={width:d.width(),height:d.height(),offset:d.offset(),position:d.css("position")};c("body").css("margin",0).css("padding",0);if(!this.restoreZ)this.restoreZ=d.css("z-index");d.css("position","fixed").width("100%").addClass("mp-fullscreen").height("100%").css({"z-index":2147483647}).offset({top:a.scrollTop(),left:a.scrollLeft()});
c("html,body").css("overflow","hidden");this._renderPanels();if(!this.isMaximized)this.isMaximized=!0,this.dispatch("maximize");this.dispatch("resize")},fullscreen:function(){var d=document.documentElement;d.requestFullscreen?d.requestFullscreen():d.mozRequestFullScreen?d.mozRequestFullScreen():d.webkitRequestFullScreen?d.webkitRequestFullScreen():(this.maximize(),this._secondSize())},window:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():
document.webkitCancelFullScreen&&document.webkitCancelFullScreen()},onFullScreen:function(){(this.isFullScreen=document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen)?(this.dispatch("fullscreen"),delete this._restore,this.maximize()):this.restore();this._secondSize()},restore:function(){this.window();if(this._restore){var d=c(this.base),a=this._restore;c(window);c("body").css("margin","").css("padding","");d.css("position",a.position).offset({top:a.offset.top,left:a.offset.left}).width(a.width).css({"z-index":this.restoreZ||
"inherit"}).removeClass("mp-fullscreen").height(a.height);c("html,body").css("overflow","auto");this._renderPanels();if(this.isMaximized)this.isMaximized=!1,this.dispatch("restore"),this.dispatch("resize")}},_secondSize:function(){var d=this;setTimeout(function(){d.isMaximized?d._maximize():d.restore()},500)},_sizeVideo:function(d,a){if(this.config.sizeVideo&&this.video){var b=null!=a?a:this.config.sizeMsec,e=c(this.base);c(this.video);var k=e.width()-d.left-d.right,g=e.height()-d.top-d.bottom;this.video.mpf_resize instanceof
Function&&this.video.mpf_resize(k,g);e={"margin-top":d.top,"margin-left":d.left,width:100*(k/e.width())+"%",height:100*(g/e.height())+"%"};a?this.stage.stop().animate(e,b):this.stage.css(e)}},_setup:function(){var d=this.target,a=c(d),b;if(d.play instanceof Function)this.video=d,b=c(this.video._proxyFor||this.video);this.base=a.is(".metaplayer")?a:a.parents(".metaplayer").first();if(!this.base.length)this.base=c("<div/>").addClass("metaplayer").insertAfter(b);this.stage=this.base.children(".mp-stage").first();
if(!this.stage.length)this.stage=c("<div />").addClass("mp-stage").css({position:"relative"}).appendTo(this.base);b&&(this.base.css({height:b.height(),width:b.width()}),this.addVideo());this._renderPanels()},addVideo:function(d){if(d)this.video=d;d=c(this.video._proxyFor||this.video);d.css({height:"100%",width:"100%"});this.config.adoptVideo&&this.stage.append(d);this._renderPanels()},_addStage:function(){return c("<div></div>").addClass("mp-stage").appendTo(this.base).get(0)}}})();
(function(){var c=jQuery,f={},d=function(a){if(!(this instanceof d))return new d(a);this.config=c.extend({},f,a);MetaPlayer.dispatcher(this);this._data={};this._callbacks={};this._lastUri=null};MetaPlayer.MetaData=d;d.FOCUS="focus";d.LOAD="load";d.DATA="data";d.prototype={load:function(a,b,e){b?this._queue(a,b,e):this.setFocusUri(a);if(a){if(this._data[a]){if(this._data[a]._cached){var c=this;setTimeout(function(){c._response(a)},0);return!0}if(this._data[a]._loading)return!0}this._data[a]||(this._data[a]=
{});this._data[a]._loading=(new Date).getTime();b=this.createEvent();b.initEvent(d.LOAD,!1,!0);b.uri=a;b.data=this.getData(a);b=!this.dispatchEvent(b);if(!b)this._data[a]._loading=!1;return b}},getFocusUri:function(){return this._lastUri},setFocusUri:function(a){this._lastUri=a;this._firedDataEvent=!1;var b=this.createEvent();b.initEvent(d.FOCUS,!1,!0);b.uri=a;this.dispatchEvent(b)},getData:function(a){return this._data[a||this._lastUri]},setData:function(a,b,e){b=b||this._lastUri;if(!this._data[b]||
e)this._data[b]=c.extend(!0,{},this._data[b],a),this._data[b]._cached=null==e||e?!0:!1;e&&this._response(b)},destroy:function(){this.dispatcher.destroy();delete this._callbacks;delete this._data;delete this.config},_queue:function(a,b,e){this._callbacks[a]||(this._callbacks[a]=[]);this._callbacks[a].push({fn:b,scope:e})},_response:function(a){var b=this._data[a];if(this._lastUri==a&&!this._firedDataEvent){var e=this.createEvent();e.initEvent(d.DATA,!1,!0);e.uri=a;e.data=b;this.dispatchEvent(e);this._firedDataEvent=
!0}this._callbacks[a]&&(c.each(this._callbacks[a]||[],function(a,e){e.fn.call(e.scope,b)}),delete this._callbacks[a])}}})();
(function(){var c=jQuery,f={autoAdvance:!0,loop:!1,selectSource:!0,appendSources:!1},d=function(a,b){var e=a.video;this.config=c.extend({},f,b);this.player=a;if(!e.getPlaylist&&!e.getItem)this._playlist=[],this._index=0,this.loop=this.config.loop,this.autoAdvance=this.config.autoAdvance,this.selectSource=this.config.selectSource,MetaPlayer.dispatcher(this),d.proxy(this,this.player.video),this._addProxyListeners();this._addListeners();return e};MetaPlayer.Playlist=d;d.TRACK_CHANGE="trackchange";d.PLAYLIST_CHANGE=
"playlistchange";d.proxy=function(a,b){MetaPlayer.proxy.mapProperty("loop autoAdvance selectSource",b,a);MetaPlayer.proxy.proxyFunction("getIndex setIndex getItem updateItem getPlaylist setPlaylist next previous",a,b);MetaPlayer.proxy.proxyEvent(d.TRACK_CHANGE,a,b);MetaPlayer.proxy.proxyEvent(d.PLAYLIST_CHANGE,a,b)};d.prototype={_addProxyListeners:function(){var a=this;this.player.video.addEventListener("ended",function(b){a._onEnded(b)});this.player.video.addEventListener("error",function(b){a._onEnded(b)})},
_addListeners:function(){var a=this;this.player.addEventListener("destroy",function(){a._destroy()});this.player.video.addEventListener("loadstart",function(){a.player.video.preload="auto"});this.player.video.addEventListener("playing",function(){});this.player.video.addEventListener("pause",function(){});this.player.video.addEventListener(d.TRACK_CHANGE,function(b){a._onTrackChange(b)});this.player.metadata.addEventListener("data",function(b){a._onData(b)})},_onEnded:function(){if(this.autoAdvance){var a=
this;setTimeout(function(){a.next()},0)}},_onData:function(a){this.config.appendSources&&this._appendSources(a.data);this.player.video.updateItem(a.uri,a.data)},updateItem:function(a,b,e){if(!(null==this._index||a!=this.getItem()))if(b.resolveUrl&&!e)this._applyResolver(a,b.resolveUrl);else{a=this.player.video;if(e=this._selectResource(b.content))a.pause(),this._applySource(e);if(b.thumbnail&&("none"==a.preload||!a.autoplay))this.player.video.poster=b.thumbnail}},_applyResolver:function(a,b){var e=
this;MetaPlayer.mrss(b,function(b){0<b.length&&e.updateItem(a,b[0],!0)})},_applySource:function(a){if(this.selectSource){var b=this.player.video;b.src=a;b.autoplay?b.play():"none"!=b.preload&&b.load()}},_appendSources:function(a){var b=this.player.video;c(b).empty();c.each(a.content,function(a,d){c("<source>").attr("src",d.url).attr("type",d.type).appendTo(b)})},_selectResource:function(a){var b=this,e=this.player.video,d=[],g=[];if(a)return c.each(a,function(a,c){var f=e.canPlayType(c.type||b._resolveType(c.url));
f&&("probably"==f?d.push(c.url):g.push(c.url))}),d.shift()||g.shift()},_destroy:function(){this.dispatcher.destroy();delete this.player},getPlaylist:function(){return this._playlist},setPlaylist:function(a,b){a instanceof Array||(a=[a]);if(!b)this._playlist=[];var e,c=this._playlist;for(e=0;e<a.length;e++)c.push(a[e]);this.dispatch(d.PLAYLIST_CHANGE);b||this.setIndex(0,!0)},getIndex:function(a){var b=this._playlist;if(null==a)return this._index;0>a&&this.loop&&(a=b.length+a);return!this.loop&&(a>=
b.length||0>a)?null:a%b.length},setIndex:function(a,b){a=this.getIndex(a);if(!b&&(null==a||a==this._index))return!1;this._index=a;this.dispatch(d.TRACK_CHANGE);return!0},_onTrackChange:function(){var a=this.player.playlist.getItem();this.player.metadata.load(a)||this._applySource(a)},getItem:function(a){if(null==a)a=this._index;return this._playlist[this.getIndex(a)]},next:function(){return this.setIndex(this.getIndex()+1)},previous:function(){return this.setIndex(this.getIndex()-1)},_resolveType:function(a){var b=
a.substr(a.lastIndexOf(".")+1);return a.match("www.youtube.com")?"video/youtube":"ogv"==b?"video/ogg":"m3u8"==b?"application/application.vnd.apple.mpegurl":"video/"+b.toLowerCase()}}})();
(function(){var c=jQuery,f={forceRelative:!1,useCache:!0},d=function(a,b){this.config=c.extend({},f,b);this.player=a;this.forceRelative=this.config.forceRelative;MetaPlayer.dispatcher(this);this.player.listen(MetaPlayer.DESTROY,this.destroy,this)};d.QUERY="query";d.RESULTS="results";MetaPlayer.Search=d;MetaPlayer.addPlugin("search",function(){return new d(this)});d.context=function(a,b,e,d){var c=[],f;null==e&&(e=10);null==d&&(d=256);var h,j;0<e?(h=/^\s*(\S+)/,j=a.substr(b,d)):(h=/(\S+)\s*$/,j=b>=
d?a.substr(b-d,d):a.substr(0,b));for(;c.length<Math.abs(e)&&(f=j.match(h));)0<e?(c.push({text:f[1],offset:b}),b+=f[0].length,j=a.substr(b,d)):(b-=f[0].length,c.unshift({text:f[1],offset:b}),j=b>=d?a.substr(b-d,d):a.substr(0,b));return c};d.search=function(a,b,e){if(!b.length)return[];var b=b.replace(/(\W)/g,"\\$1").replace(/(\\\s)+/g,"\\s+"),b=RegExp("(\\b\\S*"+b+"\\S*\\b)","i"),c,g=0,f,h=a.substr(g),j;null==e&&(e=6);for(var l=[];c=h.match(b);){g+=c.index;h=d.context(a,g+c[1].length,10);j=d.context(a,
g,-10);c=[{match:!0,text:c[1],offset:g}];c.offset=g;for(f=0;c.length<e&&(j.length||h.length);)f++,j.length&&0==f%2?c.unshift(j.pop()):h.length&&c.push(h.shift());g+=1;h=a.substr(g);l.push(c)}return l};d.prototype={query:function(a,b,e){var c=this.player.metadata.getData(),g=this.createEvent();g.initEvent(d.QUERY,!1,!1);g.query=a;this.dispatchEvent(g);if(this.config.useCache)this.searchLocal(a,b,e);else{if(!c.ramp.searchapi)throw"no searchapi available";this._queryAPI(c.ramp.searchapi,a,b,e)}},destroy:function(){this.dispatcher.destroy();
delete this.player},searchLocal:function(a,b,e){var k=this.player.cues.getCaptions(),g="",f=[];a.replace(/(^\s|\s$)/,"").toLowerCase().split(/\s+/);c.each(k,function(a,b){f.push({start:b.start,offset:g.length});g+=b.text+" "});var h=function(a){for(var b=0,e=0;e<f.length&&!(a<f[e].offset);e++)b=f[e].start;return b},k=d.search(g,a),j={usingCues:!0,query:a,results:[]};c.each(k,function(a,b){j.results.push({offset:b.offset,start:h(b.offset),words:c.map(b,function(a){return{offset:a.offset,text:a.text,
match:Boolean(a.match),start:h(a.offset)}})})});this.setResults(j,a,b,e)},_queryAPI:function(a,b,e,d){this.forceRelative&&(a=a.replace(/^(.*\/\/[\w.]+)/,""));var g={q:'"'+b+'"'};b?c.ajax(a,{dataType:"xml",timeout:15E3,context:this,data:g,error:function(b,e){console.error("Load search error: "+e+", url: "+a)},success:function(a){this.setResults(this.parseSearch(a,e,d),b,e,d)}}):this.setResults({query:[],results:[]},b,e,d)},setResults:function(a,b,e,c){e?e.call(c,a,b):(e=this.createEvent(),e.initEvent(d.RESULTS,
!1,!1),e.query=b,e.data=a,this.dispatchEvent(e))},parseSearch:function(a){var a=c(a),b=this,e={query:[],results:[]};a.find("SearchTerms Term").each(function(){e.query.push(b._deSmart(c(this).text()))});a.find("Snippets Snippet").each(function(a,d){var f=c(d),h={start:f.attr("time"),words:[]},f=f.find("T");c.each(f,function(a,e){var d=c(e);h.words.push({match:Boolean(d.find("MQ").length),start:d.attr("s"),text:b._deSmart(d.text())})});e.results.push(h)});return e},_deSmart:function(a){return a.replace(/\xC2\x92/,
"\u2019")}}})();
(function(){var c=jQuery,f=function(d){if(d&&d.dispatcher instanceof f)return d.dispatcher;if(!(this instanceof f))return new f(d);this._listeners={};this.attach(d)};MetaPlayer.dispatcher=f;f.prototype={attach:function(d){if(d)d.addEventListener?MetaPlayer.proxy.proxyFunction("addEventListener removeEventListener dispatchEvent",d,this):MetaPlayer.proxy.proxyFunction("addEventListener removeEventListener dispatchEvent",this,d),MetaPlayer.proxy.proxyFunction("listen forget dispatch createEvent event",this,
d),d.dispatcher=this},destroy:function(){delete this._listeners;delete this.addEventListener;delete this.removeEventListener;delete this.dispatchEvent;this.__destroyed=!0},listen:function(d,a,b){this.addEventListener(d,function(e){a.call(b,e,e.data)})},forget:function(d,a){this.removeEventListener(d,a)},dispatch:function(d,a){var b=this.createEvent();b.initEvent(d,!0,!0);b.data=a;return this.dispatchEvent(b)},event:function(d,a){var b=this.createEvent();b.initEvent(d,!0,!0);c.extend(b,a);return this.dispatchEvent(b)},
addEventListener:function(d,a){this._listeners[d]||(this._listeners[d]=[]);this._listeners[d].push(a)},removeEventListener:function(d,a){var b=this._listeners[d]||[],e;for(e=b.length-1;0<=e;e--)b[e]==a&&b.splice(e,1)},createEvent:function(d){return document.createEvent?document.createEvent(d||"Event"):new f.Event},dispatchEvent:function(d){d.type.match(/^time/)?MetaPlayer.log("time",d.type,d):MetaPlayer.log("event",d.type,d);for(var a=(this._listeners[d.type]||[]).concat(),b=0;b<a.length&&!d.cancelBubble;b++)a[b].call(a[b].scope||
this,d,d.data);return!d.defaultPrevented}};f.Event=function(){this.defaultPrevented=this.cancelBubble=!1};f.dispatch=function(d,a,b){var e;e=document.createEvent?document.createEvent("Event"):new f.Event;e.initEvent(a,!0,!0);b instanceof Object&&c.extend(e,b);return d.dispatchEvent(e)};f.Event.prototype={initEvent:function(d,a,b){this.type=d;this.cancelable=b},stopPropagation:function(){this.cancelBubble=!0},stopImmediatePropagation:function(){this.cancelBubble=!0},preventDefault:function(){if(this.cancelable)this.defaultPrevented=
!0}}})();
(function(){var c=jQuery;MetaPlayer.format={zpad:function(c,d){for(var a=""+c;a.length<d;)a="0"+a;return a},seconds:function(f,d){var a=c.extend({},{minutes:!0,seconds:!0,hours:!1},d),b=MetaPlayer.format.zpad,e=Math.floor(f/3600),k=Math.floor(f%3600/60),g=Math.floor(f%60),i=[];a.seconds||k||e?i.unshift(b(g,2)):0<g&&i.unshift(g);a.minutes||e?i.unshift(b(k,2)):0<k&&i.unshift(k);a.hours?i.unshift(b(e,a.hours)):0<e&&i.unshift(e);return i.join(":")},replace:function(c,d){return c.replace(/\{\{(\w+)\}\}/g,function(a,
b){var e;if(d[b]instanceof Function)e=d[b](d);else if(null!=d[b])e=d[b];else return"{!!!"+b+"!!!}";return MetaPlayer.format.replace(e.toString(),d)})}}})();
(function(){var c=jQuery,f={steps:null,throttleMs:250,max:100,min:0,value:25,draggable:!0},d=function(a,b){if(!(this instanceof d))return new d(a,b);var e=c.extend({},f,b);this._steps=e.steps;this._throttleMs=e.throttleMs;this._max=e.max;this._min=e.min;this._value=e.value;this.ui={};this.createMarkup(a);this._render();this.setDraggable(e.draggable);MetaPlayer.dispatcher(this)};MetaPlayer.ProgressBar=d;d.prototype={createMarkup:function(a){this.ui.track=c("<div></div>").css({position:"relative",top:0,
left:0}).bind("mousedown touchstart",this.bind(this._onDragStart)).appendTo(a);this.ui.fill=c("<div></div>").css({position:"absolute",top:0,left:0,height:"100%"}).appendTo(this.ui.track)},getPercent:function(){return this._value/this._range()},getValue:function(){return this._value},getStep:function(){return Math.ceil(this.getPercent()*this._steps)},setValue:function(a){this._value=a;this._render()},setDraggable:function(a){this._draggable=Boolean(a);this.ui.track.css("cursor",this._draggable?"pointer":
"inherit")},setMin:function(a){this._min=a;this._render()},setMax:function(a){this._max=a;this._render()},_range:function(){return this._max-this._min},_render:function(a){null==a&&(a=this.getPercent());this._dragging&&null==a||(0<this._steps&&(a=this.getStep()/this._steps),this.ui.fill.width(100*a+"%"))},_onDragStart:function(a){if(this._draggable)this._dragging={move:this.bind(this._onDragMove),stop:this.bind(this._onDragStop)},this.dispatch("dragstart"),c(document).bind("mousemove touchmove",this._dragging.move).bind("mouseup touchend",
this._dragging.stop),this._onDragMove(a)},_onDragStop:function(a){if(this._dragging)c(document).unbind("mousemove touchmove",this._dragging.move).unbind("mouseup touchend",this._dragging.stop),this._lastFire=null,this._onDragMove(a),this._dragging=null,this.dispatch("dragstop")},_onDragMove:function(a){var b=this._dragPercent(a,this.ui.track);isNaN(b)?b=this._lastP:(this._value=b*this._range(),this._lastP=b);(0===b||0<b)&&this._render(b);a.preventDefault();a=(new Date).getTime();if(!this._lastFire||
a-this._lastFire>this._throttleMs)this._onThrottle();else if(!this._timeout)this._timeout=setTimeout(this.bind(this._onThrottle),this._throttleMs)},_onThrottle:function(){clearTimeout(this._timeout);this._timeout=null;this._lastFire=(new Date).getTime();this.dispatch("dragmove")},bind:function(a){var b=this;return function(){return a.apply(b,arguments)}},_dragPercent:function(a){var b=a.originalEvent,a=a.pageX;if(b.targetTouches){if(!b.targetTouches.length)return NaN;a=b.targetTouches[0].pageX}b=
this.ui.track;b=(a-b.offset().left)/b.width();0>b?b=0:1<b&&(b=1);return b}}})();
(function(){var c=jQuery,f={proxyProperty:function(d,a,b){c.each(d.split(/\s+/g),function(e,d){f.mapProperty(d,b,a)})},proxyFunction:function(d,a,b){c.each(d.split(/\s+/g),function(e,d){a[d]&&(b[d]=function(){return a[d].apply(a,arguments)})})},proxyEvent:function(d,a,b){b.addEventListener||MetaPlayer.dispatcher(b);c.each(d.split(/\s+/g),function(e,d){a.addEventListener(d,function(a){if(b.dispatch)b.dispatch(a.type,a.data);else{var e=document.createEvent("Event");e.initEvent(a.type,!1,!1);b.dispatchEvent(e)}})})},
mapProperty:function(d,a,b){b||(b=a);c.each(d.split(/\s+/g),function(e,d){var c=void 0==b[d]?"_"+d:d,i;i=b[c]instanceof Function?function(){return b[c].apply(b,arguments)}:function(a){void 0!==a&&(b[c]=a);return b[c]};f.define(a,d,{get:i,set:i})})},define:function(d,a,b){b.configurable=!0;try{return Object.defineProperty(d,a,b)}catch(e){}d.__defineGetter&&b.get&&d.__defineGetter__(a,b.get);b.set&&d.__defineSetter__&&d.__defineSetter__(a,b.set)},getProxyObject:function(d){if(d&&d._proxyFor)return d;
var a=document.createElement("div"),b;try{b=a,Object.defineProperty(b,"parentElement",{get:function(){return d.parentElement},configurable:!0})}catch(e){b={},f.mapProperty("children",b,a),f.proxyFunction("appendChild removeChild prependChild",a,b)}if(d){var c,g;for(c in a)if(!c.match(/filters|child|textContent|nodeName|nodeType/i)){g=void 0;try{g=a[c]}catch(i){}g&&g instanceof Function?f.proxyFunction(c,d,b):f.mapProperty(c,b,d)}}b!==a&&(f.mapProperty("nodeName nodeType children textContent",b,a),
f.proxyFunction("appendChild removeChild prependChild",a,b));b._proxyFor=d;return b},proxyPlayer:function(d,a){var b=MetaPlayer.proxy.getProxyObject(a);f.mapProperty("duration currentTime volume muted seeking paused controls autoplay preload src ended readyState ad",b,d);f.proxyFunction("load play pause canPlayType",d,b);f.proxyFunction("mpf_resize mpf_index",d,b);f.proxyEvent("timeupdate seeking seeked playing play pause loadeddata loadedmetadata canplay loadstart durationchange volumechange adstart adstop ended error",
d,b);return b}};if(!window.Ramp)window.Ramp={};MetaPlayer.proxy=f})();
(function(){var c=jQuery;MetaPlayer.script={url:function(f){var d,a=RegExp(f);c("script").each(function(b,e){var k=c(e).attr("src");if(k&&k.match(a))return d=k,!1});return d},base:function(c){var d;c&&(d=this.url(c)||"");d||(d=this.url("metaplayer(-complete)?(.min)?.js"));if(d)return d.substr(0,d.lastIndexOf("/")+1)},query:function(f){var d={},a=RegExp(f),b=location.search&&location.search.substr(1).split("&");c.each(b,function(b,c){var g=c&&c.split("=")||[],i=g[0];if(i){if(f)if(i.match(a))i=i.replace(a,
"");else return;g=g[1]||"";g=decodeURIComponent(g.replace(/\+/g," "));""==g?g=null:g.match(/^\d+$/)?g=parseInt(g):g.match(/^true|false$/)&&(g="true"===g);d[i]=g}});return d},camelCase:function(c){return c.replace(/[\s_\-]+([A-Za-z0-9])?([A-Za-z0-9]*)/g,function(d,a,b){return a.toUpperCase()+b.toLowerCase()})},objectPath:function(c,d,a,b){null==b&&(b=0);var e=d.indexOf(".");if(-1==e)return void 0!==a&&(c[d]=a),c[d];var k=d.slice(0,e),e=d.slice(e+1);void 0!==d&&!(c[k]instanceof Object)&&(c[k]={});return MetaPlayer.script.objectPath(c[k],
e,a,b+1)},parseSrtTime:function(c){c=c.match(/^(?:(\d+):)?(\d\d):(\d\d)[\.,](\d\d\d)$/);if(!c)return null;c[1]||(c[1]=0);return 3600*parseInt(c[1],10)+60*parseInt(c[2],10)+parseInt(c[3],10)+0.0010*parseInt(c[4],10)}}})();
(function(){var c=jQuery,f={disabled:!1,fixedHeight:!1,minHeight:20,mouseDrag:!1,listenChanges:!0,knobAnimateMs:1E3,inertial:!1},d=function(a,b){this.config=c.extend(!0,{},f,b);this.init(a);this.inertiaY=0},a=function(a){return a.pageX||a.originalEvent.touches[0].pageX},b=function(a){return a.pageY||a.originalEvent.touches[0].pageY};d.prototype={init:function(a){this.parent=c(a);var b=this,d=this.parent[0].childNodes;this.body=c("<div></div>").addClass("mp-scroll-body").css("position","relative").bind("resize DOMSubtreeModified size change",
function(a){b.onResize(a)}).append(d);this.scroller=c("<div></div>").css("width","100%").css("height","100%").css("overflow","hidden").addClass("mp-scroll").append(this.body).appendTo(a);this._touchStop=function(a){b.onTouchStop(a)};this._touchMove=function(a){b.onTouchMove(a)};this._knobStop=function(a){b.onKnobStop(a)};this._knobMove=function(a){b.onKnobMove(a)};this.knob=c("<div></div>").css("position","absolute").css("background","black").css("top",0).css("right","-10px").css("border-radius",
"4px").css("background","#000").css("opacity",0.4).hide().css("cursor","pointer").width(8).addClass("mp-scroll-knob").appendTo(this.parent).bind("mousedown touchstart",function(a){b.onKnobStart(a)});this.parent.css("position","relative").css("overflow","visible").bind("mousewheel DOMMouseScroll",function(a){b.onScroll(a)}).bind((this.config.mouseDrag?"mousedown":"")+" touchstart",function(a){b.onTouchStart(a)});this.scrollTo(0,0)},onScroll:function(a){var b=a.originalEvent.wheelDeltaX||a.originalEvent.delta||
10*a.originalEvent.detail||0,d=a.originalEvent.wheelDeltaY||a.originalEvent.delta||10*a.originalEvent.detail||0;this.config.disabled||this.scrollBy(-b,-d)&&a.preventDefault()},scrollBy:function(a,b,d){var c=this.scroller.scrollLeft(),f=this.scroller.scrollTop();return this.scrollTo(c+a,f+b,d)},scrollTop:function(){return this.scroller.scrollTop()},scrollTo:function(a,b,d){var c=this.scroller.scrollTop(),f=this.body.height()-this.parent.height();b>f&&(b=f);0>b&&(b=0);this.scroller.stop();if(b==c)return!1;
if(d){var j=this;this._scrollY=b;this.scroller.animate({scrollLeft:a,scrollTop:b},d,function(){j._scrollY=null});this.render(d);return!1}if(b)return this.scroller.scrollLeft(a),this.scroller.scrollTop(b),this.render(),!0},throttledRender:function(a){this._delay&&clearTimeout(this._delay);if(null==a)a=this.config.knobAnimateMs;var b=this;this._delay=setTimeout(function(){b._delay=null;b.render(a)},0)},render:function(a){if(this.body&&this.body.is(":visible")&&!this.config.disabled){var b=this.body.height(),
d=this.parent.height(),c=Math.min(d-(b-d)/b*d,d);if(c<this.config.minHeight||this.config.fixedHeight)c=this.config.minHeight;var b=(null!=this._scrollY?this._scrollY:this.scroller.scrollTop())/(b-d),b=(d-c)*b,f=b+c;if(this._cacheHeight!=f)this._cacheHeight=f,this.knob.toggle(c<d),a?this.knob.stop().animate({height:c,top:b},a):this.knob.stop().height(c).css("top",b)}},onResize:function(){this.config.listenChanges&&this.throttledRender()},onTouchStart:function(e){this.touching={lastX:this.scroller.scrollLeft(),
lastY:this.scroller.scrollTop()};this.touching.x=a(e)+this.touching.lastX;this.touching.y=b(e)+this.touching.lastY;c(document).bind("mousemove touchmove",this._touchMove).bind("mouseup touchend",this._touchStop);if(this.config.inertial){var d=this;this.inertiaInterval=setInterval(function(){d.onInertiaUpdate()},30)}},onInertiaUpdate:function(){this.inertiaY*=0.9;this.touching||(1>this.inertiaY&&clearInterval(this.inertiaInterval),this.scrollBy(0,this.inertiaY))},onTouchStop:function(){c(document).unbind("mousemove touchmove",
this._touchMove).unbind("mouseup touchend",this._touchStop);this.touching=null},onTouchMove:function(e){var d=-1*(a(e)-this.touching.x),c=-1*(b(e)-this.touching.y);this.inertiaY+=c-this.touching.lastY;this.touching.lastX=d;this.touching.lastY=c;this.scrollTo(d,c)&&(e.stopPropagation(),e.preventDefault())},onKnobStart:function(e){this.scroller.stop();this.dragging={x:a(e)-this.knob.position().left,y:b(e)-this.knob.position().top};c(document).bind("mousemove touchmove",this._knobMove).bind("mouseup touchend",
this._knobStop);e.stopPropagation();e.preventDefault()},onKnobStop:function(){c(document).unbind("mousemove touchmove",this._knobMove).unbind("mouseup touchend",this._knobStop);this.dragging=null},onKnobMove:function(e){var d=a(e)-this.dragging.x,e=b(e)-this.dragging.y,c=this.body.height(),f=this.parent.height(),h=this.knob.height();this.scrollTo(d,e/(f-h)*(c-f))}};if(!window.MetaPlayer)window.MetaPlayer={};MetaPlayer.scrollbar=function(a,b){return new d(a,b)}})();
(function(){var c=function(f,d){if(!(this instanceof c))return new c(f,d);var a=this;MetaPlayer.dispatcher(this);this.delay=f;this.count=d||-1;this._counted=0;this._onTimeout=function(){a._counted++;a.dispatcher.dispatch("time",{count:a._counted,remain:a.count-a._counted});0<a.count&&a.count<a._counted+1&&(a.reset(),a.dispatcher.dispatch("complete"))}};MetaPlayer.timer=c;c.prototype={reset:function(){this._counted=0;this.stop()},stop:function(){clearInterval(this._interval);this.running=this._interval=
null},toggle:function(){this.running?this.stop():this.start()},start:function(){if(!this._interval)this.running=(new Date).getTime(),this._interval=setInterval(this._onTimeout,this.delay)}}})();
(function(){var c=jQuery;if(!window.Ramp)window.Ramp={};MetaPlayer.ui={ensureOffsetParent:function(f){var f=c(f).first(),d=f[0];if(!(d.offsetParent===d.parentNode&&d.offsetParent.offsetParent)){var a=c("<div></div>");a.css("position","relative");a.css("top",0);a.css("left",0);a.css("width","100%");a.css("height","100%");d.width&&a.width(d.width);d.height&&a.height(d.height);f.css("width","100%");f.css("height","100%");f.parent().append(a);a.append(f)}}}})();
(function(){var c=function(f,d){if(!(this instanceof c))return new c(f,d);this.player=f;this.gat=d;this.addListeners();this.init()};MetaPlayer.addPlugin("gat",function(f){this.gat=c(this,f)});c.prototype={init:function(){this.hasPlayed=!1;this.muted=this.player.video.muted},addListeners:function(){var c=this.player.video;c.addEventListener("loadstart",this._bind(function(){this.hasPlayed=!1;this._track("Begin")}));c.addEventListener("playing",this._bind(function(){this.hasPlayed?this._track("Resume"):
(this.hasPlayed=!0,this._track("Start"))}));c.addEventListener("volumechange",this._bind(function(){var d=this.player.video.muted||0==this.player.video.volume;if(this.muted!=d)this.muted?this._track("Unmute"):this._track("Mute"),this.muted=d}));c.addEventListener("ended",this._bind(this._track,"Finish"));c.addEventListener("pause",this._bind(this._track,"Pause"));c.addEventListener("seeked",this._bind(this._track,"Seek"));c=this.player.layout;c.addEventListener&&(c.addEventListener("maximize",this._bind(this._track,
"Fullscreen")),c.addEventListener("restore",this._bind(this._track,"Fullscreen exit")));c=this.player.cues;c.addEventListener("enable",this._bind(function(d){(d.action="captions")&&this._track("onCaptionsOn")}));c.addEventListener("disable",this._bind(function(d){(d.action="captions")&&this._track("onCaptionsOff")}))},_track:function(c,d,a){if(!a)a=this.player.video.currentTime;this.gat._trackEvent("Videos",c,d,Math.round(a))},_bind:function(c){var d=Array.prototype.slice.call(arguments,1),a=this;
return function(){return c.apply(a,d.length?d:arguments)}}};MetaPlayer.Metrics.GAT=c})();
(function(){var c=jQuery,f=function(d,a,b,e){if(!(this instanceof f))return new f(d,a,b,e);this.playerName=e||"metaplayer";this.mediaName=b?b.replace(/\s*$/,"").replace(/\s/g,"+"):"";this.video=c(d);this.s=a;var k=this;this.video.bind("durationchange play pause seeking seeked ended",function(a){k._handleMediaEvent(a)})};MetaPlayer.addPlugin("sitecatalyst",function(d,a,b){var e=f(this.video,d,a,b);this.metadata.addEventListener("data",function(a){this.opened=!1;if(a.data.title)e.mediaName=a.data.title.replace(/\s*$/,
"").replace(/\s/g,"+")})});f.prototype={_handleMediaEvent:function(d){var a=this.s.Media,b=this.video.get(0),e=this.mediaName,c=Math.round(b.duration),g=Math.round(b.currentTime),b=b.paused;if(c&&(this.opened||d.type.match(/^(play|durationchange)$/))){if(!this.opened)MetaPlayer.log("sitecatalyst",d.type,"open",e,0,this.playerName),a.open(e,c,this.playerName),this.opened=!0;switch(d.type){case "durationchange":MetaPlayer.log("sitecatalyst",d.type,"play",e,0);a.play(e,0);break;case "play":MetaPlayer.log("sitecatalyst",
d.type,"play",e,g);a.play(e,g);break;case "pause":MetaPlayer.log("sitecatalyst",d.type,"stop",e,g);a.stop(e,g);break;case "seeking":!this.seeking&&!b&&(MetaPlayer.log("sitecatalyst",d.type,"stop",e,g),a.stop(e,g));this.seeking=!0;break;case "seeked":if(!this.seeking)break;this.seeking=!1;b||(MetaPlayer.log("sitecatalyst",d.type,"play",e,g),a.play(e,g));break;case "ended":MetaPlayer.log("sitecatalyst",d.type,"stop",e,g),a.stop(e,g),MetaPlayer.log("sitecatalyst",d.type,"close",e),a.close(e),this.opened=
!1}}}};MetaPlayer.Metrics.SiteCatalyst=f})();
(function(){var c=jQuery,f={autoplay:!1,preload:!0,loop:!1,updateMsec:500,playerVars:{}},d=function(a,b){this.config=c.extend(!0,{},f,b);this.experienceID=a;this._src="";this._currentTime=0;this._duration=NaN;this._paused=!0;this._loop=this._ended=!1;this._autobuffer=!0;this._seeking=!1;this._volume=1;this._muted=!1;this._readyState=0;this._autobuffer=this.config.autobuffer;this._autoplay=this.config.autoplay;this._preload=this.config.preload;this._loop=this.config.loop;MetaPlayer.dispatcher(this);
this.container=c("#"+a).get(0);this.video=MetaPlayer.proxy.proxyPlayer(this,this.container);this.initCheck()};MetaPlayer.Players.Brightcove=function(a){if(window.brightcove){var b=document.getElementById(a);return!b||"BrightcoveExperience"==b.getAttribute("class")?void 0:MetaPlayer.brightcove(a)}};MetaPlayer.addPlayer("brightcove",function(a,b){!b&&a instanceof Object&&(b=a,a=null);b||(b={});a||(a=c("<div></div>").prependTo(this.layout.base));var e=new d(a,b);this.video=e.video;this.brightcove=e});
MetaPlayer.brightcove=function(a){return(new d(a)).video};d.prototype={initCheck:function(){MetaPlayer.log("brightcove","initcheck...");var a=this;if(brightcove.api&&brightcove.internal._instances[this.experienceID])try{this.brightcovePlayer=brightcove.api.getExperience(this.experienceID),this.brightcoveVideoPlayer=this.brightcovePlayer.getModule(brightcove.api.modules.APIModules.VIDEO_PLAYER),this.addListeners(),MetaPlayer.log("brightcove","initcheck ok"),clearInterval(this._readyInterval),a.init()}catch(b){}else if(!this._readyInterval)MetaPlayer.log("brightcove",
"initcheck start interval"),this._readyInterval=setInterval(function(){a.initCheck()},250)},init:function(){try{this.brightcovePlayer=brightcove.api.getExperience(this.experienceID),this.brightcoveVideoPlayer=this.brightcovePlayer.getModule(brightcove.api.modules.APIModules.VIDEO_PLAYER)}catch(a){debugger}this.addListeners();this.startVideo()},isReady:function(){return this.brightcovePlayer},addListeners:function(){var a=this.brightcoveVideoPlayer,b=this;a.addEventListener("mediaBegin",function(a){b.onMediaBegin(a)});
a.addEventListener("mediaChange",function(a){b.onMediaChange(a)});a.addEventListener("mediaComplete",function(a){b.onMediaComplete(a)});a.addEventListener("mediaError",function(a){b.onMediaError(a)});a.addEventListener("mediaPlay",function(a){b.onMediaPlay(a)});a.addEventListener("mediaProgress",function(a){b.onMediaProgress(a)});a.addEventListener("mediaSeekNotify",function(a){b.onMediaSeekNotify(a)});a.addEventListener("mediaStop",function(a){b.onMediaStop(a)})},onMediaChange:function(a){this._src=
a.media.id;this._duration=a.duration/1E3;this._currentTime=0;this._seekOnPlay=null;this._hasBegun=!1;this._paused=this._autoplay?!1:!0;this._readyState=4;this.dispatch("canplay");this.dispatch("loadedmetadata");this.dispatch("loadeddata");this.dispatch("durationchange")},onMediaComplete:function(){this._paused=this._ended=!0;var a=this;setTimeout(function(){a.dispatch("ended")},0)},onMediaError:function(){},onMediaPlay:function(a){this._paused=this._ended=!1;this._hasBegun=!0;this._currentTime=a.position;
var b=this;setTimeout(function(){b.dispatch("play");b.dispatch("playing")},250)},onMediaBegin:function(){this._hasBegun=!0},onMediaProgress:function(a){var b=a.position-this._currentTime;if(isNaN(b)||0.2<b)this._currentTime=a.position,this.dispatch("timeupdate");this._seekOnPlay&&this.doSeek(this._seekOnPlay)},onMediaSeekNotify:function(a){this._seeking=!1;this.dispatch("seeked");this.dispatch("timeupdate");this._currentTime=a.position},onMediaStop:function(a){if(this._duration!=a.position)this._paused=
!0,this._ended=!1,this.dispatch("pause")},startVideo:function(){if(this.isReady()&&"none"!=this._preload){this._ended&&this.currentTime(0);this._ended=!1;this.muted(this._muted);var a=this._src;if(a){this.dispatch("loadstart");var b=a.toString().match(/^http:\/\/link.brightcove.com.*bctid(\d+)\?/);b&&(a=parseInt(b[1]));this._autoplay?this.brightcoveVideoPlayer.loadVideoByID(a):this.brightcoveVideoPlayer.cueVideoByID(a)}}},doSeek:function(a){this._currentTime=a;if(!this._hasBegun)this._seekOnPlay=
a;this._seeking=!0;this._seekOnPlay=null;this.dispatch("seeking");this.brightcoveVideoPlayer.seek(a);var b=this;setTimeout(function(){b._currentTime=a;b._seeking=!1;b.dispatch("seeked");b.dispatch("timeupdate")},1500)},load:function(){this._preload="auto";this.startVideo()},play:function(){this._preload="auto";this._autoplay=!0;4==this._readyState?this.brightcoveVideoPlayer.play():this.startVideo()},pause:function(){this.isReady()&&this.brightcoveVideoPlayer.pause()},canPlayType:function(a){MetaPlayer.log("brightcove",
"canPlayType?",a);return Boolean(a.match(/\/brightcove$/))},paused:function(){return this._paused},duration:function(){return this._duration},seeking:function(){return this._seeking},ended:function(){return!this.isReady()?!1:this._ended},currentTime:function(a){if(!this.isReady())return this._currentTime=a||0,0;if(void 0!==a)this._ended=!1,this.doSeek(a);return this._currentTime},muted:function(a){if(void 0!==a){this._muted=a;if(!this.isReady())return a;this.brightcoveVideoPlayer._callMethod("mute",
[Boolean(a)]);this.dispatch("volumechange");return a}return this._muted},volume:function(a){if(void 0!==a){this._volume=a;if(!this.isReady())return a;this.brightcoveVideoPlayer._callMethod("setVolume",[a]);this.dispatch("volumechange")}return this._volume},src:function(a){if(void 0!==a)this._src=a,this._readyState=0,this._duration=NaN,this._currentTime=0,this.startVideo();return this._src},autoplay:function(a){if(null!=a)this._autoplay=Boolean(a);return this._autoplay},preload:function(a){if(null!=
a)this._preload=a;return this._preload},readyState:function(){return this._readyState}}})();
(function(){var c=jQuery,f={updateIntervalMsec:500,seekDetectSec:1.5},d=function(){var a=Array.prototype.slice.call(arguments);a.unshift("flowplayer");MetaPlayer.log.apply(null,a)},a=function(b,e){if(!(this instanceof a))return new a(b,e);this._readyState=0;this._preload="auto";this._autoplay=!1;this._duration=NaN;this._currentTime=0;this._paused=!0;this._muted=this._seeking=this._ended=!1;this._volume=1;this._buffered=!1;this._controls=!0;this._index=null;this._autoAdvance=!0;this._loop=!1;this._flowplayer=
b;this.ad=!1;this._hasFiredBegin={};if(this._flowplayer.getPlaylist()&&this._flowplayer.getPlaylist()[0]&&this._flowplayer.getPlaylist()[0].url)this._src=this._flowplayer.getPlaylist()[0].url;this.config=c.extend(!0,{},f,e);this.dispatcher=MetaPlayer.dispatcher(this);this.video=MetaPlayer.proxy.proxyPlayer(this,this._flowplayer.getParent());this.getPlaylist().length&&MetaPlayer.Playlist.proxy(this,this.video);this._timeupdater=MetaPlayer.timer(this.config.updateIntervalMsec);this._timeupdater.listen("time",
this._onTime,this);this._init()};MetaPlayer.Players.FlowPlayer=function(b){return!(b.getCommonClip instanceof Function)?null:a(b).video};MetaPlayer.flowplayer=function(a){return MetaPlayer.Players.FlowPlayer(a)};a._isAd=function(a){return a.isCommon||a.ovaAd||a.isInStream||!a.url};a.prototype={_init:function(){this._hlsplugin=null!=this._flowplayer.getPlugin("httpstreaming");this._youtube=null!=this._flowplayer.getPlugin("youtube");if(this._flowplayer.isLoaded())this._onLoad();else this._flowplayer.onLoad(this._async(this._onLoad))},
_onLoad:function(){d("fp: onLoad()",this.volume());if(!this._onLoadFired){this._onLoadFired=!0;var a=this._flowplayer;a.onVolume(this._bind(function(){d("fp: onVolume()");this._volume=this._flowplayer.getVolume()/100;this.dispatch("volumechange")}));a.onMute(this._bind(function(){d("fp: onMute()");this._muted=!0;this.dispatch("volumechange")}));a.onUnmute(this._bind(function(){d("fp: onUnmute()",this._readyPlaying);this._muted=!1;this.dispatch("volumechange")}));a.onPlaylistReplace(this._async(function(){d("fp: onPlaylistReplace()");
this._index=null;this._addPlaylistListeners()}));a.onClipAdd(this._async(function(a){d("fp: onClipAdd()");this._addClipListeners(a);this.dispatch("playlistchange")}));this._playlist?this.setPlaylist(this._playlist):this._addPlaylistListeners();this._loadSrc&&this._setItem(this._loadSrc);this.volume(this._volume);this.controls(this._controls)}},_addPlaylistListeners:function(){c.each(this._flowplayer.getPlaylist(),this._bind(function(a,e){this._addClipListeners(e)}));this.dispatch("playlistchange")},
_addClipListeners:function(b){if(b){var e=this._bind(function(b){d("fp: on*Begin() ",this._index,b.index,b.url,this.ad);if(this._hasFiredBegin[b.url])d("fp: on*Begin() skip",this._index,b.index,b.url,this.ad);else{this._hasFiredBegin[b.url]=!0;this._timeupdater.reset();var e=this._getIndexByClip(b);e!=this._index&&(this._doTrackChange(e),this.dispatch("loadstart"));if(a._isAd(b)){if(!this.ad)this.ad=!0,this.dispatch("adstart")}else if(this.ad)this.ad=!1,this.dispatch("adstop");this._currentTime=0;
this._paused=!1;this._src=b.url;if(this._ended)this._ended=!1,this.dispatch("play");this.dispatch("playing");this._timeupdater.start()}});b.onBeforeBegin(e);b.onBegin(e);b.onUpdate(this._async(function(a){d("fp: onUpdate",a.index,this._index,this._paused,a.url);this._paused||(this._flowplayer.stopBuffering(),this._flowplayer.play())}));b.onBufferFull(this._async(function(){d("fp: onBufferFull");this._buffered=!0;MetaPlayer.iOS&&this.play()}));b.onBufferEmpty(this._async(function(){d("fp: onBufferEmpty");
this._buffered=!0}));b.onBufferStop(this._async(function(){d("fp: onBufferStop");this._buffered=!0}));b.onStart(this._async(function(){d("fp: onStart()",this._readyState);if(MetaPlayer.iOS&&!this._hasPlayed)this._hasPlayed=!0,this._setHTML5Controls(!1)}));b.onStop(this._async(function(){d("fp: onStop()")}));b.onBeforeFinish(this._bind(function(){d("fp: onBeforeFinish() ",this._autoAdvance)}));b.onFinish(this._bind(function(a){d("fp: onFinish()");this._hasFiredBegin[a.url]=void 0;this._ended=this._paused=
!0;if(this.ad){var b=this;setTimeout(function(){b.ad=!1;b.dispatch("adstop")},1E3)}else this._delay(function(){this.dispatchIfClip("ended")});!this._autoAdvance&&!this.ad&&this._flowplayer.pause();return!1}));b.onPause(this._async(function(){d("fp: onPause() ",this._flowplayer.isPaused(),this._flowplayer.isPlaying())}));b.onResume(this._async(function(){d("fp: onResume()");this._ended=this._paused=!1;this.dispatch("play");this.dispatch("playing")}));b.onBeforeSeek(this._async(function(){d("fp: onBeforeSeek()");
this._seeking=!0;this.dispatch("seeking")}));b.onSeek(this._async(function(){d("fp: onSeek()")}))}},_setItem:function(a){this._flowplayer.setPlaylist([this._createClipData(a)]);"none"!=this._preload&&this.load()},_onTime:function(){if(this._flowplayer.isLoaded()){var a=this._flowplayer.getClip();if(a){var e=this._flowplayer.getStatus(),c=e.time-this._currentTime,g=!1;this._paused&&Math.abs(c)>this.config.seekDetectSec&&(g=!0);if(Math.abs(c)>this.config.seekDetectSec||0>c)g=!0;if(c)this._currentTime=
e.time,this.dispatchIfClip("timeupdate");if(g)this._seeking=!1,this.dispatchIfClip("seeked"),this._paused||this.dispatch("playing");if(!this.ad&&isNaN(this._duration)&&0<e.time&&a&&0<a.duration)this._duration=a.duration,this.dispatch("durationchange");if(4!=this._readyState&&("none"!=this._preload||this._autoplay))if(d("fp: _onTime _readyState check",this._readyState,this._buffered,e.time,a.duration,e),a=this._flowplayer,0==this._readyState&&(!this._duration||!this._buffered)&&this._paused&&!this._error)d("fp: _onTime play() get metadata",
this._duration,this._buffered),this._paused=!1,a.play(),this._readyState=1;else if(this._buffered)this._autoplay?!this._paused&&a.isPlaying()?this._doClipReady():(d("fp: _onTime play() autoplay=true"),this._paused=!1,a.play()):a.isPlaying()?(d("fp: _onTime play() autoplay=false",this._autoplay),this.pause()):this._doClipReady()}}},_doClipReady:function(){this._readyState=4;var a=this._paused;this._paused=!0;this.dispatchIfClip("loadedmetadata");this.dispatchIfClip("loadeddata");this.dispatchIfClip("canplay");
this._paused=a},_getFilteredPlaylist:function(){return c.map(this._flowplayer.getPlaylist(),function(b){return a._isAd(b)?null:b})},_doTrackChange:function(a){this._index=a;this._seeking=!1;this._currentTime=this._readyState=0;this._duration=NaN;this._ended=this._buffered=!1;this.dispatch("trackchange")},load:function(){d("load()");this._preload="auto";if(4!=this._readyState){var a=this._flowplayer;d("load : fpplay() ",this._readyState);this._paused=!1;a.play()}},play:function(){this._autoplay=!0;
this._paused=!1;this._ended?(this._flowplayer.stop(),this._delay(this._bind(function(){var a=this._flowplayer.getClip().index;d("play fp.play() ",a);this._flowplayer.play(a)}))):4==this._readyState?(d("play fp.play() ",this._readyState),this._flowplayer.play()):this.load()},pause:function(){d("pause()");this._paused=!0;this._flowplayer.pause();this.dispatch("pause")},src:function(a){var e=this._flowplayer.isLoaded();if(null!=a)e?this._setItem(a):this._loadSrc=a;return this._src},readyState:function(){return this._readyState},
currentTime:function(a){if(this.ad)return 0;null!=a&&(0>a&&(a=0),d("currentTime fp.seek",a),this._flowplayer.seek(a));return this._currentTime},duration:function(){return this._duration},seeking:function(){return this._seeking},preload:function(a){if(null!=a)this._preload=a;return this._preload},autoplay:function(a){if(null!=a)this._autoplay=a;return this._autoplay},paused:function(){return Boolean(this._paused)},muted:function(a){void 0!==a&&(a?this._flowplayer.mute():this._flowplayer.unmute());
return this._muted},controls:function(a){if(null!=a)this._controls=a;if(MetaPlayer.iOS)if(this._hasPlayed)this._setHTML5Controls(!1);else{this._setHTML5Controls(!0);return}if(this._flowplayer.isLoaded()){var e=this._flowplayer.getPlugin("controls"),d=this._flowplayer.getPlugin("play");a?(e&&e.show(),d&&d.show()):(e&&e.hide(),d&&d.hide());return this._controls}},ended:function(){return this._ended},volume:function(a){void 0!==a&&this._flowplayer.setVolume(100*a);return this._flowplayer.getVolume()/
100},canPlayType:function(a){var e=null;if(window.flashembed.__replaced){if(!this._video)this._video=document.createElement("video");MetaPlayer.iOS&&a.match(/mpegurl|m3u8/i)?e="probably":this._video.canPlayType&&(e=this._video.canPlayType(a))}else this._youtube&&a.match(/youtube$/i)?e="probably":this._hlsplugin&&a.match(/mpegurl|m3u8/i)?e="probably":a.match(/mp4|flv|jpg/)&&(e="probably");return e},getPlaylist:function(){return c.map(this._getFilteredPlaylist(),function(a){return a.guid||a.url})},
setPlaylist:function(a,e){var d=[],c=this._flowplayer;if(c.isLoaded()){a.length||(a=[a]);var f,h;for(h=0;h<a.length;h++)f=this._createClipData(null,a[h]),e?c.addClip(f):d.push(f);this._index=this._playlist=null;c.setPlaylist(d)}else this._playlist=a},_getIndexByClip:function(a){var e=0;c.each(this._getFilteredPlaylist(),function(d,c){if(c.index>=a.index)return e=d,!1});return e},_getOffsetFromIndex:function(b){var e=0,d=null;c.each(this._flowplayer.getPlaylist(),function(c,f){if(b==e)return d=c,!1;
a._isAd(f)||e++});return d},getIndex:function(a){var e=this.getPlaylist();if(null==a)return this._index;0>a&&this._loop&&(a=e.length+a);return!this._loop&&(a>=e.length||0>a)?null:a%e.length},setIndex:function(a){if(null==a||isNaN(a))return null;a=this.getIndex(a);if(null==a)return!1;a=this._getOffsetFromIndex(a);d("setIndex fp.play()",a);this._paused=!1;this._flowplayer.play(a);return!0},getItem:function(a){return this.getPlaylist()[this.getIndex(a)]},updateItem:function(){},autoAdvance:function(a){if(null!=
a)this._autoAdvance=a;return this._autoAdvance},loop:function(a){if(null!=a)this._loop=a;return this._loop},next:function(){d("next()");return this.setIndex(this._index+1)},previous:function(){d("previous()");return this.setIndex(this._index-1)},_createClipData:function(a,e){var d={},c=this._flowplayer.getConfig();if(!a&&!e)return d;if(this._youtube&&a&&a.match(/youtube\.com/i)){d.provider="youtube";d.urlResolvers="youtube";var f=a.match(/www.youtube.com\/(watch\?v=|v\/)([\w-]+)/)[2];d.url="api:"+
f}else d.url=a;if(a.match(/\.m3u8$/))d.provider="httpstreaming",d.urlResolvers="httpstreaming";if(e)d.guid=e;d.autoPlay=!1;d.autoBuffering=!1;d.scaling=c.clip.scaling;return d},_setHTML5Controls:function(a){var e=c(this._flowplayer.getParent()).find("video").get(0);e&&(e.controls=a)},dispatchIfClip:function(a){this.ad?a.match(/^time/)||d("skip e:",a):(a.match(/^time/)||d("e:",a),this.dispatch(a))},_delay:function(a,e){null==e&&(e=0);var d=this._bind(a);setTimeout(d,e)},_async:function(a,e){null==
e&&(e=0);var d=this;return function(){var c=arguments;setTimeout(function(){a.apply(d,c)},e)}},_bind:function(a){var e=this;return function(){return a.apply(e,arguments)}}}})();
(function(){var c=jQuery,f=function(d){"string"==typeof d&&(d=c(d).get(0));return!d||!d.play||!d.canPlayType?null:d};f.create=function(d){d=c(d);d=c("<video></video>").height(d.height()).width(d.width()).appendTo(d).get(0);d.controls=!0;return d};MetaPlayer.Players.HTML5=f;MetaPlayer.html5=function(d){return f.create(d)};MetaPlayer.addPlayer("html5",function(){this.video=f.create(this.layout.base)})})();
(function(){var c=function(f){if(!(this instanceof c))return new c(f);this._jwplayer=f;this._volume=0;this._seeking=null;this._readyState=0;this._ended=!1;this._paused=!0;this._duration=NaN;this._metadata=null;this._started=this._muted=!1;this._currentTime=0;this._src="";this.dispatcher=MetaPlayer.dispatcher(this);this.video=MetaPlayer.proxy.proxyPlayer(this,this._jwplayer.container);MetaPlayer.Playlist.proxy(this,this.video);this._autoplay=this._jwplayer.config.autostart;this._preload=this._jwplayer.config.autobuffer;
this._onLoad()};MetaPlayer.jwplayer=function(f){return c(f).video};c.prototype={_onLoad:function(){var c=this,d=this._jwplayer;d.onBuffer(function(){c._readyState=4});d.onBufferChange(function(){});d.onBufferFull(function(){});d.onError(function(){});d.onFullscreen(function(){});d.onMeta(function(){});d.onMute(function(a){c._muted=a.mute});d.onPlaylist(function(){});d.onPlaylistItem(function(a){a=c._jwplayer.getPlaylistItem(a.index);c._src=a.sources[0].file;c._paused=!0});d.onBeforePlay(function(){var a=
function(b){-1==b?setTimeout(function(){a(c._jwplayer.getDuration())},500):(c._paused=!0,c._duration=c._jwplayer.getDuration(),c._volume=c._jwplayer.getVolume(),c.dispatch("loadedmetadata"),c.dispatch("loadstart"),c.dispatch("loadeddata"),c._readyState=4,c.dispatch("canplay"),c.dispatch("durationchange"))};a(c._jwplayer.getDuration())});d.onPlay(function(){c._paused=!1;c.dispatch("play")});d.onPause(function(){c.dispatch("pause");c._paused=!0});d.onSeek(function(a){c._seeking=!1;c.dispatch("seeked");
c.dispatch("timeupdate");c._currentTime=a.position});d.onIdle(function(){});d.onComplete(function(){c._paused=!0;c._ended=!0;c.dispatch("ended")});d.onTime(function(a){c._currentTime=a.position;c.dispatch("timeupdate");c.dispatch("playing");this_seeking=c._paused=!1});d.onVolume(function(a){c._volume=a.volume})},autoplay:function(c){if(null!==c)this._autoplay=Boolean(c);return this._autoplay},preload:function(c){if(null!=c)this._preload=c;return this._preload},_doSeek:function(c){this._currentTime=
c;this._seeking=!0;this.dispatch("seeking");this._jwplayer.seek(c)},_isReady:function(){return this._jwplayer.getState()},_bind:function(c){var d=this;return function(){return c.apply(d,arguments)}},_getVideoContainer:function(c){return c.container?c.container.parentElement:c},load:function(){if(this._isReady()&&(this.dispatch("loadstart"),this.src())){var c=this._jwplayer,d=this._jwplayer.getPlaylistItem();if(!d||d.file!=this.src())c.load({file:this._src,type:this._src.match(".mov")&&6<=jwplayer.version.split(".")[0]?
"mp4":void 0});c.play()}},play:function(){this._autoplay=!0;this._ended?(this._jwplayer.seek(0),this._restorePaused=!1):this.load()},pause:function(){if(!this._paused)this._autoplay=!1,this._paused=!0,this._jwplayer.pause()},canPlayType:function(c){switch(c){case "application/x-fcs":case "application/x-shockwave-flash":case "audio/aac":case "audio/m4a":case "audio/mp4":case "audio/mp3":case "audio/mpeg":case "audio/x-3gpp":case "audio/x-m4a":case "image/gif":case "image/jpeg":case "image/png":case "video/flv":case "video/3gpp":case "video/h264":case "video/mp4":case "video/x-3gpp":case "video/x-flv":case "video/x-m4v":case "video/x-mp4":case "video/mov":return"probably";
case "application/smil":return"maybe";case "application/application.vnd.apple.mpegurl":case "application/x-mpegURL":return"maybe";case "video/youtube":return"maybe";default:return""}},paused:function(){return this._paused},duration:function(){return this._duration},seeking:function(){return Boolean(this._seeking)},ended:function(){return this._ended},currentTime:function(c){if(void 0!=c)0>c&&(c=0),this._ended=!1,this._doSeek(c);return this._currentTime},readyState:function(c){if(void 0!=c)this._readyState=
c;return this._readyState},muted:function(c){return void 0!=c?(this._muted=c,this._jwplayer.setMute(c),this.dispatch("volumechange"),c):this._muted},volume:function(c){if(null!=c&&c!=this._volume)this._volume=c,this._jwplayer.setVolume(1>=this._volume?100*this._volume:this._volume),this.dispatch("volumechange");return 1<this._volume?this._volume/100:this._volume},src:function(c){if(void 0==c)return this._isReady()?this._src||this._jwplayer.getPlaylistItem().file:this._src;this._src=c;this.autoplay()&&
this.play();"none"!=this._preload&&this.load();return this._src},mpf_resize:function(c,d){if(this._height!=d||this._width!=c)this._height=d,this._width=c,this._jwplayer.resize(c+"px",d+"px")}}})();
(function(){var c=function(c){this._src="";this._currentTime=0;this._duration=NaN;this._paused=!0;this._ended=!1;this._autoplay=!0;this._loop=!1;this._autobuffer=!0;this._seeking=!1;this._volume=1;this._muted=!1;this._readyState=0;MetaPlayer.dispatcher(this);this.kdp=document.getElementById(c);this.video=MetaPlayer.proxy.proxyPlayer(this,this.kdp);this.addListeners()};MetaPlayer.kaltura=function(f){return(new c(f)).video};c.prototype={init:function(){},isReady:function(){return this.kdp},addListeners:function(){var c=
this.kdp,d=this;window.kdpCallback_onMediaBegin=function(){d._ended=!1;d._paused=!1;d.dispatch("play");d.dispatch("playing")};window.kdpCallback_onMediaPaused=function(){d._paused=!0;d._ended=!1;d.dispatch("pause")};window.kdpCallback_onMediaChange=function(){};window.kdpCallback_onDurationChange=function(a){if(d._duration!==a.newValue)d._duration=a.newValue,d.dispatch("durationchange")};window.kdpCallback_onMediaProgress=function(a){if(d._seeking)d._seeking=!1,d.dispatch("seeked");d._currentTime=
a;d.dispatch("timeupdate")};window.kdpCallback_onMediaComplete=function(){d._ended=!0;d._paused=!0;d._duration=NaN;d.dispatch("ended")};window.kdpCallback_onEntryReady=function(a){if(4>d._readyState)d._readyState=4,d.dispatch("loadstart"),d.dispatch("canplay");d.dispatch("loadedmetadata");d.dispatch("loadeddata");d._duration=a.duration;d.dispatch("durationchange")};c.addJsListener("entryReady"," kdpCallback_onEntryReady");c.addJsListener("playerPlayed","kdpCallback_onMediaBegin");c.addJsListener("playerPaused",
"kdpCallback_onMediaPaused");c.addJsListener("playerPlayEnd","kdpCallback_onMediaComplete");c.addJsListener("durationChange","kdpCallback_onDurationChange");c.addJsListener("playerUpdatePlayhead","kdpCallback_onMediaProgress")},startVideo:function(){if(this.isReady()){this._ended=!1;var c=this._src;if(c){if(4>this._readyState)this._readyState=4,this.dispatch("loadstart"),this.dispatch("canplay");if(this._autoplay){this.kdp.sendNotification("changeMedia",{entryId:c});var d=this;setTimeout(function(){d.kdp.sendNotification("doPlay")},
500)}else this._preload&&this.load()}}},doSeek:function(c){this._seeking=!0;this.dispatch("seeking");this.kdp.sendNotification("doSeek",parseFloat(c));this._currentTime=c},load:function(){this._preload=!0;this.isReady()&&this.kdp.sendNotification("changeMedia",{entryId:this._src})},play:function(){this._autoplay=!0;this.isReady()&&this.kdp.sendNotification("doPlay")},pause:function(){this.isReady()&&this.kdp.sendNotification("doPause")},canPlayType:function(c){return Boolean(c.match(/\/kaltura$/))},
paused:function(){return this._paused},duration:function(){return this._duration},seeking:function(){return this._seeking},ended:function(){return!this.isReady()?!1:this._ended},currentTime:function(c){if(!this.isReady())return 0;if(void 0!==c)this._ended=!1,this.doSeek(c);return this._currentTime},muted:function(c){if(void 0!==c){this._muted=c;if(!this.isReady())return c;this.dispatch("volumechange");return c}return this._muted},volume:function(c){if(void 0!==c){this._volume=c;if(!this.isReady())return c;
this.kdp.sendNotification("changeVolume",c);this.dispatch("volumechange")}return this._volume},src:function(c){if(void 0!==c)this._src=c,this.startVideo();return this._src},readyState:function(){return this._readyState}}})();
(function(){var c=jQuery,f=function(){this._src="";this._currentTime=0;this._duration=NaN;this._paused=!0;this._loop=this._ended=!1;this._autobuffer=!0;this._seeking=!1;this._preload="none";this._autoplay=!1;this._volume=1;this._muted=!1;this._readyState=0;var d=c('script[src*="//player.ooyala.com/player.js"]').get(0),a=function(a,e){var a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),c=RegExp("[\\?&]"+a+"=([^&#]*)").exec(e);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))};this.playerId=
a("playerId",d.src);this.playerCallback=a("callback",d.src);this.onReady();this.init()};MetaPlayer.ooyala=function(){return(new f).video};f.prototype={init:function(){this.addListeners();this.startVideo()},isReady:function(){return!0},addListeners:function(){var c=this;window[this.playerCallback]=function(a,b,e){switch(b){case "playheadTimeChanged":c.onMediaProgress(e);break;case "stateChanged":switch(e.state){case "buffering":c.onMediaBegin();break;case "playing":c.onMediaPlay();break;case "paused":c.onMediaPause()}break;
case "seeked":c.onMediaSeekNotify(e);break;case "playComplete":c.onMediaComplete();break;case "embedCodeChanged":c.onMediaChange(e)}}},onReady:function(){this.ooyalaPlayer=c("#"+this.playerId).get(0);MetaPlayer.dispatcher(this);this.video=MetaPlayer.proxy.proxyPlayer(this,this.ooyalaPlayer)},onMediaChange:function(c){this._src=c.embedCode;this._currentTime=0;this._duration=c.time;this._seekOnPlay=null;this._hasBegun=!1;this._readyState=4;this.dispatch("canplay");this.dispatch("loadstart");this.dispatch("loadedmetadata");
this.dispatch("loadeddata");this.dispatch("durationchange")},onMediaComplete:function(){this._currentTime=0;this._paused=this._ended=!0;this.dispatch("ended")},onMediaError:function(){},onMediaPlay:function(){this._paused=this._ended=!1;this._hasBegun=!0;this.dispatch("playing");this.dispatch("play")},onMediaBegin:function(){this._hasBegun=!0},onMediaProgress:function(c){this._currentTime=c.playheadTime;this.dispatch("timeupdate")},onMediaSeekNotify:function(c){this._seeking=!1;this.dispatch("seeked");
this.dispatch("timeupdate");this._currentTime=c.newPlayheadTime},onMediaPause:function(){this._paused=!0;this._ended=!1;this.dispatch("pause")},startVideo:function(){this._ended&&this.currentTime(0);this._ended=!1;this.muted(this._muted);var c=this._src;c&&(this.dispatch("loadstart"),this.ooyalaPlayer.setQueryStringParameters({embedCode:c}),this._autoplay&&this.ooyalaPlayer.playMovie())},doSeek:function(c){this._currentTime=c;if(!this._hasBegun)this._seekOnPlay=c;this._seeking=!0;this._seekOnPlay=
null;this.dispatch("seeking");this.ooyalaPlayer.setPlayheadTime(c)},load:function(){this._preload="auto";this.startVideo()},play:function(){this._autoplay=!0;"none"==this._preload?this.startVideo():this.ooyalaPlayer.playMovie()},pause:function(){return this.ooyalaPlayer.pauseMovie()},canPlayType:function(c){MetaPlayer.log("ooyala","canPlayType?",c);return Boolean(c.match(/\/ooyala$/))},paused:function(){return this._paused},duration:function(){return this._duration},seeking:function(){return this._seeking},
ended:function(){return this._ended},currentTime:function(c){if(void 0!==c)this._ended=!1,this.doSeek(c);return this._currentTime},muted:function(c){return void 0!=c?((this._muted=c)&&this.ooyalaPlayer.setVolume(0),this.dispatch("volumechange"),c):this._muted},volume:function(c){if(null!=c&&c!=this._volume)this._volume=c,this.ooyalaPlayer.setVolume(c),this.dispatch("volumechange");return 1<this._volume?this._volume/100:this._volume},src:function(c){if(void 0!==c)this._src=c,this._duration=NaN,this._currentTime=
0,this.startVideo();return this._src},autoplay:function(c){if(null!=c)this._autoplay=Boolean(c);return this._autoplay},preload:function(c){if(null!=c)this._preload=c;return this._preload},readyState:function(){return this._readyState}}})();
(function(){var c=jQuery,f=window.ovp,d={strategy:{order:["HTML5","Flash","Silverlight"]},sliderdelay:5E3,sliderspeed:"slow",immediately:!1,controls:{src_img:"/images/play.png"},ovp_container_class:"ovp",controller_keepalive_seconds:5,players:{Flash:{src:"ovp-2.1.6.swf",minver:"10",controls:!1,plugins:[]},Silverlight:{src:"ovp-2.3.1.xap",minver:"4.0",controls:!1,plugins:[]},HTML5:{minver:"0",controls:!1}},status_timer:500,ovpConfig:{sources:[{src:"/videos/trailer.ogv",type:"video/ogg"},{src:"/videos/trailer.mp4",
type:"video/mp4"}],width:"100%",height:"100%",posterimg:"/images/poster.png",autobuffer:!0,autoplay:!1,id:"ovp",scalemode:"fit",controls:!1}},a=function(b,e){if(!(this instanceof a))return new a(b,e);this.config=c.extend(!0,{},d,e);this.__readyState=0;this.__paused=!this.config.immediately;this.__duration=NaN;this.__controls=this.__seeking=this.__ended=!1;this.__volume=1;this.__muted=!1;this.__src="";this.__status=0;this._ovp=this._render(c(b).get(0));this.video=c(b).get(0);this.dispatcher=MetaPlayer.dispatcher(this);
MetaPlayer.proxy.proxyPlayer(this,this.video);this._setControls();this._addEventListeners()};window.MetaPlayer?MetaPlayer.addPlayer("ovp",function(b){var e=c("<div></div>").appendTo(this.layout.base);this.ovp=a(e,b);this.video=this.ovp.video}):window.MetaPlayer={};MetaPlayer.ovp=function(b,e){return a(b,e).video};a.prototype={_render:function(a){var e=this.config.immediately;if(!e)this.config.immediately=!0;f.init(this.config);this.config.immediately=e;return f.render(a,this.config.ovpConfig)[0]},
_addEventListeners:function(){this._loadtimer=MetaPlayer.timer(this.config.status_timer);this._loadtimer.listen("time",this._onBeforeLoad,this);this._loadtimer.start();this._statustimer=MetaPlayer.timer(this.config.status_timer);this._statustimer.listen("time",this._onStatus,this)},_onBeforeLoad:function(){"object"===typeof this._ovp.player&&(this.dispatch("loadstart"),this._loadtimer.reset(),this._onReady(),this._startDurationCheck())},_onReady:function(){this._statustimer.start();this.__readyState=
4;this.dispatch("loadeddata");this.dispatch("canplay");this.load();this.__status=1;this.video.pause();(this.config.immediately||this.config.ovpConfig.autoplay)&&this.video.play()},_startDurationCheck:function(){var a=this;if(!this._durationCheckInterval)this._durationCheckInterval=setInterval(function(){a._onDurationCheck()},1E3)},_onDurationCheck:function(){var a=this._ovp.getDuration();if(0<a)this.__duration=a,this.dispatch("loadeddata"),this.dispatch("loadedmetadata"),this.dispatch("durationchange"),
this.dispatch("timeupdate"),clearInterval(this._durationCheckInterval),this._durationCheckInterval=null},_onStatus:function(){this._ovp.isPlaying()?(this.__paused=!1,2!==this.__status&&this.dispatch("play"),this.dispatch("timeupdate"),this.__status=2):this._ovp.isEnded()?(this.__paused=!0,5!==this.__status&&this.dispatch("ended"),this.__status=5):(this.__paused=!0,3!==this.__status&&this.dispatch("pause"),this.__status=3)},_setControls:function(){if("RENDERED"===this._ovp.controlsState)this.__controls=
this._ovp.controls},_getCurrentTimeFromCache:function(){if(!this._ovp.player)return 0;var a=(new Date).getTime(),e=this.__currentTimeCache,c=a-e;if(e&&c<this.config.status_timer)return this.__currentTime+c/1E3;this.__currentTimeCache=a;a=this._ovp.getCurrentTime();return this.__currentTime=0>a?0:a},doSeek:function(a){this.__seeking=!0;this.dispatch("seeking");this._ovp.seekTo(a);this.__currentTime=a;this.__status=4;var e=this;setTimeout(function(){e.updateTime();e.__seeking=!1;e.dispatch("seeked");
e.dispatch("timeupdate")},1500)},updateTime:function(){this.__currentTime=this._ovp.getCurrentTime()},load:function(){if(this._ovp.player){var a=this.src();if(a)this.config.ovpConfig.sources=[{src:a}]}},play:function(){this.__paused=!1;this._ovp.playpause()},pause:function(){this.__paused=!0;this._ovp.playpause()},canPlayType:function(){return this._ovp.canPlay()},paused:function(){return this.__paused},duration:function(){return this.__duration},seeking:function(){return this.__seeking},ended:function(){return this.__ended},
currentTime:function(a){if("undefined"!==typeof a){0>a&&(a=0);if(a>this.duration)a=this.duration;this.doSeek(a)}return this._getCurrentTimeFromCache()},readyState:function(a){if(void 0!==a)this.__readyState=a;return this.__readyState},muted:function(a){if(null!=a){this.__muted=a;if(!this._ovp)return a;this._ovp.mutetoggle();this.dispatch("volumechange");return a}return this.__muted},volume:function(a){if(null!=a){this.__volume=a;if(!this._ovp)return a;this._ovp.mutetoggle();this.dispatch("volumechange")}return this.__volume},
src:function(a){if(void 0!==a)this.__src=a;return this.__src},controls:function(a){if("undefined"!==typeof a||!1!=a)this.__controls=a;return this.__controls}}})();
(function(){var c=jQuery,f=function(d,a){if(!(this instanceof f))return new f(d,a);this._src="";this._currentTime=0;this._paused=!0;this._loop=this._ended=!1;this._autobuffer=!0;this._seeking=!1;this._duration=NaN;this._volume=1;this._muted=!1;this._readyState=0;this._preload="none";this._autoplay=!1;this.dispatcher=MetaPlayer.dispatcher(this);this.playerId=d;this.player=c("#"+d).get(0);this.video=MetaPlayer.proxy.proxyPlayer(this,this.player);var b=this.video.addEventListener;this.video.addEventListener=
function(a,c){b.apply(this,[a,c])};this.addListeners(a)};MetaPlayer.strobemediaplayback=function(c,a){return f(c,a).video};f.prototype={isReady:function(){return Boolean(this.player&&"loading"!=this.player.getState())},addListeners:function(c){var a=this;window[c]=function(b,c,d){switch(c){case "loadstart":a.onLoadStart(d);break;case "durationchange":a.onMediaChange(d);break;case "complete":a.onMediaComplete();break;case "play":a.onMediaPlay(d);break;case "timeupdate":a.onMediaProgress(d);break;case "seeked":a.onMediaSeekNotify(d);
break;case "pause":a.onMediaPause()}};return this},onLoadStart:function(){this._readyState=4;this.dispatch("loadstart")},onMediaChange:function(c){if(!isNaN(c.duration))this._duration=c.duration,this.dispatch("loadedmetadata"),this.dispatch("loadeddata"),this.dispatch("canplay"),this.dispatch("durationchange");this._currentTime=0;this._seekOnPlay=null;this._hasBegun=!1;this._paused=this._autoplay?!1:!0},onMediaComplete:function(){this._paused=this._ended=!0;this.dispatch("ended")},onMediaError:function(){},
onMediaPlay:function(c){this._ended=c.ended;this._paused=!1;this._hasBegun=!0;this.dispatch("play");this.dispatch("playing")},onMediaBegin:function(){this._hasBegun=!0},onMediaProgress:function(c){this._currentTime=c.currentTime;this.dispatch("timeupdate")},onMediaSeekNotify:function(){this._seeking=!1;this.dispatch("seeked");this.dispatch("timeupdate")},onMediaPause:function(){this._paused=!0;this.dispatch("pause")},startVideo:function(){if(this.isReady()&&"none"!=this._preload){this._ended&&this.currentTime(0);
this._ended=!1;var c=this._src;c&&(this._autoplay?(this.player.setMediaResourceURL(c),this.player.play2()):this.player.setMediaResourceURL(c))}},doSeek:function(c){this._currentTime=c;if(!this._hasBegun)this._seekOnPlay=c;this._seeking=!0;this._seekOnPlay=null;this.dispatch("seeking");"ready"!=this.player.getState()&&this.player.canSeekTo(c)&&this.player.seek(c);this._seeking=!1;this.dispatch("seeked");this.dispatch("timeupdate")},load:function(){this._preload="auto";this.startVideo()},play:function(){this._paused=
!1;this._preload="auto";this._autoplay=!0;4==this._readyState?this.player.play2():this.startVideo()},pause:function(){this.isReady()&&this.player.pause()},canPlayType:function(c){switch(c){case "video/strobe":case "appplication/strobe":case "application/x-fcs":case "application/x-shockwave-flash":case "audio/aac":case "audio/m4a":case "audio/mp4":case "audio/mp3":case "audio/mpeg":case "audio/x-3gpp":case "audio/x-m4a":case "image/gif":case "image/jpeg":case "image/png":case "video/flv":case "video/3gpp":case "video/h264":case "video/mp4":case "video/x-3gpp":case "video/x-flv":case "video/x-m4v":case "video/x-mp4":case "video/mov":return"probably";
case "application/application.vnd.apple.mpegurl":case "application/x-mpegURL":return"maybe";default:return""}},paused:function(){return this._paused},duration:function(){return this._duration},seeking:function(){return this._seeking},ended:function(){return!this.isReady()?!1:this._ended},currentTime:function(c){if(!this.isReady())return this._currentTime=c||0,0;if(void 0!==c)this._ended=!1,this.doSeek(c);return this._currentTime},muted:function(c){if(void 0!=c)this._muted=Boolean(c),this.isReady()&&
this.player.setVolume(this._muted?0:this._volume),this.dispatch("volumechange");return this._muted},volume:function(c){if(void 0!=c)this._volume=c,this.muted(this._muted);return this._volume},src:function(c){if(void 0!=c)this._src=c,this._readyState=0,this._duration=NaN,this._currentTime=0,this.startVideo();return this._src},autoplay:function(c){if(null!=c)this._autoplay=Boolean(c);return this._autoplay},preload:function(c){if(null!=c)this._preload=c;return this._preload},readyState:function(){return this._readyState}}})();
(function(){var c=jQuery,f=function(d){if(!(this instanceof f))return new f(d);this._src="";this._currentTime=0;this._paused=!0;this._autoplay=this._ended=!1;this._preload="none";this._loop=!1;this._autobuffer=!0;this._seeking=!1;this._volume=1;this._muted=!1;this._readyState=0;this._seekingWhilePaused=!1;this._seekingWhilePausedTime=NaN;this.dispatcher=MetaPlayer.dispatcher(this);this.video=MetaPlayer.proxy.proxyPlayer(this,c("#"+d).get(0));this.addListeners();c(d).css({width:"100%",height:"100%"})};
MetaPlayer.theplatform=function(c){return f(c).video};f.prototype={init:function(){},isReady:function(){return tpController},addListeners:function(){var c=tpController,a=this;c.addEventListener("OnMediaPause",function(b){a.onMediaPause(b)});c.addEventListener("OnMediaUnpause",function(b){a.onMediaUnpause(b)});c.addEventListener("OnMediaStart",function(b){a.onMediaStart(b)});c.addEventListener("OnReleaseStart",function(b){a.onReleaseStart(b)});c.addEventListener("OnMediaPlay",function(b){a.onReleaseStart(b)});
c.addEventListener("OnLoadReleaseUrl",function(b){a.onMediaChange(b)});c.addEventListener("OnSetReleaseUrl",function(b){a.onMediaChange(b)});c.addEventListener("OnMediaEnd",function(b){a.onMediaEnd(b)});c.addEventListener("OnMediaError",function(b){a.onMediaError(b)});c.addEventListener("OnMediaPlaying",function(b){a.onMediaPlaying(b)});c.addEventListener("OnMediaSeek",function(b){a.onMediaSeek(b)})},onReleaseStart:function(){this._paused=this._ended=!1;this.dispatch("play");this.dispatch("playing")},
onMediaStart:function(c){c.data.baseClip.isAd?this.dispatch("adstart"):(this._currentTime=0,this.onMediaDuration(c))},onMediaDuration:function(c){if("object"==typeof c.data)this._duration=c.data.length||c.data.duration,this._src=c.data.url,this.dispatch("durationchange",this._duration)},onMediaChange:function(c){if(4>this._readyState)this._readyState=4,this.dispatch("loadstart"),this.dispatch("canplay");this.dispatch("loadedmetadata");this.dispatch("loadstart");this.dispatch("canplay");this.dispatch("loadeddata");
this.dispatch("trackchange",c.data)},onMediaEnd:function(c){c.data.baseClip.isAd?this.dispatch("adstop"):(this._ended=this._paused=!0,this._duration=NaN,this._currentTime=0,this.dispatch("ended"))},onMediaError:function(){this.dispatch("error")},onMediaPlaying:function(d){if(!this._seekingWhilePaused)this._currentTime=0.0010*d.data.currentTime;if(0<c("video").length)c("video").get(0).controls=!1;this.dispatch("timeupdate");this.dispatch("playing")},onMediaSeek:function(c){this._currentTime=0.0010*
c.data.end.currentTime;this._seeking=!1;this._paused||setTimeout(function(){tpController.pause(!1);tpController.clickPlayButton()},1E3);this.dispatch("seeked");this.dispatch("timeupdate")},onMediaPause:function(){this._paused=!0;this._ended=!1;this.dispatch("pause")},onMediaUnpause:function(){this._ended=this._paused=!1;this.dispatch("play");this.dispatch("playing");if(this._seekingWhilePaused){var c=this;setTimeout(function(){tpController.seekToPosition(c._seekingWhilePausedTime)},50)}},startVideo:function(){this._ended=
!1;this._muted&&tpController.mute(this._muted);var c=this._src;c&&(this._autoplay?tpController.setReleaseURL(c):"none"!=this._preload&&this.load())},seekWhilePaused:function(){tpController.clickPlayButton();tpController.pause(!1)},doSeek:function(c){this._seeking=!0;this.dispatch("seeking");this._currentTime=c;tpController.seekToPosition(1E3*c)},load:function(){this._preload=!0;tpController.loadReleaseURL(this._src)},play:function(){this._seekingWhilePaused=!1;this._seekingWhilePausedTime=NaN;this._autoplay=
!0;"none"==this._preload?(this._preload="auto",this.startVideo()):(this._paused&&setTimeout(function(){tpController.pause(!1)},500),this._paused&&0==this._currentTime&&tpController.clickPlayButton(),this._paused=!1)},pause:function(){tpController.pause(!this._paused)},canPlayType:function(c){return Boolean(c.match(/\/theplatform$/))},paused:function(){return this._paused},duration:function(){return 0.0010*this._duration},seeking:function(){return this._seeking},ended:function(){return this._ended},
currentTime:function(c){if(void 0!==c)this._ended=!1,this.doSeek(c);return this._currentTime},muted:function(c){return void 0!==c?(this._muted=c,tpController.mute(this._muted),this.dispatch("volumechange"),c):this._muted},volume:function(c){if(void 0!==c)this._volume=c,1>=this._volume&&(c*=100),tpController.setVolume(c),this.dispatch("volumechange");return this._volume},src:function(c){if(void 0!==c)this._src=c,this.startVideo();return this._src},readyState:function(){return this._readyState}}})();
(function(){var c=jQuery,f={autoplay:!1,preload:"auto",updateMsec:500,playerVars:{enablejsapi:1,version:3,autohide:0,autoplay:0,controls:1,fs:1,hd:1,rel:1,showinfo:1,iv_load_policy:0,cc_load_policy:0,wmode:"transparent"}},d=function(a,b){if(!(this instanceof d))return new d(a,b);this.config=c.extend(!0,{},f,b);this.__seeking=!1;this.__readyState=0;this.__muted=this.__ended=!1;this.__paused=!0;this.__duration=NaN;this.__currentTime=0;this.__volume=1;this.__loop=this.config.loop;this.__src="";if(this.config.chromeless){var e=
this.config.playerVars;e.controls=0;e.rel=0;e.showinfo=0}this.preload=this.config.preload;this.autoplay=this.config.autoplay;this.updateMsec=this.config.updateMsec;MetaPlayer.dispatcher(this);"string"==typeof a||!a.getVideoEmbedCode?(this.container=c(a).get(0),this.target=c("<div></div>").appendTo(this.container).get(0),this.init()):(this.youtube=a,e=c(a.a),this.container=c("<div></div>").appendTo(e.parent()).height(e.height()).width(e.width()).append(e).get(0),e.width("100%"),e.height("100%"),this.addListeners());
this.video=MetaPlayer.proxy.proxyPlayer(this,this.container)};MetaPlayer.youtube=function(a,b){return(new d(a,b)).video};MetaPlayer.Players.YouTube=function(a){return!(a.getVideoEmbedCode instanceof Function)?!1:MetaPlayer.youtube(a)};MetaPlayer.addPlayer("youtube",function(a,b){!b&&a instanceof Object&&!a.getVideoEmbedCode&&(b=a,a=null);b||(b={});if(!a){if(null==b.chromeless)b.chromeless=!0;a=c("<div></div>").prependTo(this.layout.base)}var e=new d(a,b);this.video=e.video;this.youtube=e});d.prototype=
{init:function(){if(window.YT instanceof Function)this.onApiReady();else{var a=document.createElement("script");a.src="http://www.youtube.com/player_api";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b);var c=this,d=window.onYouTubePlayerAPIReady;window.onYouTubePlayerAPIReady=function(){c.onApiReady();d&&d.call(window)}}},onApiReady:function(){this.youtube=new YT.Player(this.target,{height:"100%",width:"100%",playerVars:this.config.playerVars});this.addListeners()},
addListeners:function(){var a=this.youtube,b=this;a.addEventListener("onReady",function(a){b.onReady(a)});a.addEventListener("onStateChange",function(a){b.onStateChange(a)});a.addEventListener("onError",function(a){b.onError(a)})},onReady:function(){if(this.isReady()){if(4>this.__readyState)this.__readyState=4;this.__muted&&this.youtube.mute();this.volume(this.__volume);this._initTrack();this.startDurationCheck();this.startTimeCheck()}else this.error="unabled to find youtube player",this.dispatch("error")},
isReady:function(){return Boolean(this.youtube&&this.youtube.playVideo)},onStateChange:function(a){a=a.data;MetaPlayer.log("youtube","onStateChange",a);switch(a){case 0:this.__ended=!0;this.dispatch("ended");break;case 1:this.__paused=!1;this.__ended||(this.dispatch("playing"),this.dispatch("play"));this.startDurationCheck();break;case 2:if(!this.__paused)this.__paused=!0,this.dispatch("pause");break;case 5:if(this.dispatch("loadstart"),this.dispatch("canplay"),this.dispatch("loadeddata"),this.dispatch("loadedmetadata"),
!this.autoplay)this.youtube.playVideo(),this.__playingForDuration=!0}},onError:function(a){MetaPlayer.log("youtube","onError",a);this.dispatch("error")},startTimeCheck:function(){var a=this;if(!this._timeCheckInterval)this._timeCheckInterval=setInterval(function(){a.updateTime()},this.updateMsec),this.updateTime()},updateTime:function(){var a=this.__currentTime,b=this.youtube.getCurrentTime(),c=a+2*(this.updateMsec/1E3),d=this.paused(),g=!1;!d&&(b<a||b>c)?g=!0:d&&b!=a&&(g=!0);this.__currentTime=b;
if(!this.__ended&&b>=this.__duration-this.updateMsec/1E3&&b==a)this.__paused=this.__ended=!0,this.dispatch("ended"),this.dispatch("paused");else if(this.__ended&&!d)this.__paused=this.__ended=!1,this.dispatch("play"),console.log("playing"),this.dispatch("playing");else{if(g){if(!this.__seeking)this.__seeking=!0,this.dispatch("seeking");this.__seeking=!1;this.dispatch("seeked")}b!=a&&this.dispatch("timeupdate")}},startDurationCheck:function(){var a=this;if(!this.__duration&&!this._durationCheckInterval)this._durationCheckInterval=
setInterval(function(){a.onDurationCheck()},this.updateMsec)},onDurationCheck:function(){if(4==this.__readyState){var a=this.youtube.getDuration();if(0<a)this.__duration=a,this.__playingForDuration&&(this.youtube.stopVideo(),delete this.__playingForDuration),this.dispatch("durationchange"),clearInterval(this._durationCheckInterval),this._durationCheckInterval=null}},_initTrack:function(){var a=this.src();MetaPlayer.log("youtube","init track",a);if(a&&this.isReady()){this.__ended=!1;this.__currentTime=
0;this.__duration=NaN;this.__seeking=!1;if(a.match("^http"))var b=a.match(/www.youtube.com\/(watch\?v=|v\/)([\w-]+)/)[2];this.youtube.cueVideoById(b||a);this.dispatch("loadstart");MetaPlayer.log("youtube","_initTrack",this.autoplay);this.autoplay?this.play():"none"!=this.preload&&this.load()}},doSeek:function(a){this.__seeking=!0;this.dispatch("seeking");a!=this.__currentTime&&this.youtube.seekTo(a)},load:function(){this.preload="auto";this.isReady()&&(MetaPlayer.log("youtube","load()",this.isReady()),
this.startDurationCheck())},play:function(){this.autoplay=!0;this.isReady()&&(MetaPlayer.log("youtube","play()",this.isReady()),this.youtube.playVideo())},pause:function(){MetaPlayer.log("youtube","pause()",this.isReady());if(!this.isReady())return!1;this.youtube.pauseVideo()},canPlayType:function(a){return Boolean(a.match(/\/youtube$/))},paused:function(){return this.__paused},duration:function(){return this.__duration},seeking:function(){return this.__seeking},ended:function(){return!this.isReady()?
!1:0==this.youtube.getPlayerState()},currentTime:function(a){if(!this.isReady())return 0;void 0!=a&&this.doSeek(a);return this.__currentTime},muted:function(a){if(null!=a){this.__muted=a;if(!this.isReady())return a;a?this.youtube.mute():this.youtube.unMute();this.dispatch("volumechange");return a}return this.__muted},volume:function(a){if(null!=a){this.__volume=a;if(!this.isReady())return a;this.youtube.setVolume(100*a);this.dispatch("volumechange")}return this.__volume},src:function(a){if(void 0!==
a)this.__src=a,this._initTrack();return this.__src},readyState:function(){return this.__readyState}}})();
(function(){function c(a,b){if(""==b)return a;var e=[],d,f=b.split("."),l=f.shift(),n=a.childNodes,m;for(d=0;d<n.length;d++)m=n[d],m.nodeName==l&&(e=e.concat(c(m,f.join("."))));return e}function f(a,b){var e,d;try{d=c(a,b)[0],e=d.textContent||d.text||""}catch(f){}return e}function d(a){var b={},c,e;for(c=0;c<a.length;c++)(e=f(a[c],"Name"))&&(b[e]=f(a[c],"Value"));return b}var a=jQuery,b={},e=function(c,d){if(!(this instanceof e))return new e(c,d);this.config=a.extend({},b,d);MetaPlayer.dispatcher(this);
c&&this.load(c)};MetaPlayer.metaq=function(a,b,c){e(a,c).listen("data",function(a){b(a.items)})};MetaPlayer.prototype.metaq=function(a){var b=this;if(!this._metaq)this._metaq=e(),b.metadata.listen("data",function(a){var c=a.data.cueTracks||[],e,d;for(e=0;e<c.length;e++)if(d=c[e],"application/x-metaq-xml"==d.type)d=c[e].href,b._metaq.load(d,a.uri)}),this._metaq.listen("data",function(a){b.cues.setCueLists(a.cues,a.data)});a&&this._metaq.load(a);return this};e.prototype={load:function(b,c){MetaPlayer.log("metaq",
"load",b,c);a.ajax(b,{dataType:"xml",timeout:15E3,context:this,data:{},error:function(a,e,d){MetaPlayer.log("metaq","got error",d);this.event("error",{url:b,status:e,message:d,data:c})},success:function(a){MetaPlayer.log("metaq","got response");this.event("data",{cues:this.parse(a),data:c})}})},parse:function(b){var e,i;MetaPlayer.log("metaq","got response");for(var h=c(b,"Response.Matches.Match"),j={},b=0;b<h.length;b++)i=h[b],(e=f(i,"Actions.Action.Type"))||(e=f(i,"Actions.Action.Name")),i=a.extend({start:parseFloat(f(i,
"Occurrence.StartTime"))},d(c(i,"Actions.Action.Attributes.Attribute"))),j[e]||(j[e]=[]),j[e].push(i);return j}}})();
(function(){var c=jQuery,f={isPlaylist:!0},d=function(a,b){if(!(this instanceof d))return new d(a,b);MetaPlayer.dispatcher(this);a&&this.load(a)};MetaPlayer.mrss=function(a,b,c){d(a,c).listen("data",function(a){b(a.items)})};MetaPlayer.prototype.mrss=function(a,b){var b=c.extend({},f,b),e=this;if(!this._mrss)this._mrss=d(),this._mrss.listen("data",function(a){var d=[];c(a.items).each(function(a,b){b.cues&&(e.cues.setCueLists(b.cues,b.guid),delete b.cues);e.metadata.setData(b,b.guid);d.push(b.guid)});
b.isPlaylist&&e.playlist.setPlaylist(d)}),this._mrss.listen("error",function(a){e.warn(a.code,a.message)});this._mrss.load(a);return this};d.prototype={load:function(a,b){c.ajax(a,{dataType:"xml",timeout:15E3,context:this,data:{},error:function(b,c,d){this.event("error",{url:a,code:"MRSSAjaxError",message:d+" :: "+a})},success:function(a){this.event("data",{items:this.parse(a),data:b})}})},parse:function(a){var b=this,e=[],a=c(a).find("item").toArray();c.each(a,function(a,c){e.push(b.parseItem(a,
c))});return e},parseItem:function(a,b){var e=this,d={},g=c(b);(new Date).getTime();var f=g.find("media\\:content, content");d.content=[];d.group={};c.each(f,function(a,b){var b=c(b),e=b.attr("codec"),g=b.attr("type")||"";g&&e&&(g+='codec="'+e+'"');e={url:b.attr("url"),fileSize:b.attr("fileSize"),type:g,medium:b.attr("medium"),isDefault:b.attr("isDefault"),expression:b.attr("expression")||"full",bitrate:b.attr("bitrate"),framerate:b.attr("framerate"),samplingrate:b.attr("samplingrate"),channels:b.attr("channels"),
duration:b.attr("duration"),height:b.attr("height"),width:b.attr("width"),lang:b.attr("lang"),codec:e};d.content.push(e);d.group[e.expression]||(d.group[e.expression]=[]);d.group[e.expression].push(e)});d.guid=g.find("guid").text()||"MPF_"+a+"_"+(new Date).getTime();d.title=g.find("media\\:title, title").first().text();d.description=g.find("media\\:description, description").first().text();d.thumbnails=[];g.find("media\\:thumbnail, thumbnail").each(function(a,b){var e=c(b);d.thumbnails.push({url:e.attr("url"),
width:e.attr("width"),height:e.attr("height"),time:e.attr("time")})});if(d.thumbnails.length)d.thumbnail=d.thumbnails[0].url;d.subTitles=[];g.find("media\\:subTitle, subTitle").each(function(a,b){var e=c(b);d.subTitles.push({type:e.attr("type"),lang:e.attr("lang"),href:e.attr("href")})});d.subTitle=d.subTitles[0];d.rating=g.find("media\\:rating, rating").first().text();d.adult=g.find("media\\:adult, adult").first().text();d.keywords=g.find("media\\:keywords, keywords").first().text();f=g.find("media\\:hash, hash");
d.hash={algo:f.attr("algo"),text:f.text()};var h=g.find("media\\:player, player");d.player={url:h.attr("url"),height:h.attr("height"),width:h.attr("width")};d.credits=[];g.find("media\\:credit, credit").each(function(a,b){var e=c(b);d.credits.push({role:e.attr("role"),scheme:e.attr("scheme"),text:e.text()})});d.credit=d.credits[0];f=g.find("media\\:copyright, copyright");d.copyright={url:f.attr("url"),text:f.text()};d.text=[];g.find("media\\:text, text").each(function(a,b){var e=c(b);d.text.push({type:e.attr("type"),
lang:e.attr("lang"),start:e.attr("start"),end:e.attr("end"),text:e.text()})});d.restrictions=[];g.find("media\\:restriction, restriction").each(function(a,b){var e=c(b),g=e.attr("type");d.restrictions[g]={relationship:e.attr("relationship"),text:h.text()}});g.find("mpf\\:attribute, attribute").each(function(a,b){var e=c(b),g=MetaPlayer.script.camelCase(e.attr("name"));MetaPlayer.script.objectPath(d,g,e.text())});d.cueTracks=[];g.find("media\\:cueTrack, cueTrack").each(function(a,b){var e=c(b);d.cueTracks.push({type:e.attr("type"),
href:e.attr("href")})});d.cues={};g.find("mpf\\:cue, cue").each(function(a,b){var g=c(b),f=g.attr("type")||"unknown",i=g.attr("format")||"",h={start:MetaPlayer.script.parseSrtTime(g.attr("start")||""),end:MetaPlayer.script.parseSrtTime(g.attr("end")||"")};null==h.end&&delete h.end;d.cues[f]||(d.cues[f]=[]);if("json"==i)try{c.extend(h,JSON.parse(g.text()))}catch(o){return e.event("error",{code:"MRSSJsonError",message:o.toString()+" :: "+g.text()}),!1}else h.text=g.text();d.cues[f].push(h)});return d}};
window.xmlnsFind=function(a){c.grep(c(a).find("*"),function(a){console.log("e: "+a.tagName+" .. "+a.nodeName)})}})();
(function(){var c=jQuery,f={msQuotes:!0,rampHost:"http://api.ramp.com/v1/mp2/playlist/",retries:3,retryDelayMSec:4E3},d=function(a,b,e){this.config=c.extend({},f,e);this.dispatcher=MetaPlayer.dispatcher(this);this.player=a;this._currentUrl=null;this.rampHost=this.config.rampHost;this._retries=0;this.player.listen(MetaPlayer.READY,this.onReady,this)};MetaPlayer.addPlugin("ramp",function(a,b,c){if(!this._ramp)this._ramp=new d(this,a,b,c);c=this._ramp;if(a&&a.match("/"))a.match(/[\?\&]e=$/)?c.rampHost=
a:this.ready?c.load(a,!0):c._currentUrl=a;else if(a&&(c.apiKey=a,b))b.match(/^ramp:/)||(b="ramp:"+b),c._currentUrl=b;return this});d.prototype={onReady:function(){this.player.metadata.listen(MetaPlayer.MetaData.LOAD,this.onMetaDataLoad,this);this.player.metadata.listen(MetaPlayer.DESTROY,this.onDestroy,this);this._currentUrl&&this.load(this._currentUrl,!0)},onMetaDataLoad:function(a){var b=a.data,c;if(b.ramp&&b.ramp.serviceURL)c=b.ramp.serviceURL;else if(a.uri.match(/^ramp:/))c=a.uri;c&&(this.load(c),
a.stopPropagation(),a.preventDefault())},onDestroy:function(){this.dispatcher.destroy();delete this.config;delete this.player},load:function(a,b){var e=a;if("string"==typeof a&&a.match(/^ramp\:/)){var d=this.parseUrl(a);d.apiKey&&d.apiKey.match("/")?e=d.apiKey+d.rampId:d.apiKey||this.apiKey?(d.apiKey=this.apiKey,e=this.rampHost+"?apikey="+encodeURIComponent(d.apiKey)+"&e="+encodeURIComponent(d.rampId)):this.rampHost&&(e=this.rampHost+d.rampId)}c.ajax(e,{dataType:"xml",timeout:15E3,context:this,data:{},
error:function(c,e){this._retries<this.config.retries?(setTimeout(this.bind(function(){this.load(a,b)}),this.config.retryDelayMSec*this._retries),this._retries++,this.player.warn("ServiceAjaxError",c.status+" "+e+" "+a+" attempt #"+this._retries)):(this.player.error("ServiceAjaxError",c.status+" "+e+" "+a+"  attempt #"+this._retries),this._retries=0)},success:function(c){this._retries=0;c=this.parse(c,e);c.length?this.setItems(c,b):this.player.warn("ServiceParseError","Invalid Playlist ["+a+"]")}})},
setItems:function(a,b){var e=this.player.metadata,d=this.player.playlist,g=a[0],f=g.metadata.guid;this.player.cues.setCueLists(g.cues,f);e.setData(g.metadata,f,!0);d?(c.each(a.slice(1),function(a,b){e.setData(b.metadata,b.metadata.guid,!1)}),b&&d.setPlaylist(c.map(a,function(a){return a.metadata.guid}))):e.load(f)},parse:function(a,b){var e=this,d=c(a).find("par").toArray(),g=[];c.each(d,function(a,c){g.push(e.parseMedia(c,b))});return g},parseMedia:function(a,b){var e={metadata:{},cues:{}},d=this,
g=c(a).find("video");e.metadata.title=g.attr("title");e.metadata.description=g.find("metadata meta[name=description]").text();e.metadata.thumbnail=g.find("metadata meta[name=thumbnail]").attr("content");e.metadata.guid="ramp:"+g.find("metadata meta[name=rampId]").attr("content");e.metadata.link=g.find("metadata meta[name=linkURL]").attr("content");e.metadata.subTitles=[];g.find("metadata meta[name=subTitle]").each(function(a,b){var d=c(b);e.metadata.subTitles.push({type:d.attr("content"),href:d.text()})});
e.metadata.subTitle=e.metadata.subTitles[0];e.metadata.cueTracks=[];g.find("metadata meta[name=cueTrack]").each(function(a,b){var d=c(b);e.metadata.cueTracks.push({type:d.attr("content"),href:d.text()})});e.metadata.ramp={};g.find("metadata meta").each(function(a,b){var d=c(b);e.metadata.ramp[d.attr("name")]=d.attr("content")||d.text()});if(e.metadata.ramp.rampId&&!e.metadata.ramp.serviceURL&&b.match(/mp2[-\/]playlist/))e.metadata.ramp.serviceURL=b.replace(/e=(\d+)/,"e="+e.metadata.ramp.rampId);e.metadata.content=
[];e.metadata.content.push({name:"default",url:g.attr("src"),type:d.resolveType(g.attr("src")),isDefault:!0});c(a).find("metadata[xml\\:id^=transcodes]").find("meta").each(function(a,b){var g=c(b);e.metadata.content.push({name:g.attr("name"),type:g.attr("type")||d.resolveType(g.attr("content")),url:g.attr("content"),isDefault:!1})});e.metadata.ramp.tags=[];e.cues.tags=[];c(a).find("seq[xml\\:id^=jumptags]").find("ref").each(function(a,b){var d={};c(b).find("param").each(function(a,b){var e=c(b);d[e.attr("name")]=
e.text()});if(d.timestamps)d.timestamps=d.timestamps.split(",");e.metadata.ramp.tags.push(d);c.each(d.timestamps,function(a,b){var c={term:d.term,start:parseFloat(b)};e.cues.tags.push(c)})});c(a).find("seq[xml\\:id^=metaqs]").find("ref").each(function(a,b){var g={};"metaq"==c(b).find('param[name="origin"]').text()?d.parseMp2Cues(e.cues,b):(c(b).find("param").each(function(a,b){var e=c(b),f=e.attr("name"),e=d.deSmart(e.text());if("code"==f)try{var i=c.parseJSON(e);c.extend(!0,g,i)}catch(h){g.code=
e}else g[f]=e}),e.cues[g.plugin]||(e.cues[g.plugin]=[]),e.cues[g.plugin].push(g))});g=c(a).find("smilText");e.cues.captions=this.parseCaptions(g);return e},parseMp2Cues:function(a,b){var e=this,d=c(b),g={};g.term=d.find("param[name=term]").text();d=d.find("param[name=id]").text();if("timeline-q"==d)g.plugin="timeQ";else if("adhoc-js"==d)g.plugin="script";c(b).find("param").each(function(a,b){var d=c(b),k=d.attr("name");g[k]=e.deSmart(d.text())});d=g.timestamps||"";delete g.timestamps;a[g.plugin]||
(a[g.plugin]=[]);c.each(d.split(","),function(b,e){var d=c.extend({},g);d.start=parseFloat(e);a[g.plugin].push(d)})},parseCaptions:function(a){var b=this,e=c(a).contents(),d=[],g={text:"",start:0,offset:0},f,h=function(a,e){var h;h=c(a);var m=h.attr("begin");null!=m?h=b.parseSeconds(m):(h=h.attr("next"),h=null!=h?b.parseSeconds(h)+(void 0).start:void 0);f=g;f.end=h;e&&(f.text+=e);d.push(f);g={text:"",start:h,offset:g.offset+1}};e.each(function(a,c){var d=e[a].data;if(void 0===c.tagName)b.config.msQuotes&&
(d=b.deSmart(d)),g.text+=d;else switch(c.tagName){case "smil:clear":case "clear":h(c);break;case "smil:tev":case "tev":h(c);break;case "smil:br":case "br":h(c,"<br />");break;default:throw"unsupported tag";}});g.text&&d.push(g);return d},parseSeconds:function(a){var b=a.substr(-1),c=parseFloat(a);if("s"==b)return c;if("m"==b)return 60*c;if("h"==b)return 3600*c;b=0;a=a.split(":");for(c=0;c<Math.min(a.length,4);c++)b+=Math.pow(60,c)*parseFloat(a[c]);return b},parseUrl:function(a,b){var c=a.split(":");
void 0==b&&(b={});"ramp"!==c[0]?b.url=a:3==c.length?(b.apiKey=c[1],b.rampId=c[2]):b.rampId=c[1];return b},toUrl:function(a){return"ramp:"+a.ramp.rampHost+":"+a.ramp.rampId},deSmart:function(a){return a.replace(/\xC2\x92/,"\u2019")},resolveType:function(a){var b=a.substr(a.lastIndexOf(".")+1);return a.match("www.youtube.com")?"video/youtube":"ogv"==b?"video/ogg":"m3u8"==b?"application/application.vnd.apple.mpegurl":"video/"+b.toLowerCase()},bind:function(a){var b=this;return function(){a.apply(b,arguments)}}}})();
(function(){var c=jQuery,f={},d=function(a){if(!(this instanceof d))return new d(a);this.config=c.extend({},f,a);MetaPlayer.dispatcher(this)};MetaPlayer.srt=function(a,b,c){c=d(c);c.listen("data",function(a){b&&b(a.cues)});c.load(a)};MetaPlayer.prototype.srt=function(a){var b=this;if(!b._srt)b._srt=d(),b.metadata.listen("data",function(a){var c=a.data.subTitles||[],d,f,h;for(d=0;d<c.length;d++)if(h=c[d],"application/x-subrip"==h.type||h.href.match(/\.srt$/)){f=c[d].href;break}f&&b._srt.load(f,a.uri)}),
b._srt.listen("data",function(a){b.cues.setCues("captions",a.cues,a.data)});a&&b._srt.load(a,b.metadata.getFocusUri());return b};d.prototype={load:function(a,b){c.ajax(a,{dataType:"text",timeout:15E3,context:this,data:{},error:function(c,d,g){this.event("error",{url:a,data:b,status:d,message:g})},success:function(c){(c=this.parse(c))&&this.event("data",{url:a,data:b,cues:c})}})},parse:function(a){for(var b=[],a=a.split("\n"),e,d,g,f,h;e=a.shift();){h=[];g={start:null,end:null,text:null};f=[];if(-1==
e.indexOf("--\>"))g.id=e,e=a.shift(),h.push(e);if(d=e&&e.match(/^([\d\,\:]+)\s*--\>\s*([\d\,\:]+)(?:\s+(.*))?/))g.start=MetaPlayer.script.parseSrtTime(d[1]),g.end=MetaPlayer.script.parseSrtTime(d[2]),e=a.shift(),h.push(e),d[3]&&c.each(d[3].split(" "),function(a,b){var c=b.split(":"),e=MetaPlayer.script.camelCase(c[0]);c[1]&&(g[e]=c[1])});for(;e&&e.length;)f.push(e),e=a.shift(),h.push(e);g.text=f.join("\n");var j;if(g.format&&"json"==g.format)try{j=JSON.parse(g.text),delete g.format,delete g.text,
c.extend(g,j)}catch(l){g.error=l.toString()}if(null!=g.start&&null!=g.end&&g.text)b.push(g);else try{console.warn(g,"invalid srt cue:\n"+h.join("\n"))}catch(n){}}return b}}})();
(function(){var c=jQuery,f={},d={lang:"en",textEdge:"edge-drop",textOpacity:"opacity-normal",textColor:"white",textFont:"font-default",textSize:"size-100",frameOpacity:"alpha-semi",frameColor:"black"},a={"size-50":{"font-size":".5em"},"size-100":{"font-size":"1em"},"size-150":{"font-size":"1.5em"},"size-200":{"font-size":"2em"},"edge-none":{filter:"none","text-shadow":"none"},"edge-drop":{filter:"progid:DXImageTransform.Microsoft.DropShadow(offX=1,offY=1,color=000000)","text-shadow":"#000000 .05em .05em 2px"},
"edge-outline":{filter:"glow(color=black,strength=3)","text-shadow":"#000000 1px 1px 0, #000000 -1px -1px 0, #000000 1px -1px 0, #000000 -1px 1px 0"},"edge-raised":{filter:"progid:DXImageTransform.Microsoft.DropShadow(offX=-1,offY=-1,color=ffffff)","text-shadow":"#ffffff -1px -1px 0"},"edge-depressed":{filter:"progid:DXImageTransform.Microsoft.DropShadow(offX=1,offY=1,color=ffffff)","text-shadow":"#ffffff 1px 1px 0"},"edge-uniform":{filter:"glow(color=white,strength=3)","text-shadow":"#ffffff 1px 1px 0, #ffffff -1px -1px 0, #ffffff 1px -1px 0, #ffffff -1px 1px 0"},
"opacity-normal":{opacity:"1"},"opacity-semi":{opacity:".75"},"alpha-trans":{_alpha:"0"},"alpha-semi":{_alpha:".5"},"alpha-opaque":{_alpha:"1"},white:{color:"#ffffff"},red:{color:"#ff0000"},magenta:{color:"#ff27ff"},yellow:{color:"#ffff00"},green:{color:"#00ff00"},cyan:{color:"#00ffff"},blue:{color:"#0000ff"},black:{color:"#000000"},"font-mono-sans":{"text-transform":"none","font-size":"1em","font-family":"Andale Mono, monospace"},"font-prop-sans":{"text-transform":"none","font-size":"1em","font-family":"Arial, sans-serif"},
"font-mono-serif":{"text-transform":"none","font-size":"1em","font-family":"Courier, monospace"},"font-prop-serif":{"text-transform":"none","font-size":"1em","font-family":"Times, serif"},"font-casual":{"text-transform":"none","font-size":"1em","font-family":"Comic Sans, Comic Sans MS, fantasy"},"font-cursive":{"text-transform":"none","font-size":"1em","font-family":"Lucida Handwriting, cursive"},"font-small-caps":{"text-transform":"uppercase","font-family":"Verdana, sans-serif","font-size":".9em"},
"font-default":{"text-transform":"none","font-size":"1em","font-family":"Verdana, sans-serif"}},b=function(a,e,d){if(!(this instanceof b))return new b(a,e,d);this.config=c.extend({},f,d);this.data={};this.ui={};this.target=c(e);this.createMarkup(a);this.close();this.load();c(window).bind("storage",this.bind(function(){this.load()}))};MetaPlayer.addPlugin("captionconfig",function(a){var e=b(this.layout.stage,this.layout.base,a);this.controlbar&&this.controlbar.addButton&&this.controlbar.addButton(c("<div></div>").addClass("mp-cc-settings-btn").attr("title",
"Configure Captions").click(e.bind(e.toggle)));this.captionconfig=e;this.captions.focus||this.captions();this.listen("ready",function(){e.render()})});MetaPlayer.CaptionConfig=b;b.prototype={render:function(){var b=c(this.target),e=this.data,d={},d=c.extend(d,a[e.textEdge]),d=c.extend(d,a[e.textOpacity]),d=c.extend(d,a[e.textColor]),d=c.extend(d,a[e.textFont]);b.find(".mp-cc-text").css(d);var d={},d=c.extend(d,a[e.frameOpacity]),d=c.extend(d,a[e.frameColor]),e=d=c.extend(d,a[e.textSize]),f;f=d.color;
var k=d._alpha;f=!f||!k?"":"rgba("+[parseInt(f.substr(1,2),16),parseInt(f.substr(3,2),16),parseInt(f.substr(5,2),16),parseFloat(k)].join()+")";e.background=f;b.find(".mp-cc-frame").css(d)},toggle:function(){this.ui.base.is(":visible")?this.close():this.open()},close:function(){this.ui.base.toggle(!1)},open:function(){this.ui.base.toggle(!0)},load:function(){this.data=c.extend({},d);var a=localStorage.getItem("com.ramp.mpf.caption.settings");try{if(null!=a)this.data=c.extend(this.data,JSON.parse(a))}catch(b){}this.resetForm();
this.render()},resetForm:function(){this.ui.langSelect.val(this.data.lang);this.ui.displaySelect.val(this.data.display);this.ui.textFont.val(this.data.textFont);this.ui.textColor.select(this.data.textColor);this.ui.frameColor.select(this.data.frameColor);this.ui.textSize.select(this.data.textSize);this.ui.textEdge.select(this.data.textEdge);this.ui.textOpacity.select(this.data.textOpacity);this.ui.frameOpacity.select(this.data.frameOpacity);this.render()},setRule:function(a,b){this.data[a]=b;this.render();
this.save()},save:function(){var a=JSON.stringify(this.data);localStorage.setItem("com.ramp.mpf.caption.settings",a)},createMarkup:function(a){this.ui.base=c("<div></div>").addClass("mp-cc-config").appendTo(a);this.ui.panel=c("<div></div>").addClass("mp-cc-config-panel").appendTo(this.ui.base);this.ui.header=c("<div></div>").addClass("mp-cc-config-header").appendTo(this.ui.panel);c("<div></div>").addClass("mp-cc-config-badge").appendTo(this.ui.header);c("<div></div>").addClass("mp-cc-config-title").text("Closed Captions").appendTo(this.ui.header);
a=c("<div></div>").addClass("mp-cc-config-header-right").appendTo(this.ui.header);c("<div></div>").addClass("mp-cc-config-reset").text("Reset").click(this.bind(function(){this.data=c.extend({},d);this.resetForm()})).appendTo(a);c("<div></div>").addClass("mp-cc-config-separator").appendTo(a);c("<div></div>").addClass("mp-cc-config-save").text("Save").click(this.bind(function(){this.close()})).appendTo(a);c("<div></div>").addClass("mp-cc-config-hr").appendTo(this.ui.panel);var a=c("<div></div>").addClass("mp-cc-config-body").appendTo(this.ui.panel),
b=c("<div></div>").addClass("mp-cc-config-left").appendTo(a);this.ui.langSelect=this.textSelect([{name:"English",value:"en"}]);this.ui.textFont=this.textSelect([{name:"Verdana",value:"font-default"},{name:"Andale",value:"font-mono-sans"},{name:"Arial",value:"font-prop-sans"},{name:"Courier",value:"font-mono-serif"},{name:"Times",value:"font-prop-serif"},{name:"Casual",value:"font-casual"},{name:"Cursive",value:"font-cursive"},{name:"Capitals",value:"font-small-caps"}]).change(this.bind(function(a){this.setRule("textFont",
c(a.currentTarget).val())}));this.row("Font",this.ui.textFont).appendTo(b);this.ui.displaySelect=this.textSelect([{name:"Pop On",value:"pop"},{name:"Roll Up",value:"roll"},{name:"Paint On",value:"paint"}]);this.ui.textColor=e().onChange(this.bind(function(a){this.setRule("textColor",a)}));this.row("Text Color",this.ui.textColor.dom).appendTo(b);this.ui.frameColor=e().onChange(this.bind(function(a){this.setRule("frameColor",a)}));this.row("Frame Color",this.ui.frameColor.dom).appendTo(b);b=c("<div></div>").addClass("mp-cc-config-right").appendTo(a);
this.ui.textSize=k().onChange(this.bind(function(a){this.setRule("textSize",a)})).append(c('<div class="mp-cc-config-text-template"><div>ABC</div></div>').addClass("mp-cc-config-text-size-50"),"size-50").append(c('<div class="mp-cc-config-text-template"><div>ABC</div></div>').addClass("mp-cc-config-text-size-100"),"size-100").append(c('<div class="mp-cc-config-text-template"><div>ABC</div></div>').addClass("mp-cc-config-text-size-150"),"size-150").append(c('<div class="mp-cc-config-text-template"><div>ABC</div></div>').addClass("mp-cc-config-text-size-200"),
"size-200");this.ui.textSize.dom.addClass("mp-cc-config-text-size");this.row("Text Size",this.ui.textSize.dom).appendTo(b);this.ui.textEdge=k().onChange(this.bind(function(a){this.setRule("textEdge",a)})).append(c('<div class="mp-cc-config-text-template"><div>ABC</div></div>').addClass("mp-cc-config-text-edge-none"),"edge-none").append(c('<div class="mp-cc-config-text-template"><div>ABC</div></div>').addClass("mp-cc-config-text-edge-drop"),"edge-drop").append(c('<div class="mp-cc-config-text-template"><div>ABC</div></div>').addClass("mp-cc-config-text-edge-outline"),
"edge-outline").append(c('<div class="mp-cc-config-text-template"><div>ABC</div></div>').addClass("mp-cc-config-text-edge-raised"),"edge-raised").append(c('<div class="mp-cc-config-text-template"><div>ABC</div></div>').addClass("mp-cc-config-text-edge-depressed"),"edge-depressed").append(c('<div class="mp-cc-config-text-template"><div>ABC</div></div>').addClass("mp-cc-config-text-edge-uniform"),"edge-uniform");this.ui.textEdge.dom.addClass("mp-cc-config-text-edge");this.row("Text Edge",this.ui.textEdge.dom).appendTo(b);
this.ui.textOpacity=k().onChange(this.bind(function(a){this.setRule("textOpacity",a)})).append(c('<div class="mp-cc-config-text-template"><div>ABC</div></div>').addClass("mp-cc-config-text-opacity-normal"),"opacity-normal").append(c('<div class="mp-cc-config-text-template"><div>ABC</div></div>').addClass("mp-cc-config-text-opacity-semi"),"opacity-semi");this.ui.textOpacity.dom.addClass("mp-cc-config-text-opacity");this.row("Text Opacity",this.ui.textOpacity.dom).appendTo(b);this.ui.frameOpacity=k().onChange(this.bind(function(a){this.setRule("frameOpacity",
a)})).append(c('<div class="mp-cc-config-frame-opacity"><div class="mp-cc-config-frame-fill"></div></div>').addClass("mp-cc-config-frame-opacity-trans"),"alpha-trans").append(c('<div class="mp-cc-config-frame-opacity"><div class="mp-cc-config-frame-fill"></div></div>').addClass("mp-cc-config-frame-opacity-semi"),"alpha-semi").append(c('<div class="mp-cc-config-frame-opacity"><div class="mp-cc-config-frame-fill"></div></div>').addClass("mp-cc-config-frame-opacity-opaque"),"alpha-opaque");this.ui.frameOpacity.dom.addClass("mp-cc-config-text-opacity");
this.row("Frame Opacity",this.ui.frameOpacity.dom).appendTo(b);c("<div></div>").addClass("mp-cc-config-clear").appendTo(a);this.ui.footer=c("<div></div>").addClass("mp-cc-config-footer").appendTo(this.ui.panel);a=c("<div></div>").addClass("mp-cc-frame").appendTo(this.ui.footer);c("<span></span>").addClass("mp-cc-text").text("Sample Caption").appendTo(a)},row:function(a,b){var e=c("<div></div>").addClass("mp-cc-config-row");c("<div></div>").text(a).addClass("mp-cc-config-label").appendTo(e);c("<div></div>").addClass("mp-cc-config-row-body").append(b).appendTo(e);
return e},textSelect:function(a){var b=c("<select></select>").addClass("mp-cc-config-select");c.each(a,function(a,e){c("<option></option>").text(e.name).val(e.value).addClass("mp-cc-config-option").appendTo(b)});return b},bind:function(a){var b=this;return function(){a.apply(b,arguments)}}};var e=function(){if(!(this instanceof e))return new e;this.ui={};this.index=null;this.values=[];this.callbacks=[];this.dom=c("<div></div>").addClass("mp-cc-config-colorbox").delegate(".mp-cc-config-color","click",
this.bind(function(a){this.select(c(a.currentTarget).data("index"))}));c.each(this.colors,this.bind(function(b,c){this.colorBox(a[c].color).data("index",b).appendTo(this.dom)}))};e.prototype={colors:"white,red,magenta,yellow,green,cyan,blue,black".split(","),colorBox:function(a){var b=c("<div></div>").addClass("mp-cc-config-color");c("<div></div>").addClass("mp-cc-config-fill").css("background",a).appendTo(b);return b},select:function(a){if("string"==typeof a){var b=a,a=null;c.each(this.colors,function(c,
e){if(e==b)return a=c,!0})}if(!(null==a||isNaN(a))){var e=this.dom.children();if(a!=this.index){this.index=a;e.removeClass("mp-cc-config-color-selected");c(e[a]).addClass("mp-cc-config-color-selected");var d=this.colors[a];c.each(this.callbacks,function(a,b){b(d)})}}},onChange:function(a){this.callbacks.push(a);return this},bind:function(a){var b=this;return function(){a.apply(b,arguments)}}};var k=function(){if(!(this instanceof k))return new k;this.ui={};this.index=null;this.values=[];this.callbacks=
[];this.dom=c("<div></div>").addClass("mp-cc-config-carousel");c("<div></div>").addClass("mp-cc-config-carousel-next").click(this.bind(this.next)).mousedown(function(a){a.preventDefault()}).appendTo(this.dom);this.ui.body=c("<div></div>").addClass("mp-cc-config-carousel-body").appendTo(this.dom);c("<div></div>").addClass("mp-cc-config-carousel-previous").mousedown(function(a){a.preventDefault()}).click(this.bind(this.previous)).appendTo(this.dom)};k.prototype={select:function(a){if("string"==typeof a){var b=
a,a=null;c.each(this.values,function(c,e){if(e==b)return a=c,!0})}if(!(null==a||isNaN(a))){var e=this.ui.body.children(),d=(a+e.length)%e.length;if(d!=this.index){e.hide();c(e[d]).show();this.index=d;var f=this.value();c.each(this.callbacks,function(a,b){b(f)})}}},onChange:function(a){this.callbacks.push(a);return this},value:function(a){if(null==a)a=this.index;return this.values[a]},append:function(a,b){if(null==b)b=this.values.length;this.ui.body.append(c(a).hide());this.values.push(b);return this},
next:function(a){this.select(this.index+1);a&&a.preventDefault()&&a.stopPropagation()},previous:function(a){this.select(this.index-1);a&&a.preventDefault()&&a.stopPropagation()},bind:function(a){var b=this;return function(){a.apply(b,arguments)}}}})();
(function(){var c=jQuery,f=window.Popcorn,d={cssPrefix:"metaplayer-captions",pluginName:"captions",detectTextTracks:!1},a=function(b,e){var f;if("string"!==typeof b){if(!b.__CAPTIONS_ID)b.__CAPTIONS_ID="CC!"+a._count++;f=b.__CAPTIONS_ID}else f=b;if(a.instances[f])return a.instances[f];if(!(this instanceof a))return new a(b,e);this.config=c.extend({},d,e);b.getTrackEvents?(this.popcorn=b,this.target=b.media):this.target=b;this.config=c.extend(!0,{},d,e);this.init();a.instances[f]=this};MetaPlayer.Captions=
a;a.instances={};a._count=0;MetaPlayer.addPlugin("captions",function(b){var c=this.popcorn,d=a(c,b);this.layout.listen("resize",function(){d.size()});if(!(c.captions instanceof Function))throw"popcorn plugin does not exist: captions";this.cues.enable("captions");this.captions=d});a.prototype={init:function(){this.container=this.create().addClass("mp-cc-frame").hide();this.text=c("<div></div>").addClass("metaplayer-captions-text").addClass("mp-cc-text").appendTo(this.container);this._captions={};c(this.target.parentNode).append(this.container)},
size:function(){this.container.css("font-size",this.container.parent().height()/20+"px")},findTrackElements:function(){var a=this.popcorn;if(a.parseSRT instanceof Function){var e=c(this.target).find('track[kind="subtitle"]');c.each(e,function(e,d){var f=c(d).attr("src");if(".srt"==f.substr(f.lastIndexOf(".")))return a.parseSRT(f),!1})}},append:function(){},focus:function(a){var e=c("<span></span>").html(a.text);this._captions[a.start]=e;this.text.append(e);this.container.show()},blur:function(a){var c=
this._captions[a.start];delete this._captions[a.start];c.remove();0==this.text.children().length&&this.container.hide()},clear:function(){this._captions={};this.text.empty();this.container.hide()},find:function(a){return c(this.container).find("."+this.cssName(a))},create:function(a,e){e||(e="div");return c("<"+e+">").addClass(this.cssName(a))},cssName:function(a){return this.config.cssPrefix+(a?"-"+a:"")}};f&&f.plugin("captions",{_setup:function(){a(this)},start:function(b,c){a(this).focus(c)},end:function(b,
c){a(this).blur(c)},_teardown:function(){a(this).clear()}})})();
(function(){var c=jQuery,f=window.Popcorn,d={duplicates:!1,refocus:!0,cssPrefix:"mp-carousel",slideDurationMs:750,renderAnnotations:!0},a=function(b,e){if(a.instances[b])return a.instances[b];if(!(this instanceof a))return new a(b,e);this.config=c.extend({},d,e);this.init(b);a.instances[b]=this};if(!window.RAMP)window.RAMP={};MetaPlayer.carousel=function(b,c){return new a(b,c)};MetaPlayer.addPlugin("carousel",function(b,c){this.carousel=a(b,c);this.carousel.player=this;this.cues.enable("carousel",
{target:b},{sequence:!0})});a.instances={};a._count=0;a.prototype={init:function(a){this.target=c(a);this.scroller=c("<div></div>").addClass(this.cssName("scroller")).appendTo(this.target);this.navbar=c("<div></div>").addClass(this.cssName("navbar")).appendTo(this.target);this._uniques={};this._autoscroll=!0;this.target.addClass(this.cssName());this.render();var e=this;this.find(this.cssName("nav")).click(function(a){e._navClick(a)});this.target.bind("mouseenter",function(){e._autoscroll=!1});this.target.bind("mouseleave",
function(){e._autoscroll=!0});this.scroller.bind("touchstart",function(a){e._dragStart(a)});this.scroller.bind("touchmove",function(a){e._dragMove(a)});this.scroller.bind("touchend",function(a){e._dragStop(a)})},_dragStart:function(a){this.dragging=!0;this.scroller.stop();this._dragStartPos=this.eventX(a);this._dragStartScroll=this.scroller.scrollLeft();a.preventDefault()},_dragMove:function(a){a=this.eventX(a)-this._dragStartPos-this._dragStartScroll;this.scroller.stop();this.scroller.scrollLeft(-a)},
_dragStop:function(){this.dragging=!1;this.snap()},_navClick:function(a){a=c(a.currentTarget).data("index");this.scrollTo(a);this._highlight(a)},render:function(){var a=this.find("content");c.each(a,function(a,b){var d=c(b);d.css("position","absolute");d.css("left",100*a+"%")});this._highlight()},scrollTo:function(a){var a=this.target.width()*a,c=this;this.scroller.stop().animate({scrollLeft:a},this.config.slideDurationMs,"swing",function(){c._highlight()})},currentIndex:function(){return this.scroller.scrollLeft()/
this.target.width()},snap:function(){this.scrollTo(Math.round(this.currentIndex()))},_highlight:function(a){var e=this.cssName("selected"),a=null!=a?a:Math.round(this.currentIndex());this.find("selected").removeClass(e);c(this.find("nav")[a]).addClass(e)},eventX:function(a){return(a.pageX||a.originalEvent.touches[0].pageX)-this.target.offset().left},setup:function(a){var e=this;a.index=this.find("nav").length;var d=a.url||a.html;this.config.renderAnnotations&&this.player&&this.player.controls&&this.player.controls.addAnnotation&&
this.player.controls.addAnnotation(a.start,null,a.topic||"","metaq");if(!this.config.duplicates){if(null!=this._uniques[d]){a.index=this._uniques[d];a.duplicate=!0;return}this._uniques[d]=a.index}var f=c("<div></div>").addClass(this.cssName("content")).appendTo(this.scroller);c("<div></div>").addClass(this.cssName("nav")).attr("title",a.topic||"").data("index",a.index).click(function(a){e._navClick(a)}).appendTo(this.find("navbar"));a.html&&(a.html.match(/^http\:\/\//)?(f.html(""),c("<div></div>").addClass(this.cssName("loading")).appendTo(f),
c.ajax(a.html,{dataType:"text",timeout:15E3,error:function(){"error"==status&&f.empty().addClass(e.cssName("error"))},success:function(a){f.html(a)}})):f.html(a.html||""));a.url&&c("<iframe></iframe>").attr("frameborder","0").addClass(this.cssName("loading")).appendTo(f).attr("src",a.url);this.render()},focus:function(a){this._autoscroll&&(!a.duplicate||this.config.refocus)&&this.scrollTo(a.index)},blur:function(){},clear:function(){this.navbar.empty();this.scroller.empty();this._uniques={}},find:function(a){return this.target.find("."+
this.cssName(a))},cssName:function(a){return this.config.cssPrefix+(a?"-"+a:"")}};f&&f.plugin("carousel",{_setup:function(b){a(b.target).setup(b)},start:function(b,c){a(c.target).focus(c)},end:function(b,c){a(c.target).blur(c)},_teardown:function(b){a(b.target).clear()}})})();
(function(){var c=jQuery,f={controls:!0,fullscreen:!1,annotations:"tags",backButtonSec:5,volumeBarSteps:5,pauseDuringSeek:!1,tracktip:!0,volumeButtonSteps:3},d=function(a,b,e){if(!(this instanceof d))return new d(a,b,e);this.player=b;this.player.video.controls=!1;this.config=c.extend(!0,{},f,e);if("string"==typeof this.config.annotations)this.config.annotations=this.config.annotations.split(/\s+/);this.ui={};if(!a)a=c("<div></div>").css("position","absolute").css("width","100%").css("top","auto").css("bottom",
"0").appendTo(b.layout.base).get(0),this.ui.layoutPanel=b.layout.addPanel({});this.target=c(a);this.createMarkup();if(MetaPlayer.iOS)this.player.video.controls=!0,this.ui.left.toggle(!1),this.ui.right.toggle(!1);this.config.controls||this.ui.panel.hide();this.addListeners();this.render()};MetaPlayer.ControlBar=d;MetaPlayer.addPlugin("controlbar",function(a){this.controlbar=d(null,this,a)});d.prototype={createMarkup:function(){this.ui.base=c(this.target).addClass("mpf-controlbar").mousemove(this.bind(this.focus)).mouseout(this.bind(this.blur));
var a=c("<div>").addClass("mpf-controlbar-track").appendTo(this.target).bind("mousedown touchstart",this.bind(this.onTrackStart));if(this.config.tracktip&&MetaPlayer.TrackTip)this.ui.tracktip=MetaPlayer.TrackTip(a,this.player);this.ui.buffer=c("<div>").addClass("mpf-controlbar-track-buffer").appendTo(a);this.ui.track=c("<div>").addClass("mpf-controlbar-track-fill").appendTo(a);this.ui.overlay=c("<div>").addClass("mpf-controlbar-track-overlay").appendTo(a);this.ui.knob=c("<div>").addClass("mpf-controlbar-track-knob").appendTo(this.ui.track);
this.ui.panel=c("<div>").addClass("mpf-controlbar-panel").appendTo(this.target);this.ui.left=c("<div>").addClass("mpf-controlbar-panel-left").appendTo(this.ui.panel);this.ui.play=c("<div>").addClass("mpf-controlbar-play").appendTo(this.ui.left).attr("title","Play").click(this.bind(function(){this.player.video.play()}));this.ui.pause=c("<div>").addClass("mpf-controlbar-pause").appendTo(this.ui.left).attr("title","Pause").click(this.bind(function(){this.player.video.pause()}));this.ui.back=c("<div>").addClass("mpf-controlbar-back").appendTo(this.ui.left).attr("title",
"Skip Back").click(this.bind(function(){this.player.video.currentTime-=this.config.backButtonSec}));this.ui.clock=c("<div>").addClass("mpf-controlbar-clock").appendTo(this.ui.left);this.ui.time=c("<div>").text("00:00").addClass("mpf-controlbar-time").appendTo(this.ui.clock);c("<div>").html("&nbsp;/&nbsp;").addClass("mpf-controlbar-time-spacer").appendTo(this.ui.clock);this.ui.duration=c("<div>").text("99:99").addClass("mpf-controlbar-duration").appendTo(this.ui.clock);this.ui.right=c("<div>").addClass("mpf-controlbar-panel-right").appendTo(this.ui.panel);
this.ui.volume=c("<div>").addClass("mpf-controlbar-volume").appendTo(this.ui.right).attr("title","Toggle Mute").click(this.bind(this.onMuteToggle));a=c("<div>").addClass("mpf-controlbar-volumebar").appendTo(this.ui.right).attr("title","Set Volume").bind("mousedown touchstart",this.bind(this.onVolumeStart));this.ui.volumebar=c("<div>").addClass("mpf-controlbar-volumebar-fill").appendTo(a);this.ui.cc=c("<div>").addClass("mpf-controlbar-cc").addClass("mpf-controlbar-cc-off").appendTo(this.ui.right).attr("title",
"Toggle Captions").click(this.bind(this.onCCToggle));this.ui.fullscreen=c("<div>").addClass("mpf-controlbar-fullscreen").attr("title","Toggle Zoom").click(this.bind(this.onFullscreenToggle)).appendTo(this.ui.right).toggle(Boolean(this.config.fullscreen));this.toggle(this.config.controls)},addButton:function(a,b){null!=b?this.ui.right.children().eq(b).before(a):a.appendTo(this.ui.right)},toggle:function(a){null==a&&(a="none"==this.ui.panel.css("display"));this.ui.panel.css("display",a?"block":"none");
this.ui.knob.css("display",a?"block":"none");null!=this.ui.layoutPanel&&this.player.layout.updatePanel(this.ui.layoutPanel,{bottom:this.player.layout.isMazimized?this.ui.track.height():this.ui.base.height()})},addAnnotation:function(a,b,e){var d=this.player.video.duration;d&&(a=c("<div>").attr("title",a).addClass("mpf-controlbar-track-marker").appendTo(this.ui.overlay).css("left",100*(b/d)+"%"),e&&a.addClass("mpf-controlbar-track-marker-"+e))},clearAnnotations:function(a){a?this.ui.base.find(".mpf-controlbar-track-marker-"+
a).remove():this.ui.overlay.empty()},addListeners:function(){var a=this.player.video;a.addEventListener("loadstart",this.bind(this.onLoadStart));a.addEventListener("pause",this.bind(this.renderControls));a.addEventListener("playing",this.bind(this.renderControls));a.addEventListener("canplay",this.bind(function(){if(MetaPlayer.iOS)this.player.video.controls=!1,this.ui.left.toggle(!0),this.ui.right.toggle(!0)}));a.addEventListener("ended",this.bind(this.renderControls));a.addEventListener("loadstart",
this.bind(this.renderControls));a.addEventListener("durationchange",this.bind(this.renderDuration));a.addEventListener("volumechange",this.bind(this.renderVolume));a.addEventListener("timeupdate",this.bind(this.renderTime));this.player.playlist.addEventListener("trackchange",this.bind(this.onTrackChange));this.player.cues.addEventListener("cues",this.bind(this.onCues));this.player.search.listen("results",this.onSearchResults,this);this.player.listen("ready",this.bind(function(){this.player.cues.disable("captions")}))},
onTrackChange:function(){this._duration=null;this.clearAnnotations()},onLoadStart:function(){this.ui.cc.toggleClass("mpf-controlbar-cc-off",!0);this.render()},focus:function(){clearTimeout(this._blurTimer);this._blurTimer=setTimeout(this.bind(function(){this.ui.knob.stop().animate({opacity:1})}),300)},blur:function(){clearTimeout(this._blurTimer);this._blurTimer=setTimeout(this.bind(function(){this.ui.knob.stop().animate({opacity:0})}),750)},render:function(){this.renderControls();this.renderDuration();
this.renderVolume()},renderControls:function(){var a=this.player.video;this.ui.pause.hide();this.ui.play.hide();a.paused?this.ui.play.show():this.ui.pause.show()},renderDuration:function(){var a=this.player.video.duration;if(a){var b=MetaPlayer.format.seconds(a);this._duration=a;this.ui.duration.text(b);this.renderTime();this.renderCues();this.ui.clock.show()}else this.ui.clock.hide()},renderVolume:function(){var a=this.player.video;MetaPlayer.iOS&&(this.ui.volume.hide(),this.ui.volumebar.parent().hide());
var b=a.muted?0:a.volume;this.ui.volumebar.width(100*b+"%");var a=this.ui.volume,c=this.config.volumeButtonSteps;a.attr("class","mpf-controlbar-volume");0==b?b="mpf-controlbar-muted":c?(b=Math.ceil(b*c),b="mpf-controlbar-volume-"+b):b="mpf-controlbar-unmuted";a.addClass(b)},onVolumeStart:function(a){this._volumeDragging={move:this.bind(this.onVolumeMove),stop:this.bind(this.onVolumeStop)};c(document).bind("mousemove touchmove",this._volumeDragging.move).bind("mouseup touchstop",this._volumeDragging.stop);
this.onVolumeMove(a)},onVolumeStop:function(a){if(this._volumeDragging)c(document).unbind("mousemove touchmove",this._volumeDragging.move).unbind("mouseup touchstop",this._volumeDragging.stop),this._volumeDragging=null,this.onVolumeMove(a)},onVolumeMove:function(a){var b=this._dragPercent(a,this.ui.volumebar),c=this.config.volumeBarSteps;c&&(b=Math.ceil(b*c)/c);this.player.video.volume=b;this.player.video.muted=!1;a.preventDefault()},onMuteToggle:function(){var a=this.player.video,b=a.muted?0:a.volume;
if(a.muted||0==b){if(a.muted=!1,0==a.volume)a.volume=1}else a.muted=!0},renderTime:function(){this.renderClock();this.renderTimeline()},renderClock:function(){var a=this.player.video.currentTime,b="";isNaN(a)||(b=MetaPlayer.format.seconds(a));this.ui.time.text(b)},renderTimeline:function(a){var b=this.player.video,c=null==a?b.currentTime:a;this._trackDragging&&null==a||(a=0,b.duration&&(a=100*(c/b.duration)),0>a?a=0:100<a&&(a=100),this.ui.track.width(a+"%"))},onTrackStart:function(a){this._trackDragging=
{move:this.bind(this.onTrackMove),stop:this.bind(this.onTrackStop)};if(this.config.pauseDuringSeek)this._trackDragging.resume=!this.player.video.paused,this.player.video.pause();c(document).bind("mousemove touchmove",this._trackDragging.move).bind("mouseup touchend",this._trackDragging.stop);this.onTrackMove(a)},onTrackStop:function(a){if(this._trackDragging)c(document).unbind("mousemove touchmove",this._trackDragging.move).unbind("mouseup touchend",this._trackDragging.stop),this._trackDragging.resume&&
this.player.video.play(),this.onTrackMove(a),this._trackDragging=null,this.player.tracktip&&this.player.tracktip.close()},onTrackMove:function(a){var b=this.player.video;if(b.duration&&!b.ad){var c=this._dragPercent(a,this.ui.track);if(null!=c)this._trackDragging.lastTime=c*b.duration;if(a.type.match(/^touchend|mouseup/))this.player.video.currentTime=this._trackDragging.lastTime;this.renderTimeline(this._trackDragging.lastTime);this.player.tracktip&&this.player.tracktip.open(this._trackDragging.lastTime);
a.preventDefault()}},onCCToggle:function(){this.toggleCaptions(null)},onFullscreenToggle:function(){this.player.config.maximize?this.player.layout.isFullScreen?this.player.layout.window():this.player.layout.fullscreen():this.player.layout.isMaximized?this.player.layout.restore():this.player.layout.fullscreen()},toggleCaptions:function(a){var b=this.player.cues;(null==a?!b.isEnabled("captions"):a)?b.enable("captions"):b.disable("captions")},onCues:function(){this._cuesRendered=!1;this.renderCues()},
renderCues:function(){this.clearAnnotations();var a=this.player.cues;this.ui.cc.toggleClass("mpf-controlbar-cc-off",!a.getCaptions().length);var b=this;c.each(this.config.annotations,function(e,d){c.each(a.getCues(d),function(a,c){b.addAnnotation(c.term||c.topic||c.text||"",c.start,d)})})},onSearchResults:function(a){var b=a.data.results;this.clearAnnotations("search");a.query&&c.each(b,this.bind(function(b,c){this.addAnnotation(a.query,c.start,"search")}))},bind:function(a){var b=this;return function(){return a.apply(b,
arguments)}},_dragPercent:function(a,b){var e=a.originalEvent,d=a.pageX;if(e.targetTouches){if(!e.targetTouches.length)return;d=e.targetTouches[0].pageX}e=c(b).parent();d=(d-e.offset().left)/e.width();0>d?d=0:1<d&&(d=1);return d}}})();
(function(){var c=jQuery,f={cssPrefix:"mp-controls",leading:!0,trackIntervalMsec:5E3,clockIntervalMsec:500,revealTimeMsec:500,revealDelayMsec:500,hideDelayMsec:1500,annotationSeekOffsetSec:-1,createMarkup:!0,renderTags:!0,renderMetaq:!1,autoHide:!1,annotationAnimate:!0,annotationMsec:1200,annotationEntropy:1,annotationSpacing:0.5,showBelow:!0},d=function(a,b){this.config=c.extend(!0,{},f,b);this.container=c(this.config.container||a.layout.base);this.player=a;this.video=a.video;this.annotations=[];
this.video.controls=!1;this._hasTween=c.easing.easeOutBounce;this.config.createMarkup&&this.createMarkup();this.addDataListeners(a);this.addVideoListeners();this.addUIListeners();this.trackTimer=MetaPlayer.timer(this.config.trackIntervalMsec);this.trackTimer.listen("time",this.render,this);this.clockTimer=MetaPlayer.timer(this.config.clockIntervalMsec);this.clockTimer.listen("time",this.onClockTimer,this);this.revealTimer=MetaPlayer.timer(this.config.revealDelayMsec);this.revealTimer.listen("time",
this.onRevealTimer,this);this.hideTimer=MetaPlayer.timer(this.config.hideDelayMsec);this.hideTimer.listen("time",this.onHideTimer,this);this.panel=this.player.layout.addPanel({});if(this.config.autoHide)this.config.showBelow=!1;this.config.showBelow&&this.showBelow(!0);if(MetaPlayer.iOS)this.video.controls=!0,this.toggle(!1,0),this.showBelow(!1)};MetaPlayer.addPlugin("controls",function(a){this.controls=new d(this,a)});d.prototype={addVideoListeners:function(){var a=this;c(this.video).bind("pause play playing seeked seeking ended",
function(b){a.video.controls=!1;a.onPlayStateChange(b)});c(this.video).bind("adstart adstop",function(b){a.toggle("adstart"!=b.type)});c(this.video).bind("durationchange",function(){a.renderAnnotations(!0)})},addUIListeners:function(){var a=this;this.find("play").click(function(b){a.onPlayToggle(b)});this.find("track-knob").bind("mousedown touchstart",function(b){return a.onKnobMouseDown(b)});this.find("track-fill").bind("mousedown touchstart",function(b){return a.onKnobMouseDown(b)});this.find("track-buffer").bind("mousedown touchstart",
function(b){return a.onKnobMouseDown(b)});this.find("track").bind("mousedown touchstart",function(b){return a.onKnobMouseDown(b)});c(document).bind("mouseup touchend",function(b){return a.onKnobMouseUp(b)});c(document).bind("mousemove touchmove",function(b){return a.onKnobMouseMove(b)});var b=c(this.container);b.bind("mouseenter touchstart",function(){a.config.autoHide&&(a.hideTimer.reset(),a.revealTimer.start())});b.bind("mouseleave",function(){a.config.autoHide&&(a.revealTimer.reset(),a.hideTimer.start())})},
addDataListeners:function(){var a=this.player.metadata;this.config.renderTags&&a.listen(MetaPlayer.MetaData.DATA,this.onTags,this);this.player.cues.listen(MetaPlayer.Cues.CLEAR,this._onCuesClear,this);this.player.search.listen(MetaPlayer.Search.RESULTS,this.onSearch,this)},onTags:function(a){var b=this;c.each(a.data.ramp.tags||[],function(a,d){c.each(d.timestamps,function(a,c){b.addAnnotation(c,null,d.term,"tag")})});this.renderAnnotations()},addAnnotations:function(a,b){null==b&&(b="metaq");var e=
this;c.each(a,function(a,c){e.addAnnotation(c.start,c.end,c.text||c.term,b)});this.renderAnnotations()},_onCuesClear:function(){this.clearAnnotations()},onSearch:function(a,b){var e=this;this.removeAnnotations("query");c.each(b.results,function(a,b){var d=b.start,f=[];c.each(b.words,function(a,b){f.push(b.text)});f=f.join(" ").replace(/[\r\n]/g," ");e.addAnnotation(d,null,f,"query")});this.renderAnnotations()},onClockTimer:function(){this.dragging||this.renderTime()},onPlayToggle:function(){var a=
this.video;a.paused?a.play():a.pause();this.render()},onPlayStateChange:function(){this.config.autoHide||(this.toggle(!0),this.config.showBelow&&this.showBelow(!0));this.video.paused?(this.clockTimer.reset(),this.trackTimer.reset()):(this.clockTimer.start(),this.trackTimer.start());this.render()},onKnobMouseDown:function(a){this.dragging=!0;this.find("track-knob").stop();this.onKnobMouseMove(a);a.preventDefault();return!1},onKnobMouseUp:function(a){if(this.dragging)this.dragging=!1,this.setByMousePosition(a)},
onKnobMouseMove:function(a){if(this.dragging){this.find("track-buffer");var b=this.find("track-knob"),c=this.find("track"),d=b.parent().offset(),d=(a.pageX||a.originalEvent.touches[0].pageX)-d.left,d=Math.min(d,c.width()),d=Math.max(d,0);this.renderTime(d/c.width()*this.video.duration);b.css("left",d+"px");this.setByMousePosition(a,!0)}},setByMousePosition:function(a,b){var c=this.find("track-knob");this.find("track");var d=c.parent(),c=c.position().left/d.width()*this.video.duration;b?this.throttledSeek(c):
this.seek(c)},throttledSeek:function(a){clearTimeout(this.seekDelay);var b=this;this.seekDelay=setTimeout(function(){b.seek(a)},100)},seek:function(a){clearTimeout(this.seekDelay);this.video.currentTime=parseFloat(a);this.render()},renderTime:function(a){if(!a)a=this.video.currentTime;this.find("time-current").text(this.formatTime(a))},render:function(){var a=this.video.duration,b=this.video.currentTime;this.find("play").toggleClass(this.cssName("pause"),!this.video.paused);this.find("time-duration").html(" / "+
this.formatTime(a));this.annotations.modified&&this.renderAnnotations();var c=this.config.trackIntervalMsec;this.renderTime();var d;a?(d=100*(b/a),a=Math.min(100*((b+c/1E3)/a),100)):a=d=0;var b=this.find("track-fill").stop(),f=this.find("track-knob").stop();this.video.paused&&(a=d);this.video.seeking||(b.width(d+"%"),this.dragging||f.css("left",d+"%"),!this.video.paused&&this.config.leading&&!this.video.seeking&&!this.dragging&&(b.animate({width:a+"%"},c,"linear"),f.animate({left:a+"%"},c,"linear")))},
autoHide:function(a){a?this.hideTimer.start():this.hideTimer.stop();return this.config.autoHide=a},onRevealTimer:function(){this.toggle(!0);this.revealTimer.reset()},onHideTimer:function(){this.toggle(!1);this.hideTimer.reset()},toggle:function(a,b){var d=this.find();c(this.container).find(".metaplayer-video");var f=void 0==a?!d.is(":visible"):a;f&&d.toggle(!0);this.config.showBelow&&this.showBelow(a);d.stop().animate({opacity:f?1:0},null==b?this.config.revealTimeMsec:b,function(){d.toggle(f)})},
showBelow:function(a){this.player.layout.updatePanel(this.panel,{bottom:a?this.find().height():0})},addAnnotation:function(a,b,c,d){var f=this.find("track-overlay"),i=this.create("track-marker");i.hide();var h=this;i.click(function(){return h.seek(parseFloat(a)+h.options.annotationSeekOffsetSec)});c&&i.attr("title",this.formatTime(a)+"  "+c);d&&i.addClass(this.cssName(d));b==a&&(b=null);f.append(i);this.annotations.modified=!0;this.annotations.push({rendered:!1,start:parseFloat(a),end:parseFloat(b)||
null,el:i,cssClass:d});this.renderAnnotations();return i},renderAnnotations:function(a){var b=this.video.duration;if(b){var e=c(this.video).height(),f=this.config,g,i=this,h=this.config.annotationSpacing,j=this.annotations.sort(d.annotationSort);c(j).each(function(c,d){var j=100*(d.start/b);100<j&&(j=100);d.el.css("left",j+"%");d.end&&d.el.css("width",100*((d.end-d.start)/b)+"%");if(a||!d.rendered)f.annotationAnimate&&i._hasTween&&d.el.css("top",-e).animate({top:0},f.annotationMsec+Math.random()*
f.annotationEntropy*f.annotationMsec,"easeOutBounce"),d.rendered=!0;d.el.show();g&&null!=h&&g.el.position().left+g.el.width()*h>d.el.position().left?d.el.stop().hide():g=d});this.annotations.modified=!1}},removeAnnotations:function(a){var b,c;for(b=this.annotations.length-1;0<=b;b--)c=this.annotations[b],c.cssClass==a&&(this.annotations.splice(b,1),c.el.remove())},clearAnnotations:function(){this.find("track-overlay").empty();this.annotations=[]},createMarkup:function(){var a=this.create().appendTo(this.container),
b=this.create("box");a.append(b);a=this.create("play");a.append(this.create("icon-play"));b.append(a);b.append(this.create("fullscreen"));a=this.create("time");a.append(this.create("time-current"));a.append(this.create("time-duration"));b.append(a);a=this.create("track");a.append(this.create("track-buffer"));a.append(this.create("track-fill"));a.append(this.create("track-overlay"));a.append(this.create("track-knob"));b.append(a)},formatTime:function(a){if(isNaN(a))return"-:-";var b=function(a,b){for(var c=
""+a;c.length<b;)c="0"+c;return c},c=Math.floor(a/3600),d=Math.floor(a%60),a=[b(Math.floor(a%3600/60),2),b(d,2)];c&&a.unshift(c);return a.join(":")},find:function(a){return c(this.container).find("."+this.cssName(a))},create:function(a){return c("<div></div>").addClass(this.cssName(a))},cssName:function(a){return this.config.cssPrefix+(a?"-"+a:"")}};d.annotationSort=function(a,b){var c=parseFloat(a.start),d=parseFloat(b.start);return d>c?-1:c>d?1:0}})();
(function(){var c=jQuery,f={cssPrefix:"metaplayer-embed",label:"Embed:",sizes:[{name:"large",width:960,height:590},{name:"medium",width:620,height:380},{name:"small",width:400,height:245}],embedUrl:"{{embedURL}}&width={{width}}&height={{height}}",embedCode:'<iframe src="{{src}}" height="{{height}}px" width="{{width}}px" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" style="border:0; padding:0; margin:0;"></iframe>'},d=function(a,b,d){this.config=c.extend(!0,{},f,d);this.container=
a;this.addDom();b.metadata.listen(MetaPlayer.MetaData.DATA,this.onMetaData,this)};MetaPlayer.Embed=d;MetaPlayer.addPlugin("embed",function(a,b){this.embed=new d(a,this,b)});d.prototype={onMetaData:function(a){this._metadata=a.data;this._current&&this.open(this._current);this.find().show()},addDom:function(){var a=this.create().hide().appendTo(this.container),b=this;this.create("header").text(this.config.label).appendTo(a);c.each(this.config.sizes,function(c,d){b.create("button").addClass(b.cssName(d.name)).appendTo(a).append(b.create("label").text(d.name)).attr("title",
d.width+"x"+d.height).click(function(){b.onClick(d)})});this.create("clear","br").css("clear","both").css("height","1").appendTo(a);var d=this.create("textbox").hide().appendTo(a);this.create("close").html("&otimes;").appendTo(d).click(function(){b.close()});this.create("text","textarea").attr("readonly","readonly").appendTo(d)},onClick:function(a){this._current&&this._current.name==a.name?this.close():this.open(a)},open:function(a){this.close();this._current=a;this.find(a.name).addClass(this.cssName("selected"));
var b=this._metadata,a=c.extend({},b.ramp,b,a);a.src=encodeURI(d.templateReplace(this.config.embedUrl,a));a=d.templateReplace(this.config.embedCode,a);this.find("textbox").show();this.find("text").val(a).select()},close:function(){this.find("selected").removeClass(this.cssName("selected"));this.find("textbox").hide();delete this._current},find:function(a){return c(this.container).find("."+this.cssName(a))},create:function(a,b){b||(b="div");return c("<"+b+">").addClass(this.cssName(a))},cssName:function(a){return this.config.cssPrefix+
(a?"-"+a:"")}};d.templateReplace=function(a,b){return a.replace(/\{\{(\w+)\}\}/g,function(a,c){return b[c]})}})();
(function(){var c=jQuery,f={target:"",cssPrefix:"metaplayer-endcap",template:"templates/ui.endcap.tmpl.html",siteSearchUrl:"",countDownSec:20,fbUrl:"http://www.facebook.com/plugins/like.php",fadeMs:250},d=function(a,b){if(!(this instanceof d))return new d(a,b);this.config=c.extend({},f,b);this.player=a;this.countdownEnabled=0<this.config.countDownSec;this.baseUrl=MetaPlayer.script.base("(metaplayer|ui).endcap.js");this.container=this.player.layout.stage;this.getTemplate()};MetaPlayer.addPlugin("endcap",
function(a){this.endcap=d(this,a)});d.prototype={getTemplate:function(){c.ajax(this.baseUrl+this.config.template,{context:this,success:function(a){c(this.container).append(a);this.init()}})},init:function(){var a=this,b=this.player.video,d=this.player.playlist;this.player.metadata.addEventListener(MetaPlayer.MetaData.DATA,function(b){a.onMetaData(b)});c(b).bind("play playing seeked loadstart",function(){a.onPlaying()});c(b).bind("ended",function(){a.onEnded()});this.find("countdown").click(function(b){a.countdown.toggle();
b.stopPropagation()});this.find().click(function(){a.countdown.stop()});this.find("preview").click(function(){d.next()});this.find("repeat").click(function(){b.currentTime=0;b.play()});this.find("search-btn").click(function(){a.doSiteSearch()});this.find("search-input").keypress(function(b){13==b.which&&a.doSiteSearch()});d.autoAdvance=!1;this.countdown=MetaPlayer.timer(1E3,this.config.countDownSec);this.countdown.listen("time",this.onCountdownTick,this);this.countdown.listen("complete",this.onCountdownDone,
this);if(MetaPlayer.Embed)this.embed=new MetaPlayer.Embed(this.find("embed"),this.player),this.find("embed").show();if(MetaPlayer.Social)this.social=new MetaPlayer.Social(this.find("social"),this.player);this.toggle(!1,!0)},doSiteSearch:function(){var a=this.find("search-input").val(),b=this.siteSearchUrl||this.config.siteSearchUrl,b=b+encodeURIComponent(a);top.location=b},onEnded:function(){this.player.video.ad||(this.toggle(!0),this.countdownEnabled?(this.countdown.start(),this.find("countdown").text(this.config.countDownSec)):
this.find("countdown").text(""))},onPlaying:function(){this.countdown.reset();this.toggle(!1)},toggle:function(a,b){var d=this.find().stop();void 0===a&&(a=!d.is(":visible"));b?d.toggle(a):a?d.show().animate({opacity:1},this.config.fadeMs,function(){c(this).show()}):d.animate({opacity:0},this.config.fadeMs,function(){c(this).hide()})},onMetaData:function(){var a=this.player.metadata.getData();if(a){this.toggle(!1);this.find("again-thumb").attr("src",a.thumbnail);this.find("again-title").text(a.title);
this.find("again").show();if(a.ramp)this.siteSearchUrl=a.ramp.siteSearchURL;this.find("next").hide();a=this.player.playlist;(a=a.getItem(a.getIndex()+1))&&this.player.metadata.load(a,this.onNextData,this)}},onNextData:function(a){this.find("preview-thumb").attr("src",a.thumbnail);this.find("preview-title").text(a.title);this.find("next").show()},onCountdownTick:function(a){this.find("countdown").text(Math.round(a.data.remain))},onCountdownDone:function(){this.player.playlist.next()},find:function(a){return c(this.container).find("."+
this.cssName(a))},create:function(a,b){b||(b="div");return c("<"+b+">").addClass(this.cssName(a))},cssName:function(a){return this.config.cssPrefix+(a?"-"+a:"")}}})();
(function(){var c=jQuery,f=window.Popcorn,d={cssPrefix:"mp-ff",filterMsec:500,revealMsec:1500,duplicates:!1,scrollbar:!0,renderAnnotations:!0,baseUrl:""},a=function(b,e){if((b=c(b).get(0))&&a.instances[b.id])return a.instances[b.id];if(!(this instanceof a))return new a(b,e);this.config=c.extend(!0,{},d,e);this.target=c("<div></div>").addClass(this.cssName("scroller")).width("100%").height("100%").appendTo(b);this.scrollbar=MetaPlayer.scrollbar(b,{disabled:!this.config.scrollbar});this.seen={};this.init();
MetaPlayer.dispatcher(this);a.instances[b.id]=this};a.instances={};MetaPlayer.addPlugin("framefeed",function(b,c){this.cues.enable("framefeed",{target:b});this.framefeed=a(b,c);this.framefeed.player=this});MetaPlayer.framefeed=a;a.prototype={init:function(){var a=c(this.target);this.items=[];a.addClass(this.cssName())},filter:function(a){this.hideAll();this.query=a;this.render();this.scrollbar.scrollTo(0)},hideAll:function(){var a=this;c.each(this.items,function(c,d){a.hideItem(d)});this.dispatch("size")},
render:function(){var a=this;c.each(this.items,function(c,d){a.renderItem(d)});this.scrollbar.render()},filtered:function(a){return this.query&&(!a.tags||!a.tags.match(this.query))},setup:function(a){this.config.renderAnnotations&&this.player&&this.player.controls&&this.player.controls.addAnnotation(a.start,null,a.topic||"","metaq")},focus:function(a){this.render();a.active=!0;this.frame(a,!0)},blur:function(a){a.active=!1;this.hideItem(a);this.scrollbar.render()},frame:function(a,d){"string"==typeof a&&
(a={url:a});var f=a.url;!f.match("^http")&&this.config.baseUrl&&(f=this.config.baseUrl+f);if(!this.seen[f]||this.seen[f].start==a.start||this.config.duplicates){this.seen[f]=a;var g=this,i=null==d?this.config.revealMsec:d;a.item?this.renderItem(a,i):(a.loadAnimate=!0,f=c("<iframe frameborder='0'></iframe>").attr("src",f).attr("scrolling","no").attr("marginheight",0).attr("marginwidth",0).bind("load",function(){a.loaded=!0;g.renderItem(a,a.loadAnimate?i:null)}).attr("height",a.height),a.item=c("<div></div>").addClass(this.cssName("box")).prependTo(this.target).append(f),
this.hideItem(a),this.items.push(a))}},hideItem:function(a){a.item.height(0).hide().css("opacity",0)},renderItem:function(a,c){a.item.stop();a.loadAnimate=!1;if(!a.active||!a.loaded||this.filtered(a))this.hideItem(a);else if(1!=a.item.css("opacity")){a.item.show();var d=this.scrollbar.scrollTop(),f=this;0<d||!c?(a.item.height(a.height).animate({opacity:1},this.config.filterMsec),d&&c?this.scrollbar.scrollTo(0,d+a.height):this.scrollbar.render()):a.item.animate({height:a.height,opacity:1},c,function(){f.scrollbar.render()});
f.dispatch("size")}},clear:function(){c(this.target).empty()},find:function(a){return c(this.container).find("."+this.cssName(a))},create:function(a,d){d||(d="div");return c("<"+d+">").addClass(this.cssName(a))},cssName:function(a){return this.config.cssPrefix+(a?"-"+a:"")}};f&&f.plugin("framefeed",{_setup:function(b){a(b.target).setup(b)},start:function(b,c){a(c.target).focus(c)},end:function(b,c){a(c.target).blur(c)},_teardown:function(b){a(b.target).clear()}})})();
(function(){var c=jQuery,f=window.Popcorn,d={cssPrefix:"mp-hl",baseUrl:""},a=function(b,e){if((b=c(b).get(0))&&a.instances[b.id])return a.instances[b.id];if(!(this instanceof a))return new a(b,e);this.config=c.extend(!0,{},d,e);this.seen={};this.init(b);a.instances[b.id]=this};a.instances={};MetaPlayer.addPlugin("headlines",function(b,c){this.cues.enable("headlines",{target:b});this.headlines=a(b,c)});MetaPlayer.Headlines=a;a.prototype={init:function(a){this.target=c("<div></div>").addClass(this.cssName()).appendTo(a);
this.title=c("<div></div>").addClass(this.cssName("title")).appendTo(this.target);a=c("<div></div>").addClass(this.cssName("nav")).appendTo(this.target);c("<span></span>").addClass(this.cssName("prev")).text("<").appendTo(a);c("<span></span>").addClass(this.cssName("next")).text(">").appendTo(a);this.scroll=c("<div></div>").addClass(this.cssName("scroll")).appendTo(this.target);this.items=[]},render:function(){},rss:function(a,d){!a.match("^http")&&this.config.baseUrl&&(a=this.config.baseUrl+a);c.ajax(a,
{dataType:"xml",timeout:15E3,context:this,data:{},error:function(c,d){console.error("Load RSS error: "+d+", url: "+a)},success:function(a){this.onRSS(a,d)}})},onRSS:function(a,d){this.clear();this.title.text(d||c(a).find("channel").children("title").text());var f=c(a).find("item"),g=this;c.each(f,function(a,b){var d=c(b);g.addItem(d.find("title").text(),d.find("link").text())})},addItem:function(a,d){c("<a></a>").text(a).addClass(this.cssName("item")).attr("href",d).appendTo(this.scroll);c(document.createTextNode(" ")).appendTo(this.scroll)},
focus:function(a){this.rss(a.url,a.title)},blur:function(){this.clear()},clear:function(){this.scroll.empty();this.title.empty()},find:function(a){return c(this.container).find("."+this.cssName(a))},create:function(a,d){d||(d="div");return c("<"+d+">").addClass(this.cssName(a))},cssName:function(a){return this.config.cssPrefix+(a?"-"+a:"")}};f&&f.plugin("headlines",{_setup:function(b){a(b.target)},start:function(b,c){a(c.target).focus(c)},end:function(b,c){a(c.target).blur(c)},_teardown:function(b){a(b.target).clear()}})})();
(function(){var c=jQuery,f={target:"",autoHide:!0,cssPrefix:"metaplayer-overlay",template:"templates/ui.overlay.tmpl.html",captions:!1,mouseDelayMsec:1E3,seekBeforeSec:1,hideOnEnded:!0},d=function(a,b){if(!(this instanceof d))return new d(a,b);this.config=c.extend({},f,b);this.player=a;this.video=a.video;this.dispatcher=a.dispatcher;this.popcorn=a.popcorn;this.playlist=a.playlist;this.baseUrl=MetaPlayer.script.base("(metaplayer|ui).overlay.js");this.config.container?(this.container=this.config.container,
this.init()):(this.container=this.config.target||this.player.layout.stage,this.createMarkup());this.video.overlay=this};MetaPlayer.addPlugin("overlay",function(a){this.overlay=d(this,a)});d.prototype={init:function(){this.addUIListeners();this.addPlayerListeners();this.addPlaylistListeners();this.addPopcornListeners();this.addServiceListeners();this.addVideoListeners();this.onVolumeChange();this.onPlayStateChange();this.setCaptions(this.config.captions);this.adPlaying=!1;(this.player.isTouchDevice||
!this.config.autoHide)&&this.find("close-btn").show();if(MetaPlayer.Embed)this.embed=new MetaPlayer.Embed(this.find("embed"),this.player),this.find("embed").show();if(MetaPlayer.Social)this.social=new MetaPlayer.Social(this.find("social"),this.player)},getMarkup:function(){c("<div></div>").addClass("metaplayer-overlay");c("<div></div>").addClass("metaplayer-overlay-container")},addUIListeners:function(){var a=this;this.find("play").click(function(){a.video.play()});this.find("pause").click(function(){a.video.pause()});
this.find("mute").click(function(){a.video.muted=!0});this.find("unmute").click(function(){a.video.muted=!1});this.find("search-btn").click(function(){a.doSearch()});this.find("search-input").keypress(function(b){13==b.which&&a.doSearch()});this.find("close-btn").click(function(){a.toggle(!1)});this.find("results-close").click(function(){a.find("search-input").val("");a.player.search.query("")});var b=this.find("volume-bg");c(b).bind("mousedown touchstart",function(b){a.onVolumeDragStart(b)});c(document).bind("mouseup touchend",
function(b){a.onVolumeDragEnd(b)});c(document).bind("mousemove touchmove",function(b){if(a.volumeDragging)a.onVolumeDrag(b)});MetaPlayer.iOS?this._addTouchListeners():this._addMouseListeners();this.find("preview").click(function(){a.playlist.next()})},_addTouchListeners:function(){var a=this;c(this.player.video).bind("touchstart",function(){a._ended||a.delayedToggle(!0)})},_addMouseListeners:function(){var a=this,b=c([this.container,this.player.video]);b.bind("mouseenter",function(){!a._ended&&!a.adPlaying&&
a.delayedToggle(!0)});b.bind("mouseleave",function(){a._ended||a.delayedToggle(!1)})},addServiceListeners:function(){this.player.metadata.listen(MetaPlayer.MetaData.DATA,this.onTags,this)},addVideoListeners:function(){var a=this;c(this.video).bind("adstart adstop",function(b){"adstart"==b.type?(a.toggle(!1),a.adPlaying=!0):a.adPlaying=!1})},onTags:function(a){if(a.data.ramp){var b=this;c.each(a.data.ramp.tags||[],function(a,c){b.createTag(c.term)})}},renderNextUp:function(){var a=this.player.metadata,
b=this.playlist.getItem(this.playlist.getIndex()+1);if(b){var c=a.getData(b);if(c)this.onNextData(c);else a.load(b,this.onNextData,this)}},onNextData:function(a){this.find("preview-thumb").attr("src",a.thumbnail);this.find("preview-title").text(a.title);this.find("next").show()},onTrackChange:function(){this.nextup=null;this.clearSearch();c("."+this.cssName("tag")).remove();this.find("next").hide();this.renderNextUp()},createTag:function(a){var b=this,c=this.create("tag"),d=this.create("tag-label");
d.text(a);c.append(d);c.data("term",a);c.click(function(a){b.onTagClick(a)});this.find("tags").prepend(c)},onTagClick:function(a){this.player.search.query(c(a.currentTarget).data().term)},doSearch:function(){this.player.search.query(this.find("search-input").val())},onSearchStart:function(a){this.find("search-input").val(a.query)},onSearchResult:function(a){this.clearSearch();a=a.data;if(a.query.length){var b=0==a.results.length;this.find("results-none").toggle(b);var d=this;c.each(a.results,function(a,
b){d.createResult(b)});this.find("tags").hide();this.find("results").show()}},clearSearch:function(){this.find("result-list").empty();this.find("tags").show();this.find("results").hide()},createResult:function(a){var b=this,d=this.create("result");d.click(function(){b.video.currentTime=a.start-b.config.seekBeforeSec});var f=this.create("result-time");f.text(MetaPlayer.format.seconds(a.start));d.append(f);var g=this.create("result-text");d.append(g);c.each(a.words,function(a,d){var e=d.text;d.match&&
(e=c("<span>"),e.addClass(b.cssName("match")),e.text(d.text));g.append(e);g.append(" ")});this.find("result-list").append(d)},addPopcornListeners:function(){if(this.popcorn){var a=this;this.find("cc").click(function(){a.setCaptions(!1)});this.find("cc-off").click(function(){a.setCaptions(!0)})}},setCaptions:function(a){var b=this.player.popcorn;a?b.enable("captions"):b.disable("captions");this.find("cc").toggle(a);this.find("cc-off").toggle(!a)},addPlayerListeners:function(){var a=this,b=c(this.player.video);
b.bind("canplay",function(){var b=a.video.volume;a.video.volume=0.5;0.5!=a.video.volume&&a.hideVolumeControls();a.video.volume=b});b.bind("pause play seeked seeking canplay",function(){a.onPlayStateChange()});b.bind("ended",function(){a.onEnded()});b.bind("volumechange",function(){a.onVolumeChange()})},addPlaylistListeners:function(){var a=this;this.player.metadata.addEventListener("data",function(b){a.onTrackChange(b)});this.player.search.listen(MetaPlayer.Search.QUERY,this.onSearchStart,this);this.player.search.listen(MetaPlayer.Search.RESULTS,
this.onSearchResult,this)},onVolumeDragStart:function(a){this.volumeDragging=!0;this.onVolumeDrag(a);a.preventDefault()},onVolumeDragEnd:function(a){if(this.volumeDragging)this.volumeDragging=!1,this.onVolumeDrag(a),a.preventDefault()},onVolumeDrag:function(a){var b=a.originalEvent,a=a.pageX;if(b.targetTouches){if(!b.targetTouches.length)return;a=b.targetTouches[0].pageX}b=this.find("volume-bg");b=(a-b.offset().left)/b.width();0>b&&(b=0);1<b&&(b=1);this.video.muted=!1;this.video.volume=b},hideVolumeControls:function(){this.find("mute").hide();
this.find("unmute").hide();this.find("volume-bg").hide()},onVolumeChange:function(){var a=this.video.muted;this.find("mute").toggle(!a);this.find("unmute").toggle(a);a=a?0:this.video.volume;this.find("volume").width(100*a+"%")},onPlayStateChange:function(){this._ended=this.video.ended;this.video.paused?(this.find("pause").hide(),this.find("play").show()):(this.find("play").hide(),this.find("pause").show())},onEnded:function(){if(this.config.hideOnEnded&&this.config.autoHide)this._ended=!0,this.find().stop().height(0)},
createMarkup:function(){c.ajax(this.baseUrl+this.config.template,{context:this,success:function(a){c(this.container).append(a);this.config.autoHide&&this.find().height(0);this.init()}})},delayedToggle:function(a){this._delayed=a;if(this.config.autoHide||a){var b=this;setTimeout(function(){this.__opened!=b._delayed&&b.toggle(b._delayed)},this.config.mouseDelayMsec)}},toggle:function(a){this.__opened=a;var b=this.find().stop(),c=this.find("container").height();a?b.animate({height:c},500,function(){b.height("")}):
b.animate({height:0},500);this.embed&&this.embed.close(0)},find:function(a){return c(this.container).find("."+this.cssName(a))},create:function(a,b){b||(b="div");return c("<"+b+">").addClass(this.cssName(a))},cssName:function(a){return this.config.cssPrefix+(a?"-"+a:"")}}})();(function(){var c=jQuery,f=window.Popcorn;f&&f.plugin("script",{_setup:function(){},start:function(d,a){if(a.code.match(/^\s*<script/))c("head").append(a.code);else try{window.eval(a.code)}catch(b){}},end:function(){},_teardown:function(){}})})();
(function(){var c=jQuery,f={inputLabel:"Search in video",nextLabel:"NEXT:",cssPrefix:"mp-searchbar",spacingSec:0,maxNext:0,fadeOutPx:21,cueType:"tags",seekOffset:-0.5},d=function(a,b,e){if(!(this instanceof d))return new d(a,b,e);this.player=b;this.target=c(a);this.config=c.extend(!0,{},f,e);this.createMarkup();this.addListeners();this.clear()};MetaPlayer.SearchBar=d;MetaPlayer.addPlugin("searchbar",function(a,b){this.searchbar=d(a,this,b)});d.prototype={createMarkup:function(){this.ui={};c(this.target).addClass("mpf-searchbar");
this.nextup=c("<div>").addClass("mpf-searchbar-nextup").css("opacity",0).appendTo(this.target);c("<div>").addClass("mpf-searchbar-nextup-label").html(this.config.nextLabel+"&nbsp;").appendTo(this.nextup);this.counter=c("<div>").addClass("mpf-searchbar-nextup-countdown").appendTo(this.nextup);var a=c("<div>").addClass("mpf-searchbar-search").appendTo(this.target),b=c("<div>").addClass("mpf-searchbar-search-inputbox").appendTo(a);this.input=c("<input>").addClass("mpf-searchbar-search-input").attr("placeholder",
this.config.inputLabel).appendTo(b).keypress(this.bind(this.onInputKey));c("<div>").addClass("mpf-searchbar-search-submit").appendTo(a).click(this.bind(this.onInput));this.tags=c("<div>").addClass("mpf-searchbar-tags").appendTo(this.target);this.scroll=c("<div>").addClass("mpf-searchbar-tags-scroll").appendTo(this.tags);c("<div>").addClass("mpf-searchbar-tags-fade").appendTo(this.target);this.nav=c("<div>").addClass("mpf-searchbar-nav").appendTo(this.target);this.ui.prev=c("<div>").addClass("mpf-searchbar-nav-prev").appendTo(this.nav).click(this.bind(this.previous));
this.ui.next=c("<div>").addClass("mpf-searchbar-nav-next").appendTo(this.nav).click(this.bind(this.next));this.results=c("<div>").addClass("mpf-searchbar-results").appendTo(this.target);c("<div>").addClass("mpf-searchbar-results-clear").appendTo(this.results).click(this.bind(function(){this.player.search.query("")}));this.query=c("<div>").addClass("mpf-searchbar-results-query").appendTo(this.results);this.resultsFound=c("<div>").addClass("mpf-searchbar-results-label").html("found at: ").appendTo(this.results);
this.resultsNotFound=c("<div>").addClass("mpf-searchbar-results-label").html("not found. ").appendTo(this.results);this.resultsList=c("<div>").addClass("mpf-searchbar-results-list").appendTo(this.results);c("<div>").addClass("mpf-searchbar-results-fade").appendTo(this.results)},renderTag:function(a,b){!this.scroll.children().length||c("<div>").html("&#x2022;").addClass("mpf-searchbar-tag-spacer").appendTo(this.scroll);return c("<div>").append(c("<div>").addClass("mpf-searchbar-tag-label").text(a)).data("start",
b).data("term",a).addClass("mpf-searchbar-tag").appendTo(this.scroll)},addListeners:function(){this.player.cues.addEventListener(MetaPlayer.Cues.CUES,this.bind(this.onCues));this.player.video.addEventListener("timeupdate",this.bind(this.renderTime));this.target.delegate(".mpf-searchbar-tag, .mpf-searchbar-results-item","mouseenter",this.bind(this.onPreviewStart));this.target.delegate(".mpf-searchbar-tag, .mpf-searchbar-results-item","mouseleave",this.bind(this.onPreviewStop));this.scroll.delegate(".mpf-searchbar-tag",
"click",this.bind(function(a){this.player.video.currentTime=c(a.currentTarget).data("start")+this.config.seekOffset;a=c(a.currentTarget).data("term");this.player.search.query(a);this.input.val(a)}));this.resultsList.delegate(".mpf-searchbar-results-item","click",this.bind(function(a){this.player.video.currentTime=c(a.currentTarget).data("start")+this.config.seekOffset}));this.player.search.listen(MetaPlayer.Search.QUERY,this.onSearch,this);this.player.search.listen(MetaPlayer.Search.RESULTS,this.onResults,
this)},onPreviewStart:function(a){a=c(a.currentTarget).data("start");this.player.tracktip&&this.player.tracktip.open&&this.player.tracktip.open(a)},onPreviewStop:function(){this.player.tracktip&&this.player.tracktip.close&&this.player.tracktip.close()},onCues:function(){this.clear();var a=this.player.cues.getCues(this.config.cueType);this.tagData=[];var b;c.each(a,this.bind(function(a,d){var f=c.extend({},d);if(!b||!(this.getTerm(f)==this.getTerm(b)||f.start<b.start+this.config.spacingSec))b=d,f.el=
this.renderTag(this.getTerm(d),d.start),f.index=this.tagData.length,this.tagData.push(f)}));this.nextup.css("opacity",this.tagData.length?1:0);this.renderTime()},renderTime:function(a){var b=a;"number"!=typeof a&&(b=this.player.video.currentTime||0);if(this._renderCache&&b>this._renderCache.start&&(b<this._renderCache.end||!this._renderCache.end))this.renderNext(b);else if(this.tags.is(":visible")&&(this._renderCache=null,this.scroll.children(".mpf-searchbar-tag-selected").removeClass("mpf-searchbar-tag-selected"),
this.tagData&&this.tagData.length)){for(var c,d,a=-1;a<this.tagData.length;){c=this.tagData[a];d=this.tagData[a+1];if(!d||d.start>b)break;a++}this._renderCache={start:0,index:a};c?(c.el.addClass("mpf-searchbar-tag-selected"),this._renderCache.term=c.term,this._renderCache.start=c.start,this.centerTag(c.index)):this.centerTag(-1);if(d)this._renderCache.end=d.start}},renderNext:function(a){if(this._renderCache&&(a=Math.round(this._renderCache.end-a)||null,this._renderCache.counter!=a)){if(!this.config.maxNext||
a>this.config.maxNext)a=null;this.counter.text(MetaPlayer.format.seconds(a,{minutes:!1,seconds:!1}));this._renderCache.counter||this.nextup.children().show();this._renderCache.counter=a}},centerTag:function(a){var b=this.tagData[a],c=0,a=(this.tags.width()-this.config.fadeOutPx)/2;b&&(b=b.el.position().left+0.5*b.el.width(),c=b<a?0:b-a);this.scrollTo(c)},next:function(){for(var a=0,b,c,d=this.tags.width()-this.config.fadeOutPx-this.scroll.position().left;this.tagData&&a<this.tagData.length;)if(b=
this.tagData[a++],b.el.width()+b.el.position().left>d){c=b.el.position().left;break}c&&this.scrollTo(c)},previous:function(){for(var a=this.tags.width()-this.config.fadeOutPx,b=this.tagData.length-1,c,d=-this.scroll.position().left,f;0<=b;){c=this.tagData[b];if(c.el.position().left<d){f=c.el.position().left+c.el.width()-a;0>f&&(f=0);break}b--}null!=f&&this.scrollTo(f)},scrollTo:function(a,b){b?this.scroll.stop().css("left",-a):this.scroll.stop().animate({left:-a});var c=this.tags.width()-this.config.fadeOutPx,
d=c;if(this.tagData&&this.tagData.length)d=this.tagData[this.tagData.length-1].el,d=d.width()+d.position().left;this.ui.prev.css("visibility",0<a?"visible":"hidden");this.ui.next.css("visibility",a+c<d?"visible":"hidden")},search:function(a){this.player.search.query(a)},clear:function(){this.counter.hide();this.scroll.empty();this.scrollTo(0,!0);this._renderCache=null;this.toggleResults(!1)},onInputKey:function(a){13==a.which&&(this.onInput(),a.preventDefault())},onInput:function(){this.player.search.query(this.input.val())},
toggleResults:function(a){this.results.toggle(a);this.nextup.toggle(!a);this.tags.toggle(!a);this.nav.toggle(!a);a||this.input.val("")},onSearch:function(a){this.query.text(a.query);this.resultsList.empty()},onResults:function(a){var b=a.data.results;if(a.query){var d=Boolean(a.data.results.length);this.resultsFound.toggle(d);this.resultsNotFound.toggle(!d);this.query.text(a.query);c.each(b,this.bind(function(a,b){c("<div></div>").data("start",b.start).text(MetaPlayer.format.seconds(b.start)).addClass("mpf-searchbar-results-item").appendTo(this.resultsList)}));
this.toggleResults(!0)}else this.toggleResults(!1)},getTerm:function(a){return a.term||a.topic||a.text||""},bind:function(a){var b=this;return function(){return a.apply(b,arguments)}},find:function(a){return c(this.container).find("."+this.cssName(a))},create:function(a,b){b||(b="div");return c("<"+b+">").addClass(this.cssName(a))},cssName:function(a){return this.config.cssPrefix+(a?"-"+a:"")}}})();
(function(){var c=jQuery,f={cssPrefix:"mp-search",tags:!0,query:"",seekBeforeSec:0.25,context:3,strings:{tagHeader:"In this video:",searchPlaceholder:"Search transcript...",ellipsis:"...",resultsHeader:'Showing {{count}} {{results}} for "{{query}}":',results:function(a){return"result"+(1==a.count?"":"s")},clear:"x"}},d=function(a,b,e){if(!(this instanceof d))return new d(a,b,e);this.player=b;this.target=c(a);this.config=c.extend(!0,{},f,e);this.createMarkup();this.scrollbar=MetaPlayer.scrollbar(this.results);
this.addListeners();this.clear()};d.instances={};d._count=0;MetaPlayer.SearchBox=d;MetaPlayer.addPlugin("searchbox",function(a,b){this.searchbox=d(a,this,b)});d.getPhrase=function(a,b,c){"string"==typeof a&&(a=a.split(" "));var d=2*c+1,f=0;a.length-b<=c?f=a.length-d:b>c&&(f=b-c);0>f&&(f=0);return{words:a.slice(f,f+d),start:f,len:d}};d.prototype={createMarkup:function(){var a=c(this.target),b=this.create(),d=this.create("form");b.append(d);var f=c('<input type="text" />');f.addClass(this.cssName("input"));
f.val(this.config.query);f.attr("placeholder",this.getString("searchPlaceholder"));d.append(f);f=this.create("submit","a");f.append(this.create("submit-label","span"));d.append(f);this.results=this.create("results").appendTo(b);this.create("tags").appendTo(b);this.container=b;a.append(this.container)},addListeners:function(){var a=this;this.find("submit").bind("click",function(){a.onSearch()});this.find("input").bind("keypress",function(b){if(13==b.which)a.onSearch()});this.find("results").bind("click",
function(b){var d=c(b.target).parents("."+a.cssName("result"));d.length||(d=c(b.target));b=d.data().start;if(a.player)a.player.video.currentTime=b-a.config.seekBeforeSec});this.player.metadata.listen(MetaPlayer.MetaData.DATA,this.onTags,this);this.player.search.listen(MetaPlayer.Search.QUERY,this.onSearchStart,this);this.player.search.listen(MetaPlayer.Search.RESULTS,this.onSearchResult,this)},onTags:function(a){a=a.data.ramp;if(a.tags){var b=this.find("tags"),d=this;b.empty();this.create("tag-header").text(this.getString("tagHeader")).appendTo(b);
c.each(a.tags,function(a,f){var i=c("<div></div>").addClass(d.cssName("tag")).appendTo(b);c("<span></span>").addClass(d.cssName("tag-label")).text(f.term).click(function(){d.search(f.term)}).appendTo(i)})}},onSearch:function(){this.search(this.find("input").val())},search:function(a){this.player.search.query(a)},clear:function(){this.scrollbar.body.empty();this.find("close").hide();this.find("tags").show()},onClose:function(){this.search("")},onSearchStart:function(a){this.find("input").val(a.query)},
onSearchResult:function(a,b){this.clear();if(b.query.length){this.find("tags").hide();this.find("close").show();var e=this.scrollbar.body;c("<div></div>").addClass(this.cssName("result-count")).text(this.getString("resultsHeader",{count:b.results.length,query:b.query.join(" ")})).appendTo(e);var f=this;this.create("close").text(this.getString("clear")).bind("click",function(){f.onClose()}).appendTo(e);c.each(b.results,function(a,i){var h=f.create("result"),j=i.start,l=[],n;c.each(i.words,function(a,
b){var d=c("<span>").text(b.text);b.match&&(n=a,d.addClass(f.cssName("match")));l.push(d.get(0))});n=b.usingCues?0:n;var m=d.getPhrase(l,n,b.usingCues?10:f.config.context),j=b.usingCues?i.start:i.words[m.start].start;h.data("start",j);f.create("time").text(MetaPlayer.format.seconds(j)).appendTo(h);c.each(m.words,function(a,b){h.append(b);a+1<m.words.length&&h.append(" ")});j=f.getString("ellipsis");h.appendTo(e).prepend(j).append(j)})}},getString:function(a,b){var d=c.extend({},this.config.strings,
b);return MetaPlayer.format.replace(this.config.strings[a],d)},find:function(a){return c(this.container).find("."+this.cssName(a))},create:function(a,b){b||(b="div");return c("<"+b+">").addClass(this.cssName(a))},cssName:function(a){return this.config.cssPrefix+(a?"-"+a:"")}}})();
(function(){function c(a){return"mpf-share"+(a?"-"+a:"")}var f=jQuery,d={openDelayMsec:1E3,hideDelayMsec:4E3,backButtonSec:5,overlay:!0,autoHide:!0,embedHeight:380,embedWidth:620,embedTemplate:"<iframe src='{{embedURL}}' height='{{embedHeight}}px' width='{{embedWidth}}px'  frameborder='0' scrolling='no' marginheight='0' marginwidth='0'  style='border:0; padding:0; margin:0;'></iframe>"};MetaPlayer.addPlugin("share",function(a){this.share=new MetaPlayer.UI.Share(this,a)});MetaPlayer.UI.Share=function(a,
b){this.player=a;this.config=f.extend({},d,b);this.createMarkup(a.layout.stage);this.player.metadata.listen("data",this.bind(this._onData))};MetaPlayer.UI.Share.prototype={createMarkup:function(a){var b=this.ui={};this.player.controlbar&&this.player.controlbar.addButton&&this.player.controlbar.addButton(f("<div></div>").addClass(c("button")).text("Share").attr("title","Share Menu").click(this.bind(function(a){this.toggle();a.preventDefault()})));b.shareMenu=f("<div />").hide().addClass(c("panel")).appendTo(a);
b.shareClose=f("<div />").addClass(c("close")).text("x").click(this.bind(function(){this.toggle(!1)})).appendTo(b.shareMenu);b.shareButtons=f("<div />").addClass(c("buttons")).appendTo(b.shareMenu);if(MetaPlayer.Social)this._social=new MetaPlayer.Social(b.shareButtons,this.player);b.shareEmbed=f("<div />").addClass(c("embed")).appendTo(b.shareMenu);a=f("<div />").addClass(c("row")).appendTo(b.shareMenu);f("<div />").addClass(c("label")).text("Get Link").appendTo(a);b.shareLink=f("<input />").bind("click touchstart",
function(a){f(a.currentTarget).select()}).addClass(c("link")).appendTo(a);a=f("<div />").addClass(c("row")).appendTo(b.shareMenu);f("<div />").addClass(c("label")).text("Get Embed").appendTo(a);b.shareEmbed=f("<input />").bind("click touchstart",function(a){f(a.currentTarget).select()}).addClass(c("embed")).appendTo(a)},toggle:function(a){null==a&&(a=!this.ui.shareMenu.is(":visible"));a&&this._hasData?this.ui.shareMenu.stop().fadeIn():this.ui.shareMenu.stop().fadeOut()},_onData:function(){this._hasData=
!0;var a=this.player.metadata.getData();this.ui.shareLink.val(a.ramp.linkURL);this.ui.shareEmbed.val(this.embedUrl(a.ramp.embedURL))},embedUrl:function(a){return MetaPlayer.format.replace(this.config.embedTemplate,{embedHeight:this.config.embedHeight,embedWidth:this.config.embedWidth,embedURL:a})},bind:function(a){var b=this;return function(){a.apply(b,arguments)}}}})();
(function(){var c=jQuery,f={cssPrefix:"metaplayer-social",facebookApi:"//www.facebook.com/plugins/like.php",twitterApi:"//platform.twitter.com/widgets/tweet_button.html",shareText:"Check this video out -- "},d=function(a,b,d){this.config=c.extend(!0,{},f,d);this.player=b;this.container=a;this.addDom();this.player.metadata.listen(MetaPlayer.MetaData.DATA,this.onMetaData,this)};MetaPlayer.Social=d;MetaPlayer.addPlugin("social",function(a,b){new d(a,this,b)});d.prototype={addDom:function(){var a=this.create().hide().appendTo(this.container);
this.create("clear").appendTo(a)},onMetaData:function(a){this.setFacebook(a.data);this.setTwitter(a.data);this.find().show()},setTwitter:function(a){var b={count:"horizontal",lang:"en"};b.text=this.config.shareText+(a.title||"");b.url=a.link||a.linkURL;if(a.hashtags)b.hashtags=a.hashtags;a=c.map(b,function(a,b){return escape(b)+"="+escape(a)}).join("&");b=this.create("twitter","iframe").attr("allowtransparency","true").attr("frameborder","0");b.attr("src",this.config.twitterApi+"#"+a);this.find("twitter").remove();
this.find().prepend(b)},setFacebook:function(a){var b={href:"",layout:"button_count",show_faces:!1,action:"like",colorscheme:"light",width:"",height:""},d=this.create("facebook","iframe").attr("allowtransparency","true").attr("frameborder","0");b.href=a.link||a.linkURL||document.location.toString();b.width=d.width();b.height=d.height();a=this.config.facebookApi+"?"+c.param(b,!0);d.attr("src",a);this.find("facebook").remove();this.find().prepend(d)},find:function(a){return c(this.container).find("."+
this.cssName(a))},create:function(a,b){b||(b="div");return c("<"+b+">").addClass(this.cssName(a))},cssName:function(a){return this.config.cssPrefix+(a?"-"+a:"")}}})();
(function(){var c=jQuery,f=window.Popcorn;if(f){var d={top:1,left:0,right:0,durationSec:4,center:!0};f.TimeQ=function(a,b){var e=a._timeQ;if(e){if(b)e.config=c.extend(e.config,b),e.position();return e}if(!(this instanceof f.TimeQ))return new f.TimeQ(a,b);this.config=c.extend({},d,b);this.el=c("<div></div>").addClass("mpf-timeq").css({position:"absolute","z-index":this.config.zIndex,display:"none"}).appendTo(c("body"));this.media=a.media;a._timeQ=this};f.TimeQ.prototype={init:function(a){a.end=a.start+
this.config.durationSec},focus:function(a){this.el.html(a.code);this.position(a.start);this.el.stop().slideDown()},blur:function(){this.el.stop().slideUp()},destroy:function(){this.el.remove()},position:function(a){null==a?a=this.last:this.last=a;var b=0;0<this.media.duration&&(b=a/this.media.duration);var a=this.el,d=this.config.center,f=c(this.media),g=f.offset(),i=f.outerWidth()-(this.config.left+this.config.right),f=f.height(),h=g.left+(d?0:this.config.left),j=h+i,l=a.outerWidth(),b=g.left+this.config.left+
i*b;d&&(b-=0.5*l,j+=this.config.left+this.config.right);b<h&&(b=h);b+l>j&&(b=j-l);a.css({top:g.top+this.config.top+f,left:b})}};f.plugin("timeQ",{_setup:function(a){f.TimeQ(this).init(a)},start:function(a,b){f.TimeQ(this).focus(b)},end:function(a,b){f.TimeQ(this).blur(b)},_teardown:function(){f.TimeQ(this).destroy()}});MetaPlayer&&MetaPlayer.addPlugin("timeQ",function(a){f.TimeQ(this.popcorn,a)})}})();
(function(){var c=jQuery,f={offsetY:5},d=function(a,b,e){if(!(this instanceof d))return new d(a,b,e);this.player=b;this.player.tracktip=this;this.target=c(a);this.config=c.extend(!0,{},f,e);this.createMarkup();this.renterTime(0);this.renderPosition(0);this.player.layout.listen("resize",this.onResize,this)};MetaPlayer.TrackTip=d;MetaPlayer.addPlugin("tracktip",function(a,b){this.tracktip=d(a,this,b)});d.prototype={createMarkup:function(){this.ui={};this.ui.track=c(this.target).bind("mousemove touchmove",
this.bind(this.onTrackMove)).bind("mouseleave touchend",this.bind(this.close));this.ui.base=c("<div></div>").addClass("mp-tracktip").bind("touchend",this.bind(this.close)).appendTo(this.target);this.ui.box=c("<div></div>").addClass("mp-tracktip-box").appendTo(this.ui.base);this.ui.thumb=c("<img>").addClass("mp-tracktip-thumb").appendTo(this.ui.box);this.ui.caption=c("<div></div>").addClass("mp-tracktip-cc").appendTo(this.ui.box);this.ui.box=c("<div></div>").addClass("mp-tracktip-clear").appendTo(this.ui.base);
this.ui.time=c("<div></div>").addClass("mp-tracktip-time").appendTo(this.ui.base)},open:function(a){var b=this.player.video.duration;b&&(a/=b,this.renterTime(a),this.renderPosition(a))},close:function(){this.ui.base.stop().hide().css("opacity",0)},onTrackMove:function(a){a=this._dragPercent(a,this.target);this.renterTime(a);this.renderPosition(a)},renderPosition:function(a){var b=this.ui.track.width(),c=this.ui.base.outerWidth(),d=this.ui.base.outerHeight(),f=b-c,a=b*a-0.5*c;0>a&&(a=0);a>f&&(a=f);
this.ui.base.css("left",a);this.ui.base.css("top",-(d+this.config.offsetY))},renterTime:function(a){var b=this.player.video.duration;b&&(a*=b,this.ui.time.text(MetaPlayer.format.seconds(a)),this.renderCaption(a),this.renderThumb(a),this.ui.base.stop().show().animate({opacity:1},100))},renderCaption:function(a){var b=this.player.cues.getCaptions(),d;c.each(b,function(b,c){if(c.start>a)return!1;d=c});b="";d&&d.text&&(b="..."+d.text.replace(/\s*$/,"")+"...");this.ui.caption.html(b)},renderThumb:function(a){var b=
this.player.metadata.getData(),c,d="jpg",f=10;if(b)b.timedThumbnailRoot?(c=b.timedThumbnailRoot,d=b.timedThumbnailExt,f=parseFloat(b.timedThumbnailRate)):b.ramp&&b.ramp.thumbnail&&(c=b.ramp.thumbnail.match(/^.*\//)[0]),c?(a=Math.ceil(a/f)*f,c=c+MetaPlayer.format.zpad(a,6)+"."+d):c=b.thumbnail,c&&this.ui.thumb.attr("src",c)},_dragPercent:function(a,b){var d=a.originalEvent,f=a.pageX;if(d.targetTouches){if(!d.targetTouches.length)return;f=d.targetTouches[0].pageX}d=c(b);f=(f-d.offset().left)/d.width();
0>f?f=0:1<f&&(f=1);return f},onResize:function(){var a=c(this.player.layout.base),a=Math.max(0.2*a.width(),250),b=a/20;this.ui.thumb.height(5*b+"px");this.ui.base.css("font-size",b+"px").width(a)},bind:function(a){var b=this;return function(){return a.apply(b,arguments)}}}})();
(function(){var c=jQuery,f=window.Popcorn,d={cssPrefix:"transcript",focusMs:750,fadeMs:1E3,opacity:1,timestamps:!1,breaks:!1};c.expr[":"].tx_contains=function(a,d,f){return 0<=c(a).text().toUpperCase().indexOf(f[3].toUpperCase())};var a=function(b,e,f){if(void 0==f&&(!e||!e.play))f=e,e=null;if("string"==typeof b&&a.instances[b])return b=a.instances[b],e&&e.play&&b.setPlayer(e),b;if(!(this instanceof a))return new a(b,e,f);this.target=b;this.setPlayer(e);this.config=c.extend(!0,{},d,f);this.init();
this.addListeners();a.instances[b]=this};a.instances={};MetaPlayer.Transcript=a;MetaPlayer.addPlugin("transcript",function(b,c){this.cues.enable("transcript",{target:b},{clone:"captions"});this.transcript=a(b,this.video,c)});a.prototype={init:function(){this.container=this.create();this.scroller=this.create("scroller");this._captions={};c(this.target).append(this.container);c(this.container).append(this.scroller);this.scrollbar=MetaPlayer.scrollbar(this.container)},addListeners:function(){var a=this;
this.container.bind("click touchstart",function(d){var f=c(d.target).parent("."+a.cssName("caption"));if(f.length&&(f=c(f).data("options")))a.player.currentTime=f.start,d.stopPropagation(),d.preventDefault()});this.container.bind("mouseenter touchstart",function(){a.mousing=!0});this.container.bind("mouseleave touchend",function(){a.mousing=!1})},setPlayer:function(a){if(!this.player){this.player=a;var d=this;c(this.player).bind("search",function(a){d.search(a.originalEvent.data)})}},search:function(a){"string"==
typeof a&&(a=a.split(/\s+/));var d=this.cssName("search");this.find("search").removeClass(d);var f=this;c.each(a,function(a,b){f.find("caption").find("."+f.cssName("text")+" span:tx_contains("+b+")").addClass(d)})},append:function(a){var d=this.create("caption",this.config.breaks?"div":"span");if(this.config.timestamps){var f=this.create("time","span");f.text(a.start+"s");d.append(f)}var g=this,i=c("<span></span>").addClass(this.cssName("text")).click(function(){g.player.currentTime=a.start}).appendTo(d),
f=a.text.split(/\s+/);c.each(f,function(a,b){c("<span></span>").text(b).appendTo(i);c(document.createTextNode(" ")).appendTo(i)});d.data("options",a);d.css("opacity",this.config.opacity);this.scroller.append(d);this._captions[a.start]=d},clear:function(){c(this.scroller).empty();this._captions={};this.scrollbar.render()},focus:function(a){a=this._captions[a.start];a.stop().animate({opacity:1},this.config.focusMs);a.toggleClass(this.cssName("focus"),!0);a=a.position().top-this.container.height()/2;
this.mousing||this.scrollbar.scrollTo(0,a,1E3)},blur:function(a){a=this._captions[a.start];a.stop().animate({opacity:this.config.opacity},this.config.fadeMs);a.toggleClass(this.cssName("focus"),!1)},find:function(a){return c(this.container).find("."+this.cssName(a))},create:function(a,d){d||(d="div");return c("<"+d+">").addClass(this.cssName(a))},cssName:function(a){return this.config.cssPrefix+(a?"-"+a:"")}};f&&f.plugin("transcript",{_setup:function(b){a(b.target,this.media).append(b)},start:function(b,
c){a(c.target).focus(c)},end:function(b,c){a(c.target).blur(c)},_teardown:function(b){a(b.target).clear()}})})();
